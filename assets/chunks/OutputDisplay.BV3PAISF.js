import{c as et,e as T,V as Ki,m as z,a as F,r as it,s as To,b as xt,i as q,d as H,f as Ot,g as qi,h as Mo,D as ko,j as ua,S as Po,k as Oo,l as je,n as G,o as j,p as We,M as Ct,q as Eo,t as X,u as Ro,v as kt,w as Yr,x as No,C as Bo,y as ha,z as Q,A as Go,B as zo,E as Lt,F as U,G as Vo,H as Fo,I as Ho,J as Wo,K as ji,L as Z,N as Xe,O as Xo,_ as R,P as Yo,Q as Ji,R as mt,T as Qi,U as ca,W as Uo,X as oe,Y as Zo,Z as ut,$ as Sr,a0 as tn,a1 as en,a2 as Ee,a3 as va,a4 as $o,a5 as Gt,a6 as Ko,a7 as rn,a8 as an,a9 as nn,aa as on,ab as sn,ac as ln,ad as qo,ae as jo,af as Jo,ag as Qo,ah as ts,ai as es,aj as rs,ak as as,al as fa,am as is,an as wr,ao as Ar,ap as It,aq as ht,ar as ns,as as os,at as ss,au as ls,av as us,aw as hs,ax as cs,ay as vs,az as fs,aA as ps,aB as ds,aC as gs,aD as ms,aE as ys,aF as ct,aG as yt,aH as ue,aI as Ht,aJ as _s,aK as un,aL as xs,aM as pa,aN as Dr,aO as hn,aP as Cr,aQ as bs,aR as Ss,aS as cn,aT as ws,aU as As,aV as Ds,aW as Cs,aX as ye,aY as Ls,aZ as Is,a_ as K,a$ as J,b0 as Ts,b1 as _e,b2 as rt,b3 as Wt,b4 as da,b5 as vn,b6 as fn,b7 as nt,b8 as pn,b9 as _t,ba as $t,bb as Ye,bc as Ms,bd as ge,be as he,bf as Y,bg as ga,bh as Ur,bi as Zr,bj as ma,bk as me,bl as ks,bm as ya,bn as ft,bo as $r,bp as Xt,bq as Lr,br as Ir,bs as _a,bt as vt,bu as Ps,bv as dn,bw as Os,bx as Ge,by as Es,bz as gn,bA as xa,bB as ba,bC as Rs,bD as Ns,bE as mn,bF as Bs,bG as yn,bH as _n,bI as Gs,bJ as Yt,bK as Ut,bL as ce,bM as ve,bN as ze,bO as Zt,bP as Kr,bQ as zs,bR as xn,bS as Sa,bT as bn,bU as Ve,bV as Vs,bW as Fs,bX as Sn,bY as Hs,bZ as Ws,b_ as wn,b$ as Xs,c0 as An,c1 as Tr,c2 as Ys,c3 as Us,c4 as qr,c5 as Zs,c6 as Dn,c7 as wa,c8 as $s,c9 as Cn,ca as Ks,cb as qs,cc as js,cd as Js,ce as Fe,cf as Qs,cg as Aa,ch as Da,ci as tl,cj as el,ck as rl,cl as al,cm as Je,cn as Ca,co as La,cp as Ln,cq as il,cr as Ia,cs as nl,ct as ol,cu as sl,cv as ll,cw as ul,cx as hl,cy as Ta,cz as se,cA as cl,cB as vl,cC as fl}from"./index.BZAksmuo.js";import{_ as pl,p as Ma,q as dl,h as gl,o as jt,c as Jt,j as ka,t as ml,e as Pa,F as yl,C as _l,G as xl,k as bl}from"./framework.nV65xIPO.js";function Qt(a){return a==null?0:a.length||1}function Oa(a){return a}var Sl=function(){function a(e,t,r,i,n,o){this._old=e,this._new=t,this._oldKeyGetter=r||Oa,this._newKeyGetter=i||Oa,this.context=n,this._diffModeMultiple=o==="multiple"}return a.prototype.add=function(e){return this._add=e,this},a.prototype.update=function(e){return this._update=e,this},a.prototype.updateManyToOne=function(e){return this._updateManyToOne=e,this},a.prototype.updateOneToMany=function(e){return this._updateOneToMany=e,this},a.prototype.updateManyToMany=function(e){return this._updateManyToMany=e,this},a.prototype.remove=function(e){return this._remove=e,this},a.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},a.prototype._executeOneToOne=function(){var e=this._old,t=this._new,r={},i=new Array(e.length),n=new Array(t.length);this._initIndexMap(e,null,i,"_oldKeyGetter"),this._initIndexMap(t,r,n,"_newKeyGetter");for(var o=0;o<e.length;o++){var s=i[o],l=r[s],u=Qt(l);if(u>1){var h=l.shift();l.length===1&&(r[s]=l[0]),this._update&&this._update(h,o)}else u===1?(r[s]=null,this._update&&this._update(l,o)):this._remove&&this._remove(o)}this._performRestAdd(n,r)},a.prototype._executeMultiple=function(){var e=this._old,t=this._new,r={},i={},n=[],o=[];this._initIndexMap(e,r,n,"_oldKeyGetter"),this._initIndexMap(t,i,o,"_newKeyGetter");for(var s=0;s<n.length;s++){var l=n[s],u=r[l],h=i[l],c=Qt(u),v=Qt(h);if(c>1&&v===1)this._updateManyToOne&&this._updateManyToOne(h,u),i[l]=null;else if(c===1&&v>1)this._updateOneToMany&&this._updateOneToMany(h,u),i[l]=null;else if(c===1&&v===1)this._update&&this._update(h,u),i[l]=null;else if(c>1&&v>1)this._updateManyToMany&&this._updateManyToMany(h,u),i[l]=null;else if(c>1)for(var f=0;f<c;f++)this._remove&&this._remove(u[f]);else this._remove&&this._remove(u)}this._performRestAdd(o,i)},a.prototype._performRestAdd=function(e,t){for(var r=0;r<e.length;r++){var i=e[r],n=t[i],o=Qt(n);if(o>1)for(var s=0;s<o;s++)this._add&&this._add(n[s]);else o===1&&this._add&&this._add(n);t[i]=null}},a.prototype._initIndexMap=function(e,t,r,i){for(var n=this._diffModeMultiple,o=0;o<e.length;o++){var s="_ec_"+this[i](e[o],o);if(n||(r[o]=s),!!t){var l=t[s],u=Qt(l);u===0?(t[s]=o,n&&r.push(s)):u===1?t[s]=[l,o]:l.push(o)}}},a}(),wl=function(){function a(e,t){this._encode=e,this._schema=t}return a.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},a.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},a}();function Al(a,e){var t={},r=t.encode={},i=et(),n=[],o=[],s={};T(a.dimensions,function(v){var f=a.getDimensionInfo(v),p=f.coordDim;if(p){var d=f.coordDimIndex;Qe(r,p)[d]=v,f.isExtraCoord||(i.set(p,1),Cl(f.type)&&(n[0]=v),Qe(s,p)[d]=a.getDimensionIndex(f.name)),f.defaultTooltip&&o.push(v)}Ki.each(function(m,g){var y=Qe(r,g),_=f.otherDims[g];_!=null&&_!==!1&&(y[_]=f.name)})});var l=[],u={};i.each(function(v,f){var p=r[f];u[f]=p[0],l=l.concat(p)}),t.dataDimsOnCoord=l,t.dataDimIndicesOnCoord=z(l,function(v){return a.getDimensionInfo(v).storeDimIndex}),t.encodeFirstDimNotExtra=u;var h=r.label;h&&h.length&&(n=h.slice());var c=r.tooltip;return c&&c.length?o=c.slice():o.length||(o=n.slice()),r.defaultedLabel=n,r.defaultedTooltip=o,t.userOutput=new wl(s,e),t}function Qe(a,e){return a.hasOwnProperty(e)||(a[e]=[]),a[e]}function Dl(a){return a==="category"?"ordinal":a==="time"?"time":"float"}function Cl(a){return!(a==="ordinal"||a==="time")}var Re=function(){function a(e){this.otherDims={},e!=null&&F(this,e)}return a}(),Ll=xt(),Il={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},In=function(){function a(e){this.dimensions=e.dimensions,this._dimOmitted=e.dimensionOmitted,this.source=e.source,this._fullDimCount=e.fullDimensionCount,this._updateDimOmitted(e.dimensionOmitted)}return a.prototype.isDimensionOmitted=function(){return this._dimOmitted},a.prototype._updateDimOmitted=function(e){this._dimOmitted=e,e&&(this._dimNameMap||(this._dimNameMap=kn(this.source)))},a.prototype.getSourceDimensionIndex=function(e){return it(this._dimNameMap.get(e),-1)},a.prototype.getSourceDimension=function(e){var t=this.source.dimensionsDefine;if(t)return t[e]},a.prototype.makeStoreSchema=function(){for(var e=this._fullDimCount,t=To(this.source),r=!Pn(e),i="",n=[],o=0,s=0;o<e;o++){var l=void 0,u=void 0,h=void 0,c=this.dimensions[s];if(c&&c.storeDimIndex===o)l=t?c.name:null,u=c.type,h=c.ordinalMeta,s++;else{var v=this.getSourceDimension(o);v&&(l=t?v.name:null,u=v.type)}n.push({property:l,type:u,ordinalMeta:h}),t&&l!=null&&(!c||!c.isCalculationCoord)&&(i+=r?l.replace(/\`/g,"`1").replace(/\$/g,"`2"):l),i+="$",i+=Il[u]||"f",h&&(i+=h.uid),i+="$"}var f=this.source,p=[f.seriesLayoutBy,f.startIndex,i].join("$$");return{dimensions:n,hash:p}},a.prototype.makeOutputDimensionNames=function(){for(var e=[],t=0,r=0;t<this._fullDimCount;t++){var i=void 0,n=this.dimensions[r];if(n&&n.storeDimIndex===t)n.isCalculationCoord||(i=n.name),r++;else{var o=this.getSourceDimension(t);o&&(i=o.name)}e.push(i)}return e},a.prototype.appendCalculationDimension=function(e){this.dimensions.push(e),e.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},a}();function Tn(a){return a instanceof In}function Mn(a){for(var e=et(),t=0;t<(a||[]).length;t++){var r=a[t],i=q(r)?r.name:r;i!=null&&e.get(i)==null&&e.set(i,t)}return e}function kn(a){var e=Ll(a);return e.dimNameMap||(e.dimNameMap=Mn(a.dimensionsDefine))}function Pn(a){return a>30}var te=q,bt=z,Tl=typeof Int32Array>"u"?Array:Int32Array,Ml="e\0\0",Ea=-1,kl=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],Pl=["_approximateExtent"],Ra,xe,ee,re,tr,ae,er,Ne=function(){function a(e,t){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","minmaxDownSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","minmaxDownSample","lttbDownSample"];var r,i=!1;Tn(e)?(r=e.dimensions,this._dimOmitted=e.isDimensionOmitted(),this._schema=e):(i=!0,r=e),r=r||["x","y"];for(var n={},o=[],s={},l=!1,u={},h=0;h<r.length;h++){var c=r[h],v=H(c)?new Re({name:c}):c instanceof Re?c:new Re(c),f=v.name;v.type=v.type||"float",v.coordDim||(v.coordDim=f,v.coordDimIndex=0);var p=v.otherDims=v.otherDims||{};o.push(f),n[f]=v,u[f]!=null&&(l=!0),v.createInvertedIndices&&(s[f]=[]),p.itemName===0&&(this._nameDimIdx=h),p.itemId===0&&(this._idDimIdx=h),i&&(v.storeDimIndex=h)}if(this.dimensions=o,this._dimInfos=n,this._initGetDimensionInfo(l),this.hostModel=t,this._invertedIndicesMap=s,this._dimOmitted){var d=this._dimIdxToName=et();T(o,function(m){d.set(n[m].storeDimIndex,m)})}}return a.prototype.getDimension=function(e){var t=this._recognizeDimIndex(e);if(t==null)return e;if(t=e,!this._dimOmitted)return this.dimensions[t];var r=this._dimIdxToName.get(t);if(r!=null)return r;var i=this._schema.getSourceDimension(t);if(i)return i.name},a.prototype.getDimensionIndex=function(e){var t=this._recognizeDimIndex(e);if(t!=null)return t;if(e==null)return-1;var r=this._getDimInfo(e);return r?r.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(e):-1},a.prototype._recognizeDimIndex=function(e){if(Ot(e)||e!=null&&!isNaN(e)&&!this._getDimInfo(e)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(e)<0))return+e},a.prototype._getStoreDimIndex=function(e){var t=this.getDimensionIndex(e);return t},a.prototype.getDimensionInfo=function(e){return this._getDimInfo(this.getDimension(e))},a.prototype._initGetDimensionInfo=function(e){var t=this._dimInfos;this._getDimInfo=e?function(r){return t.hasOwnProperty(r)?t[r]:void 0}:function(r){return t[r]}},a.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},a.prototype.mapDimension=function(e,t){var r=this._dimSummary;if(t==null)return r.encodeFirstDimNotExtra[e];var i=r.encode[e];return i?i[t]:null},a.prototype.mapDimensionsAll=function(e){var t=this._dimSummary,r=t.encode[e];return(r||[]).slice()},a.prototype.getStore=function(){return this._store},a.prototype.initData=function(e,t,r){var i=this,n;if(e instanceof ua&&(n=e),!n){var o=this.dimensions,s=qi(e)||Mo(e)?new ko(e,o.length):e;n=new ua;var l=bt(o,function(u){return{type:i._dimInfos[u].type,property:u}});n.initData(s,l,r)}this._store=n,this._nameList=(t||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,n.count()),this._dimSummary=Al(this,this._schema),this.userOutput=this._dimSummary.userOutput},a.prototype.appendData=function(e){var t=this._store.appendData(e);this._doInit(t[0],t[1])},a.prototype.appendValues=function(e,t){var r=this._store.appendValues(e,t&&t.length),i=r.start,n=r.end,o=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),t)for(var s=i;s<n;s++){var l=s-i;this._nameList[s]=t[l],o&&er(this,s)}},a.prototype._updateOrdinalMeta=function(){for(var e=this._store,t=this.dimensions,r=0;r<t.length;r++){var i=this._dimInfos[t[r]];i.ordinalMeta&&e.collectOrdinalMeta(i.storeDimIndex,i.ordinalMeta)}},a.prototype._shouldMakeIdFromName=function(){var e=this._store.getProvider();return this._idDimIdx==null&&e.getSource().sourceFormat!==Po&&!e.fillStorage},a.prototype._doInit=function(e,t){if(!(e>=t)){var r=this._store,i=r.getProvider();this._updateOrdinalMeta();var n=this._nameList,o=this._idList,s=i.getSource().sourceFormat,l=s===Yr;if(l&&!i.pure)for(var u=[],h=e;h<t;h++){var c=i.getItem(h,u);if(!this.hasItemOption&&Oo(c)&&(this.hasItemOption=!0),c){var v=c.name;n[h]==null&&v!=null&&(n[h]=je(v,null));var f=c.id;o[h]==null&&f!=null&&(o[h]=je(f,null))}}if(this._shouldMakeIdFromName())for(var h=e;h<t;h++)er(this,h);Ra(this)}},a.prototype.getApproximateExtent=function(e){return this._approximateExtent[e]||this._store.getDataExtent(this._getStoreDimIndex(e))},a.prototype.setApproximateExtent=function(e,t){t=this.getDimension(t),this._approximateExtent[t]=e.slice()},a.prototype.getCalculationInfo=function(e){return this._calculationInfo[e]},a.prototype.setCalculationInfo=function(e,t){te(e)?F(this._calculationInfo,e):this._calculationInfo[e]=t},a.prototype.getName=function(e){var t=this.getRawIndex(e),r=this._nameList[t];return r==null&&this._nameDimIdx!=null&&(r=ee(this,this._nameDimIdx,t)),r==null&&(r=""),r},a.prototype._getCategory=function(e,t){var r=this._store.get(e,t),i=this._store.getOrdinalMeta(e);return i?i.categories[r]:r},a.prototype.getId=function(e){return xe(this,this.getRawIndex(e))},a.prototype.count=function(){return this._store.count()},a.prototype.get=function(e,t){var r=this._store,i=this._dimInfos[e];if(i)return r.get(i.storeDimIndex,t)},a.prototype.getByRawIndex=function(e,t){var r=this._store,i=this._dimInfos[e];if(i)return r.getByRawIndex(i.storeDimIndex,t)},a.prototype.getIndices=function(){return this._store.getIndices()},a.prototype.getDataExtent=function(e){return this._store.getDataExtent(this._getStoreDimIndex(e))},a.prototype.getSum=function(e){return this._store.getSum(this._getStoreDimIndex(e))},a.prototype.getMedian=function(e){return this._store.getMedian(this._getStoreDimIndex(e))},a.prototype.getValues=function(e,t){var r=this,i=this._store;return G(e)?i.getValues(bt(e,function(n){return r._getStoreDimIndex(n)}),t):i.getValues(e)},a.prototype.hasValue=function(e){for(var t=this._dimSummary.dataDimIndicesOnCoord,r=0,i=t.length;r<i;r++)if(isNaN(this._store.get(t[r],e)))return!1;return!0},a.prototype.indexOfName=function(e){for(var t=0,r=this._store.count();t<r;t++)if(this.getName(t)===e)return t;return-1},a.prototype.getRawIndex=function(e){return this._store.getRawIndex(e)},a.prototype.indexOfRawIndex=function(e){return this._store.indexOfRawIndex(e)},a.prototype.rawIndexOf=function(e,t){var r=e&&this._invertedIndicesMap[e],i=r&&r[t];return i==null||isNaN(i)?Ea:i},a.prototype.indicesOfNearest=function(e,t,r){return this._store.indicesOfNearest(this._getStoreDimIndex(e),t,r)},a.prototype.each=function(e,t,r){X(e)&&(r=t,t=e,e=[]);var i=r||this,n=bt(re(e),this._getStoreDimIndex,this);this._store.each(n,i?j(t,i):t)},a.prototype.filterSelf=function(e,t,r){X(e)&&(r=t,t=e,e=[]);var i=r||this,n=bt(re(e),this._getStoreDimIndex,this);return this._store=this._store.filter(n,i?j(t,i):t),this},a.prototype.selectRange=function(e){var t=this,r={},i=We(e);return T(i,function(n){var o=t._getStoreDimIndex(n);r[o]=e[n]}),this._store=this._store.selectRange(r),this},a.prototype.mapArray=function(e,t,r){X(e)&&(r=t,t=e,e=[]),r=r||this;var i=[];return this.each(e,function(){i.push(t&&t.apply(this,arguments))},r),i},a.prototype.map=function(e,t,r,i){var n=r||i||this,o=bt(re(e),this._getStoreDimIndex,this),s=ae(this);return s._store=this._store.map(o,n?j(t,n):t),s},a.prototype.modify=function(e,t,r,i){var n=r||i||this,o=bt(re(e),this._getStoreDimIndex,this);this._store.modify(o,n?j(t,n):t)},a.prototype.downSample=function(e,t,r,i){var n=ae(this);return n._store=this._store.downSample(this._getStoreDimIndex(e),t,r,i),n},a.prototype.minmaxDownSample=function(e,t){var r=ae(this);return r._store=this._store.minmaxDownSample(this._getStoreDimIndex(e),t),r},a.prototype.lttbDownSample=function(e,t){var r=ae(this);return r._store=this._store.lttbDownSample(this._getStoreDimIndex(e),t),r},a.prototype.getRawDataItem=function(e){return this._store.getRawDataItem(e)},a.prototype.getItemModel=function(e){var t=this.hostModel,r=this.getRawDataItem(e);return new Ct(r,t,t&&t.ecModel)},a.prototype.diff=function(e){var t=this;return new Sl(e?e.getStore().getIndices():[],this.getStore().getIndices(),function(r){return xe(e,r)},function(r){return xe(t,r)})},a.prototype.getVisual=function(e){var t=this._visual;return t&&t[e]},a.prototype.setVisual=function(e,t){this._visual=this._visual||{},te(e)?F(this._visual,e):this._visual[e]=t},a.prototype.getItemVisual=function(e,t){var r=this._itemVisuals[e],i=r&&r[t];return i??this.getVisual(t)},a.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},a.prototype.ensureUniqueItemVisual=function(e,t){var r=this._itemVisuals,i=r[e];i||(i=r[e]={});var n=i[t];return n==null&&(n=this.getVisual(t),G(n)?n=n.slice():te(n)&&(n=F({},n)),i[t]=n),n},a.prototype.setItemVisual=function(e,t,r){var i=this._itemVisuals[e]||{};this._itemVisuals[e]=i,te(t)?F(i,t):i[t]=r},a.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},a.prototype.setLayout=function(e,t){te(e)?F(this._layout,e):this._layout[e]=t},a.prototype.getLayout=function(e){return this._layout[e]},a.prototype.getItemLayout=function(e){return this._itemLayouts[e]},a.prototype.setItemLayout=function(e,t,r){this._itemLayouts[e]=r?F(this._itemLayouts[e]||{},t):t},a.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},a.prototype.setItemGraphicEl=function(e,t){var r=this.hostModel&&this.hostModel.seriesIndex;Eo(r,this.dataType,e,t),this._graphicEls[e]=t},a.prototype.getItemGraphicEl=function(e){return this._graphicEls[e]},a.prototype.eachItemGraphicEl=function(e,t){T(this._graphicEls,function(r,i){r&&e&&e.call(t,r,i)})},a.prototype.cloneShallow=function(e){return e||(e=new a(this._schema?this._schema:bt(this.dimensions,this._getDimInfo,this),this.hostModel)),tr(e,this),e._store=this._store,e},a.prototype.wrapMethod=function(e,t){var r=this[e];X(r)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(e),this[e]=function(){var i=r.apply(this,arguments);return t.apply(this,[i].concat(Ro(arguments)))})},a.internalField=function(){Ra=function(e){var t=e._invertedIndicesMap;T(t,function(r,i){var n=e._dimInfos[i],o=n.ordinalMeta,s=e._store;if(o){r=t[i]=new Tl(o.categories.length);for(var l=0;l<r.length;l++)r[l]=Ea;for(var l=0;l<s.count();l++)r[s.get(n.storeDimIndex,l)]=l}})},ee=function(e,t,r){return je(e._getCategory(t,r),null)},xe=function(e,t){var r=e._idList[t];return r==null&&e._idDimIdx!=null&&(r=ee(e,e._idDimIdx,t)),r==null&&(r=Ml+t),r},re=function(e){return G(e)||(e=e!=null?[e]:[]),e},ae=function(e){var t=new a(e._schema?e._schema:bt(e.dimensions,e._getDimInfo,e),e.hostModel);return tr(t,e),t},tr=function(e,t){T(kl.concat(t.__wrappedMethods||[]),function(r){t.hasOwnProperty(r)&&(e[r]=t[r])}),e.__wrappedMethods=t.__wrappedMethods,T(Pl,function(r){e[r]=kt(t[r])}),e._calculationInfo=F({},t._calculationInfo)},er=function(e,t){var r=e._nameList,i=e._idList,n=e._nameDimIdx,o=e._idDimIdx,s=r[t],l=i[t];if(s==null&&n!=null&&(r[t]=s=ee(e,n,t)),l==null&&o!=null&&(i[t]=l=ee(e,o,t)),l==null&&s!=null){var u=e._nameRepeatCount,h=u[s]=(u[s]||0)+1;l=s,h>1&&(l+="__ec__"+h),i[t]=l}}}(),a}();function Ol(a,e){qi(a)||(a=No(a)),e=e||{};var t=e.coordDimensions||[],r=e.dimensionsDefine||a.dimensionsDefine||[],i=et(),n=[],o=Rl(a,t,r,e.dimensionsCount),s=e.canOmitUnusedDimensions&&Pn(o),l=r===a.dimensionsDefine,u=l?kn(a):Mn(r),h=e.encodeDefine;!h&&e.encodeDefaulter&&(h=e.encodeDefaulter(a,o));for(var c=et(h),v=new Bo(o),f=0;f<v.length;f++)v[f]=-1;function p(I){var C=v[I];if(C<0){var A=r[I],M=q(A)?A:{name:A},L=new Re,P=M.name;P!=null&&u.get(P)!=null&&(L.name=L.displayName=P),M.type!=null&&(L.type=M.type),M.displayName!=null&&(L.displayName=M.displayName);var k=n.length;return v[I]=k,L.storeDimIndex=I,n.push(L),L}return n[C]}if(!s)for(var f=0;f<o;f++)p(f);c.each(function(I,C){var A=ha(I).slice();if(A.length===1&&!H(A[0])&&A[0]<0){c.set(C,!1);return}var M=c.set(C,[]);T(A,function(L,P){var k=H(L)?u.get(L):L;k!=null&&k<o&&(M[P]=k,m(p(k),C,P))})});var d=0;T(t,function(I){var C,A,M,L;if(H(I))C=I,L={};else{L=I,C=L.name;var P=L.ordinalMeta;L.ordinalMeta=null,L=F({},L),L.ordinalMeta=P,A=L.dimsDef,M=L.otherDims,L.name=L.coordDim=L.coordDimIndex=L.dimsDef=L.otherDims=null}var k=c.get(C);if(k!==!1){if(k=ha(k),!k.length)for(var B=0;B<(A&&A.length||1);B++){for(;d<o&&p(d).coordDim!=null;)d++;d<o&&k.push(d++)}T(k,function(V,O){var E=p(V);if(l&&L.type!=null&&(E.type=L.type),m(Q(E,L),C,O),E.name==null&&A){var N=A[O];!q(N)&&(N={name:N}),E.name=E.displayName=N.name,E.defaultTooltip=N.defaultTooltip}M&&Q(E.otherDims,M)})}});function m(I,C,A){Ki.get(C)!=null?I.otherDims[C]=A:(I.coordDim=C,I.coordDimIndex=A,i.set(C,!0))}var g=e.generateCoord,y=e.generateCoordCount,_=y!=null;y=g?y||1:0;var x=g||"value";function b(I){I.name==null&&(I.name=I.coordDim)}if(s)T(n,function(I){b(I)}),n.sort(function(I,C){return I.storeDimIndex-C.storeDimIndex});else for(var w=0;w<o;w++){var S=p(w),D=S.coordDim;D==null&&(S.coordDim=Nl(x,i,_),S.coordDimIndex=0,(!g||y<=0)&&(S.isExtraCoord=!0),y--),b(S),S.type==null&&(Go(a,w)===zo.Must||S.isExtraCoord&&(S.otherDims.itemName!=null||S.otherDims.seriesName!=null))&&(S.type="ordinal")}return El(n),new In({source:a,dimensions:n,fullDimensionCount:o,dimensionOmitted:s})}function El(a){for(var e=et(),t=0;t<a.length;t++){var r=a[t],i=r.name,n=e.get(i)||0;n>0&&(r.name=i+(n-1)),n++,e.set(i,n)}}function Rl(a,e,t,r){var i=Math.max(a.dimensionsDetectedCount||1,e.length,t.length,r||0);return T(e,function(n){var o;q(n)&&(o=n.dimsDef)&&(i=Math.max(i,o.length))}),i}function Nl(a,e,t){if(t||e.hasKey(a)){for(var r=0;e.hasKey(a+r);)r++;a+=r}return e.set(a,!0),a}var Bl=function(){function a(e){this.coordSysDims=[],this.axisMap=et(),this.categoryAxisMap=et(),this.coordSysName=e}return a}();function Gl(a){var e=a.get("coordinateSystem"),t=new Bl(e),r=zl[e];if(r)return r(a,t,t.axisMap,t.categoryAxisMap),t}var zl={cartesian2d:function(a,e,t,r){var i=a.getReferringComponents("xAxis",Lt).models[0],n=a.getReferringComponents("yAxis",Lt).models[0];e.coordSysDims=["x","y"],t.set("x",i),t.set("y",n),Vt(i)&&(r.set("x",i),e.firstCategoryDimIndex=0),Vt(n)&&(r.set("y",n),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=1))},singleAxis:function(a,e,t,r){var i=a.getReferringComponents("singleAxis",Lt).models[0];e.coordSysDims=["single"],t.set("single",i),Vt(i)&&(r.set("single",i),e.firstCategoryDimIndex=0)},polar:function(a,e,t,r){var i=a.getReferringComponents("polar",Lt).models[0],n=i.findAxisModel("radiusAxis"),o=i.findAxisModel("angleAxis");e.coordSysDims=["radius","angle"],t.set("radius",n),t.set("angle",o),Vt(n)&&(r.set("radius",n),e.firstCategoryDimIndex=0),Vt(o)&&(r.set("angle",o),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=1))},geo:function(a,e,t,r){e.coordSysDims=["lng","lat"]},parallel:function(a,e,t,r){var i=a.ecModel,n=i.getComponent("parallel",a.get("parallelIndex")),o=e.coordSysDims=n.dimensions.slice();T(n.parallelAxisIndex,function(s,l){var u=i.getComponent("parallelAxis",s),h=o[l];t.set(h,u),Vt(u)&&(r.set(h,u),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=l))})}};function Vt(a){return a.get("type")==="category"}function Vl(a,e,t){t=t||{};var r=t.byIndex,i=t.stackedCoordDimension,n,o,s;Fl(e)?n=e:(o=e.schema,n=o.dimensions,s=e.store);var l=!!(a&&a.get("stack")),u,h,c,v;if(T(n,function(y,_){H(y)&&(n[_]=y={name:y}),l&&!y.isExtraCoord&&(!r&&!u&&y.ordinalMeta&&(u=y),!h&&y.type!=="ordinal"&&y.type!=="time"&&(!i||i===y.coordDim)&&(h=y))}),h&&!r&&!u&&(r=!0),h){c="__\0ecstackresult_"+a.id,v="__\0ecstackedover_"+a.id,u&&(u.createInvertedIndices=!0);var f=h.coordDim,p=h.type,d=0;T(n,function(y){y.coordDim===f&&d++});var m={name:c,coordDim:f,coordDimIndex:d,type:p,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:n.length},g={name:v,coordDim:v,coordDimIndex:d+1,type:p,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:n.length+1};o?(s&&(m.storeDimIndex=s.ensureCalculationDimension(v,p),g.storeDimIndex=s.ensureCalculationDimension(c,p)),o.appendCalculationDimension(m),o.appendCalculationDimension(g)):(n.push(m),n.push(g))}return{stackedDimension:h&&h.name,stackedByDimension:u&&u.name,isStackedByIndex:r,stackedOverDimension:v,stackResultDimension:c}}function Fl(a){return!Tn(a.schema)}function zt(a,e){return!!e&&e===a.getCalculationInfo("stackedDimension")}function On(a,e){return zt(a,e)?a.getCalculationInfo("stackResultDimension"):e}function Hl(a,e){var t=a.get("coordinateSystem"),r=Ho.get(t),i;return e&&e.coordSysDims&&(i=z(e.coordSysDims,function(n){var o={name:n},s=e.axisMap.get(n);if(s){var l=s.get("type");o.type=Dl(l)}return o})),i||(i=r&&(r.getDimensionsInfo?r.getDimensionsInfo():r.dimensions.slice())||["x","y"]),i}function Wl(a,e,t){var r,i;return t&&T(a,function(n,o){var s=n.coordDim,l=t.categoryAxisMap.get(s);l&&(r==null&&(r=o),n.ordinalMeta=l.getOrdinalMeta(),e&&(n.createInvertedIndices=!0)),n.otherDims.itemName!=null&&(i=!0)}),!i&&r!=null&&(a[r].otherDims.itemName=0),r}function jr(a,e,t){t=t||{};var r=e.getSourceManager(),i,n=!1;i=r.getSource(),n=i.sourceFormat===Yr;var o=Gl(e),s=Hl(e,o),l=t.useEncodeDefaulter,u=X(l)?l:l?U(Vo,s,e):null,h={coordDimensions:s,generateCoord:t.generateCoord,encodeDefine:e.getEncode(),encodeDefaulter:u,canOmitUnusedDimensions:!n},c=Ol(i,h),v=Wl(c.dimensions,t.createInvertedIndices,o),f=n?null:r.getSharedDataStore(c),p=Vl(e,{schema:c,store:f}),d=new Ne(c,e);d.setCalculationInfo(p);var m=v!=null&&Xl(i)?function(g,y,_,x){return x===v?_:this.defaultDimValueGetter(g,y,_,x)}:null;return d.hasItemOption=!1,d.initData(n?i:f,null,m),d}function Xl(a){if(a.sourceFormat===Yr){var e=Yl(a.data||[]);return!G(Fo(e))}}function Yl(a){for(var e=0;e<a.length&&a[e]==null;)e++;return a[e]}var pt=function(){function a(e){this._setting=e||{},this._extent=[1/0,-1/0]}return a.prototype.getSetting=function(e){return this._setting[e]},a.prototype.unionExtent=function(e){var t=this._extent;e[0]<t[0]&&(t[0]=e[0]),e[1]>t[1]&&(t[1]=e[1])},a.prototype.unionExtentFromData=function(e,t){this.unionExtent(e.getApproximateExtent(t))},a.prototype.getExtent=function(){return this._extent.slice()},a.prototype.setExtent=function(e,t){var r=this._extent;isNaN(e)||(r[0]=e),isNaN(t)||(r[1]=t)},a.prototype.isInExtentRange=function(e){return this._extent[0]<=e&&this._extent[1]>=e},a.prototype.isBlank=function(){return this._isBlank},a.prototype.setBlank=function(e){this._isBlank=e},a}();Wo(pt);var Ul=0,Mr=function(){function a(e){this.categories=e.categories||[],this._needCollect=e.needCollect,this._deduplication=e.deduplication,this.uid=++Ul}return a.createByAxisModel=function(e){var t=e.option,r=t.data,i=r&&z(r,Zl);return new a({categories:i,needCollect:!i,deduplication:t.dedplication!==!1})},a.prototype.getOrdinal=function(e){return this._getOrCreateMap().get(e)},a.prototype.parseAndCollect=function(e){var t,r=this._needCollect;if(!H(e)&&!r)return e;if(r&&!this._deduplication)return t=this.categories.length,this.categories[t]=e,t;var i=this._getOrCreateMap();return t=i.get(e),t==null&&(r?(t=this.categories.length,this.categories[t]=e,i.set(e,t)):t=NaN),t},a.prototype._getOrCreateMap=function(){return this._map||(this._map=et(this.categories))},a}();function Zl(a){return q(a)&&a.value!=null?a.value:a+""}function kr(a){return a.type==="interval"||a.type==="log"}function $l(a,e,t,r){var i={},n=a[1]-a[0],o=i.interval=ji(n/e);t!=null&&o<t&&(o=i.interval=t),r!=null&&o>r&&(o=i.interval=r);var s=i.intervalPrecision=En(o),l=i.niceTickExtent=[Z(Math.ceil(a[0]/o)*o,s),Z(Math.floor(a[1]/o)*o,s)];return Kl(l,a),i}function rr(a){var e=Math.pow(10,Xo(a)),t=a/e;return t?t===2?t=3:t===3?t=5:t*=2:t=1,Z(t*e)}function En(a){return Xe(a)+2}function Na(a,e,t){a[e]=Math.max(Math.min(a[e],t[1]),t[0])}function Kl(a,e){!isFinite(a[0])&&(a[0]=e[0]),!isFinite(a[1])&&(a[1]=e[1]),Na(a,0,e),Na(a,1,e),a[0]>a[1]&&(a[0]=a[1])}function Ue(a,e){return a>=e[0]&&a<=e[1]}function Ze(a,e){return e[1]===e[0]?.5:(a-e[0])/(e[1]-e[0])}function $e(a,e){return a*(e[1]-e[0])+e[0]}var Jr=function(a){R(e,a);function e(t){var r=a.call(this,t)||this;r.type="ordinal";var i=r.getSetting("ordinalMeta");return i||(i=new Mr({})),G(i)&&(i=new Mr({categories:z(i,function(n){return q(n)?n.value:n})})),r._ordinalMeta=i,r._extent=r.getSetting("extent")||[0,i.categories.length-1],r}return e.prototype.parse=function(t){return t==null?NaN:H(t)?this._ordinalMeta.getOrdinal(t):Math.round(t)},e.prototype.contain=function(t){return t=this.parse(t),Ue(t,this._extent)&&this._ordinalMeta.categories[t]!=null},e.prototype.normalize=function(t){return t=this._getTickNumber(this.parse(t)),Ze(t,this._extent)},e.prototype.scale=function(t){return t=Math.round($e(t,this._extent)),this.getRawOrdinalNumber(t)},e.prototype.getTicks=function(){for(var t=[],r=this._extent,i=r[0];i<=r[1];)t.push({value:i}),i++;return t},e.prototype.getMinorTicks=function(t){},e.prototype.setSortInfo=function(t){if(t==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var r=t.ordinalNumbers,i=this._ordinalNumbersByTick=[],n=this._ticksByOrdinalNumber=[],o=0,s=this._ordinalMeta.categories.length,l=Math.min(s,r.length);o<l;++o){var u=r[o];i[o]=u,n[u]=o}for(var h=0;o<s;++o){for(;n[h]!=null;)h++;i.push(h),n[h]=o}},e.prototype._getTickNumber=function(t){var r=this._ticksByOrdinalNumber;return r&&t>=0&&t<r.length?r[t]:t},e.prototype.getRawOrdinalNumber=function(t){var r=this._ordinalNumbersByTick;return r&&t>=0&&t<r.length?r[t]:t},e.prototype.getLabel=function(t){if(!this.isBlank()){var r=this.getRawOrdinalNumber(t.value),i=this._ordinalMeta.categories[r];return i==null?"":i+""}},e.prototype.count=function(){return this._extent[1]-this._extent[0]+1},e.prototype.unionExtentFromData=function(t,r){this.unionExtent(t.getApproximateExtent(r))},e.prototype.isInExtentRange=function(t){return t=this._getTickNumber(t),this._extent[0]<=t&&this._extent[1]>=t},e.prototype.getOrdinalMeta=function(){return this._ordinalMeta},e.prototype.calcNiceTicks=function(){},e.prototype.calcNiceExtent=function(){},e.type="ordinal",e}(pt);pt.registerClass(Jr);var Et=Z,Kt=function(a){R(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="interval",t._interval=0,t._intervalPrecision=2,t}return e.prototype.parse=function(t){return t},e.prototype.contain=function(t){return Ue(t,this._extent)},e.prototype.normalize=function(t){return Ze(t,this._extent)},e.prototype.scale=function(t){return $e(t,this._extent)},e.prototype.setExtent=function(t,r){var i=this._extent;isNaN(t)||(i[0]=parseFloat(t)),isNaN(r)||(i[1]=parseFloat(r))},e.prototype.unionExtent=function(t){var r=this._extent;t[0]<r[0]&&(r[0]=t[0]),t[1]>r[1]&&(r[1]=t[1]),this.setExtent(r[0],r[1])},e.prototype.getInterval=function(){return this._interval},e.prototype.setInterval=function(t){this._interval=t,this._niceExtent=this._extent.slice(),this._intervalPrecision=En(t)},e.prototype.getTicks=function(t){var r=this._interval,i=this._extent,n=this._niceExtent,o=this._intervalPrecision,s=[];if(!r)return s;var l=1e4;i[0]<n[0]&&(t?s.push({value:Et(n[0]-r,o)}):s.push({value:i[0]}));for(var u=n[0];u<=n[1]&&(s.push({value:u}),u=Et(u+r,o),u!==s[s.length-1].value);)if(s.length>l)return[];var h=s.length?s[s.length-1].value:n[1];return i[1]>h&&(t?s.push({value:Et(h+r,o)}):s.push({value:i[1]})),s},e.prototype.getMinorTicks=function(t){for(var r=this.getTicks(!0),i=[],n=this.getExtent(),o=1;o<r.length;o++){for(var s=r[o],l=r[o-1],u=0,h=[],c=s.value-l.value,v=c/t;u<t-1;){var f=Et(l.value+(u+1)*v);f>n[0]&&f<n[1]&&h.push(f),u++}i.push(h)}return i},e.prototype.getLabel=function(t,r){if(t==null)return"";var i=r&&r.precision;i==null?i=Xe(t.value)||0:i==="auto"&&(i=this._intervalPrecision);var n=Et(t.value,i,!0);return Yo(n)},e.prototype.calcNiceTicks=function(t,r,i){t=t||5;var n=this._extent,o=n[1]-n[0];if(isFinite(o)){o<0&&(o=-o,n.reverse());var s=$l(n,t,r,i);this._intervalPrecision=s.intervalPrecision,this._interval=s.interval,this._niceExtent=s.niceTickExtent}},e.prototype.calcNiceExtent=function(t){var r=this._extent;if(r[0]===r[1])if(r[0]!==0){var i=Math.abs(r[0]);t.fixMax||(r[1]+=i/2),r[0]-=i/2}else r[1]=1;var n=r[1]-r[0];isFinite(n)||(r[0]=0,r[1]=1),this.calcNiceTicks(t.splitNumber,t.minInterval,t.maxInterval);var o=this._interval;t.fixMin||(r[0]=Et(Math.floor(r[0]/o)*o)),t.fixMax||(r[1]=Et(Math.ceil(r[1]/o)*o))},e.prototype.setNiceExtent=function(t,r){this._niceExtent=[t,r]},e.type="interval",e}(pt);pt.registerClass(Kt);var Rn=typeof Float32Array<"u",ql=Rn?Float32Array:Array;function dt(a){return G(a)?Rn?new Float32Array(a):a:new ql(a)}var jl="__ec_stack_";function Nn(a){return a.get("stack")||jl+a.seriesIndex}function Qr(a){return a.dim+a.index}function Bn(a,e){var t=[];return e.eachSeriesByType(a,function(r){zn(r)&&t.push(r)}),t}function Jl(a){var e={};T(a,function(l){var u=l.coordinateSystem,h=u.getBaseAxis();if(!(h.type!=="time"&&h.type!=="value"))for(var c=l.getData(),v=h.dim+"_"+h.index,f=c.getDimensionIndex(c.mapDimension(h.dim)),p=c.getStore(),d=0,m=p.count();d<m;++d){var g=p.get(f,d);e[v]?e[v].push(g):e[v]=[g]}});var t={};for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];if(i){i.sort(function(l,u){return l-u});for(var n=null,o=1;o<i.length;++o){var s=i[o]-i[o-1];s>0&&(n=n===null?s:Math.min(n,s))}t[r]=n}}return t}function Gn(a){var e=Jl(a),t=[];return T(a,function(r){var i=r.coordinateSystem,n=i.getBaseAxis(),o=n.getExtent(),s;if(n.type==="category")s=n.getBandWidth();else if(n.type==="value"||n.type==="time"){var l=n.dim+"_"+n.index,u=e[l],h=Math.abs(o[1]-o[0]),c=n.scale.getExtent(),v=Math.abs(c[1]-c[0]);s=u?h/v*u:h}else{var f=r.getData();s=Math.abs(o[1]-o[0])/f.count()}var p=mt(r.get("barWidth"),s),d=mt(r.get("barMaxWidth"),s),m=mt(r.get("barMinWidth")||(Vn(r)?.5:1),s),g=r.get("barGap"),y=r.get("barCategoryGap");t.push({bandWidth:s,barWidth:p,barMaxWidth:d,barMinWidth:m,barGap:g,barCategoryGap:y,axisKey:Qr(n),stackId:Nn(r)})}),Ql(t)}function Ql(a){var e={};T(a,function(r,i){var n=r.axisKey,o=r.bandWidth,s=e[n]||{bandWidth:o,remainedWidth:o,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},l=s.stacks;e[n]=s;var u=r.stackId;l[u]||s.autoWidthCount++,l[u]=l[u]||{width:0,maxWidth:0};var h=r.barWidth;h&&!l[u].width&&(l[u].width=h,h=Math.min(s.remainedWidth,h),s.remainedWidth-=h);var c=r.barMaxWidth;c&&(l[u].maxWidth=c);var v=r.barMinWidth;v&&(l[u].minWidth=v);var f=r.barGap;f!=null&&(s.gap=f);var p=r.barCategoryGap;p!=null&&(s.categoryGap=p)});var t={};return T(e,function(r,i){t[i]={};var n=r.stacks,o=r.bandWidth,s=r.categoryGap;if(s==null){var l=We(n).length;s=Math.max(35-l*4,15)+"%"}var u=mt(s,o),h=mt(r.gap,1),c=r.remainedWidth,v=r.autoWidthCount,f=(c-u)/(v+(v-1)*h);f=Math.max(f,0),T(n,function(g){var y=g.maxWidth,_=g.minWidth;if(g.width){var x=g.width;y&&(x=Math.min(x,y)),_&&(x=Math.max(x,_)),g.width=x,c-=x+h*x,v--}else{var x=f;y&&y<x&&(x=Math.min(y,c)),_&&_>x&&(x=_),x!==f&&(g.width=x,c-=x+h*x,v--)}}),f=(c-u)/(v+(v-1)*h),f=Math.max(f,0);var p=0,d;T(n,function(g,y){g.width||(g.width=f),d=g,p+=g.width*(1+h)}),d&&(p-=d.width*h);var m=-p/2;T(n,function(g,y){t[i][y]=t[i][y]||{bandWidth:o,offset:m,width:g.width},m+=g.width*(1+h)})}),t}function tu(a,e,t){if(a&&e){var r=a[Qr(e)];return r}}function eu(a,e){var t=Bn(a,e),r=Gn(t);T(t,function(i){var n=i.getData(),o=i.coordinateSystem,s=o.getBaseAxis(),l=Nn(i),u=r[Qr(s)][l],h=u.offset,c=u.width;n.setLayout({bandWidth:u.bandWidth,offset:h,size:c})})}function ru(a){return{seriesType:a,plan:Ji(),reset:function(e){if(zn(e)){var t=e.getData(),r=e.coordinateSystem,i=r.getBaseAxis(),n=r.getOtherAxis(i),o=t.getDimensionIndex(t.mapDimension(n.dim)),s=t.getDimensionIndex(t.mapDimension(i.dim)),l=e.get("showBackground",!0),u=t.mapDimension(n.dim),h=t.getCalculationInfo("stackResultDimension"),c=zt(t,u)&&!!t.getCalculationInfo("stackedOnSeries"),v=n.isHorizontal(),f=au(i,n),p=Vn(e),d=e.get("barMinHeight")||0,m=h&&t.getDimensionIndex(h),g=t.getLayout("size"),y=t.getLayout("offset");return{progress:function(_,x){for(var b=_.count,w=p&&dt(b*3),S=p&&l&&dt(b*3),D=p&&dt(b),I=r.master.getRect(),C=v?I.width:I.height,A,M=x.getStore(),L=0;(A=_.next())!=null;){var P=M.get(c?m:o,A),k=M.get(s,A),B=f,V=void 0;c&&(V=+P-M.get(o,A));var O=void 0,E=void 0,N=void 0,W=void 0;if(v){var ot=r.dataToPoint([P,k]);if(c){var $=r.dataToPoint([V,k]);B=$[0]}O=B,E=ot[1]+y,N=ot[0]-B,W=g,Math.abs(N)<d&&(N=(N<0?-1:1)*d)}else{var ot=r.dataToPoint([k,P]);if(c){var $=r.dataToPoint([k,V]);B=$[1]}O=ot[0]+y,E=B,N=g,W=ot[1]-B,Math.abs(W)<d&&(W=(W<=0?-1:1)*d)}p?(w[L]=O,w[L+1]=E,w[L+2]=v?N:W,S&&(S[L]=v?I.x:O,S[L+1]=v?E:I.y,S[L+2]=C),D[A]=A):x.setItemLayout(A,{x:O,y:E,width:N,height:W}),L+=3}p&&x.setLayout({largePoints:w,largeDataIndices:D,largeBackgroundPoints:S,valueAxisHorizontal:v})}}}}}}function zn(a){return a.coordinateSystem&&a.coordinateSystem.type==="cartesian2d"}function Vn(a){return a.pipelineContext&&a.pipelineContext.large}function au(a,e){var t=e.model.get("startValue");return t||(t=0),e.toGlobalCoord(e.dataToCoord(e.type==="log"?t>0?t:1:t))}var iu=function(a,e,t,r){for(;t<r;){var i=t+r>>>1;a[i][1]<e?t=i+1:r=i}return t},Fn=function(a){R(e,a);function e(t){var r=a.call(this,t)||this;return r.type="time",r}return e.prototype.getLabel=function(t){var r=this.getSetting("useUTC");return Qi(t.value,ca[Uo(oe(this._minLevelUnit))]||ca.second,r,this.getSetting("locale"))},e.prototype.getFormattedLabel=function(t,r,i){var n=this.getSetting("useUTC"),o=this.getSetting("locale");return Zo(t,r,i,o,n)},e.prototype.getTicks=function(){var t=this._interval,r=this._extent,i=[];if(!t)return i;i.push({value:r[0],level:0});var n=this.getSetting("useUTC"),o=cu(this._minLevelUnit,this._approxInterval,n,r);return i=i.concat(o),i.push({value:r[1],level:0}),i},e.prototype.calcNiceExtent=function(t){var r=this._extent;if(r[0]===r[1]&&(r[0]-=ut,r[1]+=ut),r[1]===-1/0&&r[0]===1/0){var i=new Date;r[1]=+new Date(i.getFullYear(),i.getMonth(),i.getDate()),r[0]=r[1]-ut}this.calcNiceTicks(t.splitNumber,t.minInterval,t.maxInterval)},e.prototype.calcNiceTicks=function(t,r,i){t=t||10;var n=this._extent,o=n[1]-n[0];this._approxInterval=o/t,r!=null&&this._approxInterval<r&&(this._approxInterval=r),i!=null&&this._approxInterval>i&&(this._approxInterval=i);var s=be.length,l=Math.min(iu(be,this._approxInterval,0,s),s-1);this._interval=be[l][1],this._minLevelUnit=be[Math.max(l-1,0)][0]},e.prototype.parse=function(t){return Ot(t)?t:+Sr(t)},e.prototype.contain=function(t){return Ue(this.parse(t),this._extent)},e.prototype.normalize=function(t){return Ze(this.parse(t),this._extent)},e.prototype.scale=function(t){return $e(t,this._extent)},e.type="time",e}(Kt),be=[["second",tn],["minute",en],["hour",Ee],["quarter-day",Ee*6],["half-day",Ee*12],["day",ut*1.2],["half-week",ut*3.5],["week",ut*7],["month",ut*31],["quarter",ut*95],["half-year",va/2],["year",va]];function nu(a,e,t,r){var i=Sr(e),n=Sr(t),o=function(p){return fa(i,p,r)===fa(n,p,r)},s=function(){return o("year")},l=function(){return s()&&o("month")},u=function(){return l()&&o("day")},h=function(){return u()&&o("hour")},c=function(){return h()&&o("minute")},v=function(){return c()&&o("second")},f=function(){return v()&&o("millisecond")};switch(a){case"year":return s();case"month":return l();case"day":return u();case"hour":return h();case"minute":return c();case"second":return v();case"millisecond":return f()}}function ou(a,e){return a/=ut,a>16?16:a>7.5?7:a>3.5?4:a>1.5?2:1}function su(a){var e=30*ut;return a/=e,a>6?6:a>3?3:a>2?2:1}function lu(a){return a/=Ee,a>12?12:a>6?6:a>3.5?4:a>2?2:1}function Ba(a,e){return a/=e?en:tn,a>30?30:a>20?20:a>15?15:a>10?10:a>5?5:a>2?2:1}function uu(a){return ji(a)}function hu(a,e,t){var r=new Date(a);switch(oe(e)){case"year":case"month":r[ln(t)](0);case"day":r[sn(t)](1);case"hour":r[on(t)](0);case"minute":r[nn(t)](0);case"second":r[rn(t)](0),r[an(t)](0)}return r.getTime()}function cu(a,e,t,r){var i=1e4,n=Ko,o=0;function s(C,A,M,L,P,k,B){for(var V=new Date(A),O=A,E=V[L]();O<M&&O<=r[1];)B.push({value:O}),E+=C,V[P](E),O=V.getTime();B.push({value:O,notAdd:!0})}function l(C,A,M){var L=[],P=!A.length;if(!nu(oe(C),r[0],r[1],t)){P&&(A=[{value:hu(new Date(r[0]),C,t)},{value:r[1]}]);for(var k=0;k<A.length-1;k++){var B=A[k].value,V=A[k+1].value;if(B!==V){var O=void 0,E=void 0,N=void 0,W=!1;switch(C){case"year":O=Math.max(1,Math.round(e/ut/365)),E=rs(t),N=as(t);break;case"half-year":case"quarter":case"month":O=su(e),E=es(t),N=ln(t);break;case"week":case"half-week":case"day":O=ou(e),E=ts(t),N=sn(t),W=!0;break;case"half-day":case"quarter-day":case"hour":O=lu(e),E=Qo(t),N=on(t);break;case"minute":O=Ba(e,!0),E=Jo(t),N=nn(t);break;case"second":O=Ba(e,!1),E=jo(t),N=rn(t);break;case"millisecond":O=uu(e),E=qo(t),N=an(t);break}s(O,B,V,E,N,W,L),C==="year"&&M.length>1&&k===0&&M.unshift({value:M[0].value-O})}}for(var k=0;k<L.length;k++)M.push(L[k]);return L}}for(var u=[],h=[],c=0,v=0,f=0;f<n.length&&o++<i;++f){var p=oe(n[f]);if($o(n[f])){l(n[f],u[u.length-1]||[],h);var d=n[f+1]?oe(n[f+1]):null;if(p!==d){if(h.length){v=c,h.sort(function(C,A){return C.value-A.value});for(var m=[],g=0;g<h.length;++g){var y=h[g].value;(g===0||h[g-1].value!==y)&&(m.push(h[g]),y>=r[0]&&y<=r[1]&&c++)}var _=(r[1]-r[0])/e;if(c>_*1.5&&v>_/1.5||(u.push(m),c>_||a===n[f]))break}h=[]}}}for(var x=Gt(z(u,function(C){return Gt(C,function(A){return A.value>=r[0]&&A.value<=r[1]&&!A.notAdd})}),function(C){return C.length>0}),b=[],w=x.length-1,f=0;f<x.length;++f)for(var S=x[f],D=0;D<S.length;++D)b.push({value:S[D].value,level:w-f});b.sort(function(C,A){return C.value-A.value});for(var I=[],f=0;f<b.length;++f)(f===0||b[f].value!==b[f-1].value)&&I.push(b[f]);return I}pt.registerClass(Fn);var Ga=pt.prototype,le=Kt.prototype,vu=Z,fu=Math.floor,pu=Math.ceil,Se=Math.pow,lt=Math.log,ta=function(a){R(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="log",t.base=10,t._originalScale=new Kt,t._interval=0,t}return e.prototype.getTicks=function(t){var r=this._originalScale,i=this._extent,n=r.getExtent(),o=le.getTicks.call(this,t);return z(o,function(s){var l=s.value,u=Z(Se(this.base,l));return u=l===i[0]&&this._fixMin?we(u,n[0]):u,u=l===i[1]&&this._fixMax?we(u,n[1]):u,{value:u}},this)},e.prototype.setExtent=function(t,r){var i=lt(this.base);t=lt(Math.max(0,t))/i,r=lt(Math.max(0,r))/i,le.setExtent.call(this,t,r)},e.prototype.getExtent=function(){var t=this.base,r=Ga.getExtent.call(this);r[0]=Se(t,r[0]),r[1]=Se(t,r[1]);var i=this._originalScale,n=i.getExtent();return this._fixMin&&(r[0]=we(r[0],n[0])),this._fixMax&&(r[1]=we(r[1],n[1])),r},e.prototype.unionExtent=function(t){this._originalScale.unionExtent(t);var r=this.base;t[0]=lt(t[0])/lt(r),t[1]=lt(t[1])/lt(r),Ga.unionExtent.call(this,t)},e.prototype.unionExtentFromData=function(t,r){this.unionExtent(t.getApproximateExtent(r))},e.prototype.calcNiceTicks=function(t){t=t||10;var r=this._extent,i=r[1]-r[0];if(!(i===1/0||i<=0)){var n=is(i),o=t/i*n;for(o<=.5&&(n*=10);!isNaN(n)&&Math.abs(n)<1&&Math.abs(n)>0;)n*=10;var s=[Z(pu(r[0]/n)*n),Z(fu(r[1]/n)*n)];this._interval=n,this._niceExtent=s}},e.prototype.calcNiceExtent=function(t){le.calcNiceExtent.call(this,t),this._fixMin=t.fixMin,this._fixMax=t.fixMax},e.prototype.parse=function(t){return t},e.prototype.contain=function(t){return t=lt(t)/lt(this.base),Ue(t,this._extent)},e.prototype.normalize=function(t){return t=lt(t)/lt(this.base),Ze(t,this._extent)},e.prototype.scale=function(t){return t=$e(t,this._extent),Se(this.base,t)},e.type="log",e}(pt),Hn=ta.prototype;Hn.getMinorTicks=le.getMinorTicks;Hn.getLabel=le.getLabel;function we(a,e){return vu(a,Xe(e))}pt.registerClass(ta);var du=function(){function a(e,t,r){this._prepareParams(e,t,r)}return a.prototype._prepareParams=function(e,t,r){r[1]<r[0]&&(r=[NaN,NaN]),this._dataMin=r[0],this._dataMax=r[1];var i=this._isOrdinal=e.type==="ordinal";this._needCrossZero=e.type==="interval"&&t.getNeedCrossZero&&t.getNeedCrossZero();var n=t.get("min",!0);n==null&&(n=t.get("startValue",!0));var o=this._modelMinRaw=n;X(o)?this._modelMinNum=Ae(e,o({min:r[0],max:r[1]})):o!=="dataMin"&&(this._modelMinNum=Ae(e,o));var s=this._modelMaxRaw=t.get("max",!0);if(X(s)?this._modelMaxNum=Ae(e,s({min:r[0],max:r[1]})):s!=="dataMax"&&(this._modelMaxNum=Ae(e,s)),i)this._axisDataLen=t.getCategories().length;else{var l=t.get("boundaryGap"),u=G(l)?l:[l||0,l||0];typeof u[0]=="boolean"||typeof u[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[wr(u[0],1),wr(u[1],1)]}},a.prototype.calculate=function(){var e=this._isOrdinal,t=this._dataMin,r=this._dataMax,i=this._axisDataLen,n=this._boundaryGapInner,o=e?null:r-t||Math.abs(t),s=this._modelMinRaw==="dataMin"?t:this._modelMinNum,l=this._modelMaxRaw==="dataMax"?r:this._modelMaxNum,u=s!=null,h=l!=null;s==null&&(s=e?i?0:NaN:t-n[0]*o),l==null&&(l=e?i?i-1:NaN:r+n[1]*o),(s==null||!isFinite(s))&&(s=NaN),(l==null||!isFinite(l))&&(l=NaN);var c=Ar(s)||Ar(l)||e&&!i;this._needCrossZero&&(s>0&&l>0&&!u&&(s=0),s<0&&l<0&&!h&&(l=0));var v=this._determinedMin,f=this._determinedMax;return v!=null&&(s=v,u=!0),f!=null&&(l=f,h=!0),{min:s,max:l,minFixed:u,maxFixed:h,isBlank:c}},a.prototype.modifyDataMinMax=function(e,t){this[mu[e]]=t},a.prototype.setDeterminedMinMax=function(e,t){var r=gu[e];this[r]=t},a.prototype.freeze=function(){this.frozen=!0},a}(),gu={min:"_determinedMin",max:"_determinedMax"},mu={min:"_dataMin",max:"_dataMax"};function yu(a,e,t){var r=a.rawExtentInfo;return r||(r=new du(a,e,t),a.rawExtentInfo=r,r)}function Ae(a,e){return e==null?null:Ar(e)?NaN:a.parse(e)}function Wn(a,e){var t=a.type,r=yu(a,e,a.getExtent()).calculate();a.setBlank(r.isBlank);var i=r.min,n=r.max,o=e.ecModel;if(o&&t==="time"){var s=Bn("bar",o),l=!1;if(T(s,function(c){l=l||c.getBaseAxis()===e.axis}),l){var u=Gn(s),h=_u(i,n,e,u);i=h.min,n=h.max}}return{extent:[i,n],fixMin:r.minFixed,fixMax:r.maxFixed}}function _u(a,e,t,r){var i=t.axis.getExtent(),n=Math.abs(i[1]-i[0]),o=tu(r,t.axis);if(o===void 0)return{min:a,max:e};var s=1/0;T(o,function(f){s=Math.min(f.offset,s)});var l=-1/0;T(o,function(f){l=Math.max(f.offset+f.width,l)}),s=Math.abs(s),l=Math.abs(l);var u=s+l,h=e-a,c=1-(s+l)/n,v=h/c-h;return e+=v*(l/u),a-=v*(s/u),{min:a,max:e}}function za(a,e){var t=e,r=Wn(a,t),i=r.extent,n=t.get("splitNumber");a instanceof ta&&(a.base=t.get("logBase"));var o=a.type,s=t.get("interval"),l=o==="interval"||o==="time";a.setExtent(i[0],i[1]),a.calcNiceExtent({splitNumber:n,fixMin:r.fixMin,fixMax:r.fixMax,minInterval:l?t.get("minInterval"):null,maxInterval:l?t.get("maxInterval"):null}),s!=null&&a.setInterval&&a.setInterval(s)}function xu(a,e){if(e=e||a.get("type"),e)switch(e){case"category":return new Jr({ordinalMeta:a.getOrdinalMeta?a.getOrdinalMeta():a.getCategories(),extent:[1/0,-1/0]});case"time":return new Fn({locale:a.ecModel.getLocaleModel(),useUTC:a.ecModel.get("useUTC")});default:return new(pt.getClass(e)||Kt)}}function bu(a){var e=a.scale.getExtent(),t=e[0],r=e[1];return!(t>0&&r>0||t<0&&r<0)}function qt(a){var e=a.getLabelModel().get("formatter"),t=a.type==="category"?a.scale.getExtent()[0]:null;return a.scale.type==="time"?function(r){return function(i,n){return a.scale.getFormattedLabel(i,n,r)}}(e):H(e)?function(r){return function(i){var n=a.scale.getLabel(i),o=r.replace("{value}",n??"");return o}}(e):X(e)?function(r){return function(i,n){return t!=null&&(n=i.value-t),r(ea(a,i),n,i.level!=null?{level:i.level}:null)}}(e):function(r){return a.scale.getLabel(r)}}function ea(a,e){return a.type==="category"?a.scale.getLabel(e):e.value}function Su(a){var e=a.model,t=a.scale;if(!(!e.get(["axisLabel","show"])||t.isBlank())){var r,i,n=t.getExtent();t instanceof Jr?i=t.count():(r=t.getTicks(),i=r.length);var o=a.getLabelModel(),s=qt(a),l,u=1;i>40&&(u=Math.ceil(i/40));for(var h=0;h<i;h+=u){var c=r?r[h]:{value:n[0]+h},v=s(c,h),f=o.getTextRect(v),p=wu(f,o.get("rotate")||0);l?l.union(p):l=p}return l}}function wu(a,e){var t=e*Math.PI/180,r=a.width,i=a.height,n=r*Math.abs(Math.cos(t))+Math.abs(i*Math.sin(t)),o=r*Math.abs(Math.sin(t))+Math.abs(i*Math.cos(t)),s=new It(a.x,a.y,n,o);return s}function ra(a){var e=a.get("interval");return e??"auto"}function Xn(a){return a.type==="category"&&ra(a.getLabelModel())===0}function Au(a,e){var t={};return T(a.mapDimensionsAll(e),function(r){t[On(a,r)]=!0}),We(t)}var Du=function(){function a(){}return a.prototype.getNeedCrossZero=function(){var e=this.option;return!e.scale},a.prototype.getCoordSysModel=function(){},a}(),Va=[],Cu={registerPreprocessor:ns,registerProcessor:os,registerPostInit:ss,registerPostUpdate:ls,registerUpdateLifecycle:us,registerAction:hs,registerCoordinateSystem:cs,registerLayout:vs,registerVisual:fs,registerTransform:ps,registerLoading:ds,registerMap:gs,registerImpl:ms,PRIORITY:ys,ComponentModel:ct,ComponentView:yt,SeriesModel:ue,ChartView:Ht,registerComponentModel:function(a){ct.registerClass(a)},registerComponentView:function(a){yt.registerClass(a)},registerSeriesModel:function(a){ue.registerClass(a)},registerChartView:function(a){Ht.registerClass(a)},registerSubTypeDefaulter:function(a,e){ct.registerSubTypeDefaulter(a,e)},registerPainter:function(a,e){_s(a,e)}};function Pt(a){if(G(a)){T(a,function(e){Pt(e)});return}ht(Va,a)>=0||(Va.push(a),X(a)&&(a={install:a}),a.install(Cu))}var fe=xt();function Yn(a,e){var t=z(e,function(r){return a.scale.parse(r)});return a.type==="time"&&t.length>0&&(t.sort(),t.unshift(t[0]),t.push(t[t.length-1])),t}function Lu(a){var e=a.getLabelModel().get("customValues");if(e){var t=qt(a),r=a.scale.getExtent(),i=Yn(a,e),n=Gt(i,function(o){return o>=r[0]&&o<=r[1]});return{labels:z(n,function(o){var s={value:o};return{formattedLabel:t(s),rawLabel:a.scale.getLabel(s),tickValue:o}})}}return a.type==="category"?Tu(a):ku(a)}function Iu(a,e){var t=a.getTickModel().get("customValues");if(t){var r=a.scale.getExtent(),i=Yn(a,t);return{ticks:Gt(i,function(n){return n>=r[0]&&n<=r[1]})}}return a.type==="category"?Mu(a,e):{ticks:z(a.scale.getTicks(),function(n){return n.value})}}function Tu(a){var e=a.getLabelModel(),t=Un(a,e);return!e.get("show")||a.scale.isBlank()?{labels:[],labelCategoryInterval:t.labelCategoryInterval}:t}function Un(a,e){var t=Zn(a,"labels"),r=ra(e),i=$n(t,r);if(i)return i;var n,o;return X(r)?n=jn(a,r):(o=r==="auto"?Pu(a):r,n=qn(a,o)),Kn(t,r,{labels:n,labelCategoryInterval:o})}function Mu(a,e){var t=Zn(a,"ticks"),r=ra(e),i=$n(t,r);if(i)return i;var n,o;if((!e.get("show")||a.scale.isBlank())&&(n=[]),X(r))n=jn(a,r,!0);else if(r==="auto"){var s=Un(a,a.getLabelModel());o=s.labelCategoryInterval,n=z(s.labels,function(l){return l.tickValue})}else o=r,n=qn(a,o,!0);return Kn(t,r,{ticks:n,tickCategoryInterval:o})}function ku(a){var e=a.scale.getTicks(),t=qt(a);return{labels:z(e,function(r,i){return{level:r.level,formattedLabel:t(r,i),rawLabel:a.scale.getLabel(r),tickValue:r.value}})}}function Zn(a,e){return fe(a)[e]||(fe(a)[e]=[])}function $n(a,e){for(var t=0;t<a.length;t++)if(a[t].key===e)return a[t].value}function Kn(a,e,t){return a.push({key:e,value:t}),t}function Pu(a){var e=fe(a).autoInterval;return e??(fe(a).autoInterval=a.calculateCategoryInterval())}function Ou(a){var e=Eu(a),t=qt(a),r=(e.axisRotate-e.labelRotate)/180*Math.PI,i=a.scale,n=i.getExtent(),o=i.count();if(n[1]-n[0]<1)return 0;var s=1;o>40&&(s=Math.max(1,Math.floor(o/40)));for(var l=n[0],u=a.dataToCoord(l+1)-a.dataToCoord(l),h=Math.abs(u*Math.cos(r)),c=Math.abs(u*Math.sin(r)),v=0,f=0;l<=n[1];l+=s){var p=0,d=0,m=un(t({value:l}),e.font,"center","top");p=m.width*1.3,d=m.height*1.3,v=Math.max(v,p,7),f=Math.max(f,d,7)}var g=v/h,y=f/c;isNaN(g)&&(g=1/0),isNaN(y)&&(y=1/0);var _=Math.max(0,Math.floor(Math.min(g,y))),x=fe(a.model),b=a.getExtent(),w=x.lastAutoInterval,S=x.lastTickCount;return w!=null&&S!=null&&Math.abs(w-_)<=1&&Math.abs(S-o)<=1&&w>_&&x.axisExtent0===b[0]&&x.axisExtent1===b[1]?_=w:(x.lastTickCount=o,x.lastAutoInterval=_,x.axisExtent0=b[0],x.axisExtent1=b[1]),_}function Eu(a){var e=a.getLabelModel();return{axisRotate:a.getRotate?a.getRotate():a.isHorizontal&&!a.isHorizontal()?90:0,labelRotate:e.get("rotate")||0,font:e.getFont()}}function qn(a,e,t){var r=qt(a),i=a.scale,n=i.getExtent(),o=a.getLabelModel(),s=[],l=Math.max((e||0)+1,1),u=n[0],h=i.count();u!==0&&l>1&&h/l>2&&(u=Math.round(Math.ceil(u/l)*l));var c=Xn(a),v=o.get("showMinLabel")||c,f=o.get("showMaxLabel")||c;v&&u!==n[0]&&d(n[0]);for(var p=u;p<=n[1];p+=l)d(p);f&&p-l!==n[1]&&d(n[1]);function d(m){var g={value:m};s.push(t?m:{formattedLabel:r(g),rawLabel:i.getLabel(g),tickValue:m})}return s}function jn(a,e,t){var r=a.scale,i=qt(a),n=[];return T(r.getTicks(),function(o){var s=r.getLabel(o),l=o.value;e(o.value,s)&&n.push(t?l:{formattedLabel:i(o),rawLabel:s,tickValue:l})}),n}var Fa=[0,1],Ru=function(){function a(e,t,r){this.onBand=!1,this.inverse=!1,this.dim=e,this.scale=t,this._extent=r||[0,0]}return a.prototype.contain=function(e){var t=this._extent,r=Math.min(t[0],t[1]),i=Math.max(t[0],t[1]);return e>=r&&e<=i},a.prototype.containData=function(e){return this.scale.contain(e)},a.prototype.getExtent=function(){return this._extent.slice()},a.prototype.getPixelPrecision=function(e){return xs(e||this.scale.getExtent(),this._extent)},a.prototype.setExtent=function(e,t){var r=this._extent;r[0]=e,r[1]=t},a.prototype.dataToCoord=function(e,t){var r=this._extent,i=this.scale;return e=i.normalize(e),this.onBand&&i.type==="ordinal"&&(r=r.slice(),Ha(r,i.count())),pa(e,Fa,r,t)},a.prototype.coordToData=function(e,t){var r=this._extent,i=this.scale;this.onBand&&i.type==="ordinal"&&(r=r.slice(),Ha(r,i.count()));var n=pa(e,r,Fa,t);return this.scale.scale(n)},a.prototype.pointToData=function(e,t){},a.prototype.getTicksCoords=function(e){e=e||{};var t=e.tickModel||this.getTickModel(),r=Iu(this,t),i=r.ticks,n=z(i,function(s){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(s):s),tickValue:s}},this),o=t.get("alignWithLabel");return Nu(this,n,o,e.clamp),n},a.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var e=this.model.getModel("minorTick"),t=e.get("splitNumber");t>0&&t<100||(t=5);var r=this.scale.getMinorTicks(t),i=z(r,function(n){return z(n,function(o){return{coord:this.dataToCoord(o),tickValue:o}},this)},this);return i},a.prototype.getViewLabels=function(){return Lu(this).labels},a.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},a.prototype.getTickModel=function(){return this.model.getModel("axisTick")},a.prototype.getBandWidth=function(){var e=this._extent,t=this.scale.getExtent(),r=t[1]-t[0]+(this.onBand?1:0);r===0&&(r=1);var i=Math.abs(e[1]-e[0]);return Math.abs(i)/r},a.prototype.calculateCategoryInterval=function(){return Ou(this)},a}();function Ha(a,e){var t=a[1]-a[0],r=e,i=t/r/2;a[0]+=i,a[1]-=i}function Nu(a,e,t,r){var i=e.length;if(!a.onBand||t||!i)return;var n=a.getExtent(),o,s;if(i===1)e[0].coord=n[0],o=e[1]={coord:n[1],tickValue:e[0].tickValue};else{var l=e[i-1].tickValue-e[0].tickValue,u=(e[i-1].coord-e[0].coord)/l;T(e,function(f){f.coord-=u/2});var h=a.scale.getExtent();s=1+h[1]-e[i-1].tickValue,o={coord:e[i-1].coord+u*s,tickValue:h[1]+1},e.push(o)}var c=n[0]>n[1];v(e[0].coord,n[0])&&(r?e[0].coord=n[0]:e.shift()),r&&v(n[0],e[0].coord)&&e.unshift({coord:n[0]}),v(n[1],o.coord)&&(r?o.coord=n[1]:e.pop()),r&&v(o.coord,n[1])&&e.push({coord:n[1]});function v(f,p){return f=Z(f),p=Z(p),c?f>p:f<p}}function Bu(a){for(var e=[],t=0;t<a.length;t++){var r=a[t];if(!r.defaultAttr.ignore){var i=r.label,n=i.getComputedTransform(),o=i.getBoundingRect(),s=!n||n[1]<1e-5&&n[2]<1e-5,l=i.style.margin||0,u=o.clone();u.applyTransform(n),u.x-=l/2,u.y-=l/2,u.width+=l,u.height+=l;var h=s?new Dr(o,n):null;e.push({label:i,labelLine:r.labelLine,rect:u,localRect:o,obb:h,priority:r.priority,defaultAttr:r.defaultAttr,layoutOption:r.computedLayoutOption,axisAligned:s,transform:n})}}return e}function Gu(a){var e=[];a.sort(function(d,m){return m.priority-d.priority});var t=new It(0,0,0,0);function r(d){if(!d.ignore){var m=d.ensureState("emphasis");m.ignore==null&&(m.ignore=!1)}d.ignore=!0}for(var i=0;i<a.length;i++){var n=a[i],o=n.axisAligned,s=n.localRect,l=n.transform,u=n.label,h=n.labelLine;t.copy(n.rect),t.width-=.1,t.height-=.1,t.x+=.05,t.y+=.05;for(var c=n.obb,v=!1,f=0;f<e.length;f++){var p=e[f];if(t.intersect(p.rect)){if(o&&p.axisAligned){v=!0;break}if(p.obb||(p.obb=new Dr(p.localRect,p.transform)),c||(c=new Dr(s,l)),c.intersect(p.obb)){v=!0;break}}}v?(r(u),h&&r(h)):(u.attr("ignore",n.defaultAttr.ignore),h&&h.attr("ignore",n.defaultAttr.labelGuideIgnore),e.push(n))}}function Wa(a,e,t){var r=Ss.createCanvas(),i=e.getWidth(),n=e.getHeight(),o=r.style;return o&&(o.position="absolute",o.left="0",o.top="0",o.width=i+"px",o.height=n+"px",r.setAttribute("data-zr-dom-id",a)),r.width=i*t,r.height=n*t,r}var ar=function(a){R(e,a);function e(t,r,i){var n=a.call(this)||this;n.motionBlur=!1,n.lastFrameAlpha=.7,n.dpr=1,n.virtual=!1,n.config={},n.incremental=!1,n.zlevel=0,n.maxRepaintRectCount=5,n.__dirty=!0,n.__firstTimePaint=!0,n.__used=!1,n.__drawIndex=0,n.__startIndex=0,n.__endIndex=0,n.__prevStartIndex=null,n.__prevEndIndex=null;var o;i=i||cn,typeof t=="string"?o=Wa(t,r,i):q(t)&&(o=t,t=o.id),n.id=t,n.dom=o;var s=o.style;return s&&(hn(o),o.onselectstart=function(){return!1},s.padding="0",s.margin="0",s.borderWidth="0"),n.painter=r,n.dpr=i,n}return e.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},e.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},e.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},e.prototype.setUnpainted=function(){this.__firstTimePaint=!0},e.prototype.createBackBuffer=function(){var t=this.dpr;this.domBack=Wa("back-"+this.id,this.painter,t),this.ctxBack=this.domBack.getContext("2d"),t!==1&&this.ctxBack.scale(t,t)},e.prototype.createRepaintRects=function(t,r,i,n){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var o=[],s=this.maxRepaintRectCount,l=!1,u=new It(0,0,0,0);function h(y){if(!(!y.isFinite()||y.isZero()))if(o.length===0){var _=new It(0,0,0,0);_.copy(y),o.push(_)}else{for(var x=!1,b=1/0,w=0,S=0;S<o.length;++S){var D=o[S];if(D.intersect(y)){var I=new It(0,0,0,0);I.copy(D),I.union(y),o[S]=I,x=!0;break}else if(l){u.copy(y),u.union(D);var C=y.width*y.height,A=D.width*D.height,M=u.width*u.height,L=M-C-A;L<b&&(b=L,w=S)}}if(l&&(o[w].union(y),x=!0),!x){var _=new It(0,0,0,0);_.copy(y),o.push(_)}l||(l=o.length>=s)}}for(var c=this.__startIndex;c<this.__endIndex;++c){var v=t[c];if(v){var f=v.shouldBePainted(i,n,!0,!0),p=v.__isRendered&&(v.__dirty&Cr||!f)?v.getPrevPaintRect():null;p&&h(p);var d=f&&(v.__dirty&Cr||!v.__isRendered)?v.getPaintRect():null;d&&h(d)}}for(var c=this.__prevStartIndex;c<this.__prevEndIndex;++c){var v=r[c],f=v&&v.shouldBePainted(i,n,!0,!0);if(v&&(!f||!v.__zr)&&v.__isRendered){var p=v.getPrevPaintRect();p&&h(p)}}var m;do{m=!1;for(var c=0;c<o.length;){if(o[c].isZero()){o.splice(c,1);continue}for(var g=c+1;g<o.length;)o[c].intersect(o[g])?(m=!0,o[c].union(o[g]),o.splice(g,1)):g++;c++}}while(m);return this._paintRects=o,o},e.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},e.prototype.resize=function(t,r){var i=this.dpr,n=this.dom,o=n.style,s=this.domBack;o&&(o.width=t+"px",o.height=r+"px"),n.width=t*i,n.height=r*i,s&&(s.width=t*i,s.height=r*i,i!==1&&this.ctxBack.scale(i,i))},e.prototype.clear=function(t,r,i){var n=this.dom,o=this.ctx,s=n.width,l=n.height;r=r||this.clearColor;var u=this.motionBlur&&!t,h=this.lastFrameAlpha,c=this.dpr,v=this;u&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(n,0,0,s/c,l/c));var f=this.domBack;function p(d,m,g,y){if(o.clearRect(d,m,g,y),r&&r!=="transparent"){var _=void 0;if(ws(r)){var x=r.global||r.__width===g&&r.__height===y;_=x&&r.__canvasGradient||As(o,r,{x:0,y:0,width:g,height:y}),r.__canvasGradient=_,r.__width=g,r.__height=y}else Ds(r)&&(r.scaleX=r.scaleX||c,r.scaleY=r.scaleY||c,_=Cs(o,r,{dirty:function(){v.setUnpainted(),v.painter.refresh()}}));o.save(),o.fillStyle=_||r,o.fillRect(d,m,g,y),o.restore()}u&&(o.save(),o.globalAlpha=h,o.drawImage(f,d,m,g,y),o.restore())}!i||u?p(0,0,s,l):i.length&&T(i,function(d){p(d.x*c,d.y*c,d.width*c,d.height*c)})},e}(bs),Xa=1e5,Rt=314159,De=.01,zu=.001;function Vu(a){return a?a.__builtin__?!0:!(typeof a.resize!="function"||typeof a.refresh!="function"):!1}function Fu(a,e){var t=document.createElement("div");return t.style.cssText=["position:relative","width:"+a+"px","height:"+e+"px","padding:0","margin:0","border-width:0"].join(";")+";",t}var Hu=function(){function a(e,t,r,i){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var n=!e.nodeName||e.nodeName.toUpperCase()==="CANVAS";this._opts=r=F({},r||{}),this.dpr=r.devicePixelRatio||cn,this._singleCanvas=n,this.root=e;var o=e.style;o&&(hn(e),e.innerHTML=""),this.storage=t;var s=this._zlevelList;this._prevDisplayList=[];var l=this._layers;if(n){var h=e,c=h.width,v=h.height;r.width!=null&&(c=r.width),r.height!=null&&(v=r.height),this.dpr=r.devicePixelRatio||1,h.width=c*this.dpr,h.height=v*this.dpr,this._width=c,this._height=v;var f=new ar(h,this,this.dpr);f.__builtin__=!0,f.initContext(),l[Rt]=f,f.zlevel=Rt,s.push(Rt),this._domRoot=e}else{this._width=_e(e,0,r),this._height=_e(e,1,r);var u=this._domRoot=Fu(this._width,this._height);e.appendChild(u)}}return a.prototype.getType=function(){return"canvas"},a.prototype.isSingleCanvas=function(){return this._singleCanvas},a.prototype.getViewportRoot=function(){return this._domRoot},a.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},a.prototype.refresh=function(e){var t=this.storage.getDisplayList(!0),r=this._prevDisplayList,i=this._zlevelList;this._redrawId=Math.random(),this._paintList(t,r,e,this._redrawId);for(var n=0;n<i.length;n++){var o=i[n],s=this._layers[o];if(!s.__builtin__&&s.refresh){var l=n===0?this._backgroundColor:null;s.refresh(l)}}return this._opts.useDirtyRect&&(this._prevDisplayList=t.slice()),this},a.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},a.prototype._paintHoverList=function(e){var t=e.length,r=this._hoverlayer;if(r&&r.clear(),!!t){for(var i={inHover:!0,viewWidth:this._width,viewHeight:this._height},n,o=0;o<t;o++){var s=e[o];s.__inHover&&(r||(r=this._hoverlayer=this.getLayer(Xa)),n||(n=r.ctx,n.save()),ye(n,s,i,o===t-1))}n&&n.restore()}},a.prototype.getHoverLayer=function(){return this.getLayer(Xa)},a.prototype.paintOne=function(e,t){Ls(e,t)},a.prototype._paintList=function(e,t,r,i){if(this._redrawId===i){r=r||!1,this._updateLayerStatus(e);var n=this._doPaintList(e,t,r),o=n.finished,s=n.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),s&&this._paintHoverList(e),o)this.eachLayer(function(u){u.afterBrush&&u.afterBrush()});else{var l=this;Is(function(){l._paintList(e,t,r,i)})}}},a.prototype._compositeManually=function(){var e=this.getLayer(Rt).ctx,t=this._domRoot.width,r=this._domRoot.height;e.clearRect(0,0,t,r),this.eachBuiltinLayer(function(i){i.virtual&&e.drawImage(i.dom,0,0,t,r)})},a.prototype._doPaintList=function(e,t,r){for(var i=this,n=[],o=this._opts.useDirtyRect,s=0;s<this._zlevelList.length;s++){var l=this._zlevelList[s],u=this._layers[l];u.__builtin__&&u!==this._hoverlayer&&(u.__dirty||r)&&n.push(u)}for(var h=!0,c=!1,v=function(d){var m=n[d],g=m.ctx,y=o&&m.createRepaintRects(e,t,f._width,f._height),_=r?m.__startIndex:m.__drawIndex,x=!r&&m.incremental&&Date.now,b=x&&Date.now(),w=m.zlevel===f._zlevelList[0]?f._backgroundColor:null;if(m.__startIndex===m.__endIndex)m.clear(!1,w,y);else if(_===m.__startIndex){var S=e[_];(!S.incremental||!S.notClear||r)&&m.clear(!1,w,y)}_===-1&&(console.error("For some unknown reason. drawIndex is -1"),_=m.__startIndex);var D,I=function(L){var P={inHover:!1,allClipped:!1,prevEl:null,viewWidth:i._width,viewHeight:i._height};for(D=_;D<m.__endIndex;D++){var k=e[D];if(k.__inHover&&(c=!0),i._doPaintEl(k,m,o,L,P,D===m.__endIndex-1),x){var B=Date.now()-b;if(B>15)break}}P.prevElClipPaths&&g.restore()};if(y)if(y.length===0)D=m.__endIndex;else for(var C=f.dpr,A=0;A<y.length;++A){var M=y[A];g.save(),g.beginPath(),g.rect(M.x*C,M.y*C,M.width*C,M.height*C),g.clip(),I(M),g.restore()}else g.save(),I(),g.restore();m.__drawIndex=D,m.__drawIndex<m.__endIndex&&(h=!1)},f=this,p=0;p<n.length;p++)v(p);return K.wxa&&T(this._layers,function(d){d&&d.ctx&&d.ctx.draw&&d.ctx.draw()}),{finished:h,needsRefreshHover:c}},a.prototype._doPaintEl=function(e,t,r,i,n,o){var s=t.ctx;if(r){var l=e.getPaintRect();(!i||l&&l.intersect(i))&&(ye(s,e,n,o),e.setPrevPaintRect(l))}else ye(s,e,n,o)},a.prototype.getLayer=function(e,t){this._singleCanvas&&!this._needsManuallyCompositing&&(e=Rt);var r=this._layers[e];return r||(r=new ar("zr_"+e,this,this.dpr),r.zlevel=e,r.__builtin__=!0,this._layerConfig[e]?J(r,this._layerConfig[e],!0):this._layerConfig[e-De]&&J(r,this._layerConfig[e-De],!0),t&&(r.virtual=t),this.insertLayer(e,r),r.initContext()),r},a.prototype.insertLayer=function(e,t){var r=this._layers,i=this._zlevelList,n=i.length,o=this._domRoot,s=null,l=-1;if(!r[e]&&Vu(t)){if(n>0&&e>i[0]){for(l=0;l<n-1&&!(i[l]<e&&i[l+1]>e);l++);s=r[i[l]]}if(i.splice(l+1,0,e),r[e]=t,!t.virtual)if(s){var u=s.dom;u.nextSibling?o.insertBefore(t.dom,u.nextSibling):o.appendChild(t.dom)}else o.firstChild?o.insertBefore(t.dom,o.firstChild):o.appendChild(t.dom);t.painter||(t.painter=this)}},a.prototype.eachLayer=function(e,t){for(var r=this._zlevelList,i=0;i<r.length;i++){var n=r[i];e.call(t,this._layers[n],n)}},a.prototype.eachBuiltinLayer=function(e,t){for(var r=this._zlevelList,i=0;i<r.length;i++){var n=r[i],o=this._layers[n];o.__builtin__&&e.call(t,o,n)}},a.prototype.eachOtherLayer=function(e,t){for(var r=this._zlevelList,i=0;i<r.length;i++){var n=r[i],o=this._layers[n];o.__builtin__||e.call(t,o,n)}},a.prototype.getLayers=function(){return this._layers},a.prototype._updateLayerStatus=function(e){this.eachBuiltinLayer(function(c,v){c.__dirty=c.__used=!1});function t(c){n&&(n.__endIndex!==c&&(n.__dirty=!0),n.__endIndex=c)}if(this._singleCanvas)for(var r=1;r<e.length;r++){var i=e[r];if(i.zlevel!==e[r-1].zlevel||i.incremental){this._needsManuallyCompositing=!0;break}}var n=null,o=0,s,l;for(l=0;l<e.length;l++){var i=e[l],u=i.zlevel,h=void 0;s!==u&&(s=u,o=0),i.incremental?(h=this.getLayer(u+zu,this._needsManuallyCompositing),h.incremental=!0,o=1):h=this.getLayer(u+(o>0?De:0),this._needsManuallyCompositing),h.__builtin__||Ts("ZLevel "+u+" has been used by unkown layer "+h.id),h!==n&&(h.__used=!0,h.__startIndex!==l&&(h.__dirty=!0),h.__startIndex=l,h.incremental?h.__drawIndex=-1:h.__drawIndex=l,t(l),n=h),i.__dirty&Cr&&!i.__inHover&&(h.__dirty=!0,h.incremental&&h.__drawIndex<0&&(h.__drawIndex=l))}t(l),this.eachBuiltinLayer(function(c,v){!c.__used&&c.getElementCount()>0&&(c.__dirty=!0,c.__startIndex=c.__endIndex=c.__drawIndex=0),c.__dirty&&c.__drawIndex<0&&(c.__drawIndex=c.__startIndex)})},a.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},a.prototype._clearLayer=function(e){e.clear()},a.prototype.setBackgroundColor=function(e){this._backgroundColor=e,T(this._layers,function(t){t.setUnpainted()})},a.prototype.configLayer=function(e,t){if(t){var r=this._layerConfig;r[e]?J(r[e],t,!0):r[e]=t;for(var i=0;i<this._zlevelList.length;i++){var n=this._zlevelList[i];if(n===e||n===e+De){var o=this._layers[n];J(o,r[e],!0)}}}},a.prototype.delLayer=function(e){var t=this._layers,r=this._zlevelList,i=t[e];i&&(i.dom.parentNode.removeChild(i.dom),delete t[e],r.splice(ht(r,e),1))},a.prototype.resize=function(e,t){if(this._domRoot.style){var r=this._domRoot;r.style.display="none";var i=this._opts,n=this.root;if(e!=null&&(i.width=e),t!=null&&(i.height=t),e=_e(n,0,i),t=_e(n,1,i),r.style.display="",this._width!==e||t!==this._height){r.style.width=e+"px",r.style.height=t+"px";for(var o in this._layers)this._layers.hasOwnProperty(o)&&this._layers[o].resize(e,t);this.refresh(!0)}this._width=e,this._height=t}else{if(e==null||t==null)return;this._width=e,this._height=t,this.getLayer(Rt).resize(e,t)}return this},a.prototype.clearLayer=function(e){var t=this._layers[e];t&&t.clear()},a.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},a.prototype.getRenderedCanvas=function(e){if(e=e||{},this._singleCanvas&&!this._compositeManually)return this._layers[Rt].dom;var t=new ar("image",this,e.pixelRatio||this.dpr);t.initContext(),t.clear(!1,e.backgroundColor||this._backgroundColor);var r=t.ctx;if(e.pixelRatio<=this.dpr){this.refresh();var i=t.dom.width,n=t.dom.height;this.eachLayer(function(c){c.__builtin__?r.drawImage(c.dom,0,0,i,n):c.renderToCanvas&&(r.save(),c.renderToCanvas(r),r.restore())})}else for(var o={inHover:!1,viewWidth:this._width,viewHeight:this._height},s=this.storage.getDisplayList(!0),l=0,u=s.length;l<u;l++){var h=s[l];ye(r,h,o,l===u-1)}return t.dom},a.prototype.getWidth=function(){return this._width},a.prototype.getHeight=function(){return this._height},a}();function Wu(a){a.registerPainter("canvas",Hu)}var Xu=function(a){R(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.getInitialData=function(t){return jr(null,this,{useEncodeDefaulter:!0})},e.prototype.getLegendIcon=function(t){var r=new rt,i=Wt("line",0,t.itemHeight/2,t.itemWidth,0,t.lineStyle.stroke,!1);r.add(i),i.setStyle(t.lineStyle);var n=this.getData().getVisual("symbol"),o=this.getData().getVisual("symbolRotate"),s=n==="none"?"circle":n,l=t.itemHeight*.8,u=Wt(s,(t.itemWidth-l)/2,(t.itemHeight-l)/2,l,l,t.itemStyle.fill);r.add(u),u.setStyle(t.itemStyle);var h=t.iconRotate==="inherit"?o:t.iconRotate||0;return u.rotation=h*Math.PI/180,u.setOrigin([t.itemWidth/2,t.itemHeight/2]),s.indexOf("empty")>-1&&(u.style.stroke=u.style.fill,u.style.fill="#fff",u.style.lineWidth=2),r},e.type="series.line",e.dependencies=["grid","polar"],e.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},e}(ue);function aa(a,e){var t=a.mapDimensionsAll("defaultedLabel"),r=t.length;if(r===1){var i=da(a,e,t[0]);return i!=null?i+"":null}else if(r){for(var n=[],o=0;o<t.length;o++)n.push(da(a,e,t[o]));return n.join(" ")}}function Jn(a,e){var t=a.mapDimensionsAll("defaultedLabel");if(!G(e))return e+"";for(var r=[],i=0;i<t.length;i++){var n=a.getDimensionIndex(t[i]);n>=0&&r.push(e[n])}return r.join(" ")}var ia=function(a){R(e,a);function e(t,r,i,n){var o=a.call(this)||this;return o.updateData(t,r,i,n),o}return e.prototype._createSymbol=function(t,r,i,n,o){this.removeAll();var s=Wt(t,-1,-1,2,2,null,o);s.attr({z2:100,culling:!0,scaleX:n[0]/2,scaleY:n[1]/2}),s.drift=Yu,this._symbolType=t,this.add(s)},e.prototype.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(null,t)},e.prototype.getSymbolType=function(){return this._symbolType},e.prototype.getSymbolPath=function(){return this.childAt(0)},e.prototype.highlight=function(){vn(this.childAt(0))},e.prototype.downplay=function(){fn(this.childAt(0))},e.prototype.setZ=function(t,r){var i=this.childAt(0);i.zlevel=t,i.z=r},e.prototype.setDraggable=function(t,r){var i=this.childAt(0);i.draggable=t,i.cursor=!r&&t?"move":i.cursor},e.prototype.updateData=function(t,r,i,n){this.silent=!1;var o=t.getItemVisual(r,"symbol")||"circle",s=t.hostModel,l=e.getSymbolSize(t,r),u=o!==this._symbolType,h=n&&n.disableAnimation;if(u){var c=t.getItemVisual(r,"symbolKeepAspect");this._createSymbol(o,t,r,l,c)}else{var v=this.childAt(0);v.silent=!1;var f={scaleX:l[0]/2,scaleY:l[1]/2};h?v.attr(f):nt(v,f,s,r),pn(v)}if(this._updateCommon(t,r,l,i,n),u){var v=this.childAt(0);if(!h){var f={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:v.style.opacity}};v.scaleX=v.scaleY=0,v.style.opacity=0,_t(v,f,s,r)}}h&&this.childAt(0).stopAnimation("leave")},e.prototype._updateCommon=function(t,r,i,n,o){var s=this.childAt(0),l=t.hostModel,u,h,c,v,f,p,d,m,g;if(n&&(u=n.emphasisItemStyle,h=n.blurItemStyle,c=n.selectItemStyle,v=n.focus,f=n.blurScope,d=n.labelStatesModels,m=n.hoverScale,g=n.cursorStyle,p=n.emphasisDisabled),!n||t.hasItemOption){var y=n&&n.itemModel?n.itemModel:t.getItemModel(r),_=y.getModel("emphasis");u=_.getModel("itemStyle").getItemStyle(),c=y.getModel(["select","itemStyle"]).getItemStyle(),h=y.getModel(["blur","itemStyle"]).getItemStyle(),v=_.get("focus"),f=_.get("blurScope"),p=_.get("disabled"),d=$t(y),m=_.getShallow("scale"),g=y.getShallow("cursor")}var x=t.getItemVisual(r,"symbolRotate");s.attr("rotation",(x||0)*Math.PI/180||0);var b=Ye(t.getItemVisual(r,"symbolOffset"),i);b&&(s.x=b[0],s.y=b[1]),g&&s.attr("cursor",g);var w=t.getItemVisual(r,"style"),S=w.fill;if(s instanceof Ms){var D=s.style;s.useStyle(F({image:D.image,x:D.x,y:D.y,width:D.width,height:D.height},w))}else s.__isEmptyBrush?s.useStyle(F({},w)):s.useStyle(w),s.style.decal=null,s.setColor(S,o&&o.symbolInnerColor),s.style.strokeNoScale=!0;var I=t.getItemVisual(r,"liftZ"),C=this._z2;I!=null?C==null&&(this._z2=s.z2,s.z2+=I):C!=null&&(s.z2=C,this._z2=null);var A=o&&o.useNameLabel;ge(s,d,{labelFetcher:l,labelDataIndex:r,defaultText:M,inheritColor:S,defaultOpacity:w.opacity});function M(k){return A?t.getName(k):aa(t,k)}this._sizeX=i[0]/2,this._sizeY=i[1]/2;var L=s.ensureState("emphasis");L.style=u,s.ensureState("select").style=c,s.ensureState("blur").style=h;var P=m==null||m===!0?Math.max(1.1,3/this._sizeY):isFinite(m)&&m>0?+m:1;L.scaleX=this._sizeX*P,L.scaleY=this._sizeY*P,this.setSymbolScale(1),he(this,v,f,p)},e.prototype.setSymbolScale=function(t){this.scaleX=this.scaleY=t},e.prototype.fadeOut=function(t,r,i){var n=this.childAt(0),o=Y(this).dataIndex,s=i&&i.animation;if(this.silent=n.silent=!0,i&&i.fadeLabel){var l=n.getTextContent();l&&ga(l,{style:{opacity:0}},r,{dataIndex:o,removeOpt:s,cb:function(){n.removeTextContent()}})}else n.removeTextContent();ga(n,{style:{opacity:0},scaleX:0,scaleY:0},r,{dataIndex:o,cb:t,removeOpt:s})},e.getSymbolSize=function(t,r){return Ur(t.getItemVisual(r,"symbolSize"))},e}(rt);function Yu(a,e){this.parent.drift(a,e)}function ir(a,e,t,r){return e&&!isNaN(e[0])&&!isNaN(e[1])&&!(r.isIgnore&&r.isIgnore(t))&&!(r.clipShape&&!r.clipShape.contain(e[0],e[1]))&&a.getItemVisual(t,"symbol")!=="none"}function Ya(a){return a!=null&&!q(a)&&(a={isIgnore:a}),a||{}}function Ua(a){var e=a.hostModel,t=e.getModel("emphasis");return{emphasisItemStyle:t.getModel("itemStyle").getItemStyle(),blurItemStyle:e.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:e.getModel(["select","itemStyle"]).getItemStyle(),focus:t.get("focus"),blurScope:t.get("blurScope"),emphasisDisabled:t.get("disabled"),hoverScale:t.get("scale"),labelStatesModels:$t(e),cursorStyle:e.get("cursor")}}var Uu=function(){function a(e){this.group=new rt,this._SymbolCtor=e||ia}return a.prototype.updateData=function(e,t){this._progressiveEls=null,t=Ya(t);var r=this.group,i=e.hostModel,n=this._data,o=this._SymbolCtor,s=t.disableAnimation,l=Ua(e),u={disableAnimation:s},h=t.getSymbolPoint||function(c){return e.getItemLayout(c)};n||r.removeAll(),e.diff(n).add(function(c){var v=h(c);if(ir(e,v,c,t)){var f=new o(e,c,l,u);f.setPosition(v),e.setItemGraphicEl(c,f),r.add(f)}}).update(function(c,v){var f=n.getItemGraphicEl(v),p=h(c);if(!ir(e,p,c,t)){r.remove(f);return}var d=e.getItemVisual(c,"symbol")||"circle",m=f&&f.getSymbolType&&f.getSymbolType();if(!f||m&&m!==d)r.remove(f),f=new o(e,c,l,u),f.setPosition(p);else{f.updateData(e,c,l,u);var g={x:p[0],y:p[1]};s?f.attr(g):nt(f,g,i)}r.add(f),e.setItemGraphicEl(c,f)}).remove(function(c){var v=n.getItemGraphicEl(c);v&&v.fadeOut(function(){r.remove(v)},i)}).execute(),this._getSymbolPoint=h,this._data=e},a.prototype.updateLayout=function(){var e=this,t=this._data;t&&t.eachItemGraphicEl(function(r,i){var n=e._getSymbolPoint(i);r.setPosition(n),r.markRedraw()})},a.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=Ua(e),this._data=null,this.group.removeAll()},a.prototype.incrementalUpdate=function(e,t,r){this._progressiveEls=[],r=Ya(r);function i(l){l.isGroup||(l.incremental=!0,l.ensureState("emphasis").hoverLayer=!0)}for(var n=e.start;n<e.end;n++){var o=t.getItemLayout(n);if(ir(t,o,n,r)){var s=new this._SymbolCtor(t,n,this._seriesScope);s.traverse(i),s.setPosition(o),this.group.add(s),t.setItemGraphicEl(n,s),this._progressiveEls.push(s)}}},a.prototype.eachRendered=function(e){Zr(this._progressiveEls||this.group,e)},a.prototype.remove=function(e){var t=this.group,r=this._data;r&&e?r.eachItemGraphicEl(function(i){i.fadeOut(function(){t.remove(i)},r.hostModel)}):t.removeAll()},a}();function Qn(a,e,t){var r=a.getBaseAxis(),i=a.getOtherAxis(r),n=Zu(i,t),o=r.dim,s=i.dim,l=e.mapDimension(s),u=e.mapDimension(o),h=s==="x"||s==="radius"?1:0,c=z(a.dimensions,function(p){return e.mapDimension(p)}),v=!1,f=e.getCalculationInfo("stackResultDimension");return zt(e,c[0])&&(v=!0,c[0]=f),zt(e,c[1])&&(v=!0,c[1]=f),{dataDimsForPoint:c,valueStart:n,valueAxisDim:s,baseAxisDim:o,stacked:!!v,valueDim:l,baseDim:u,baseDataOffset:h,stackedOverDimension:e.getCalculationInfo("stackedOverDimension")}}function Zu(a,e){var t=0,r=a.scale.getExtent();return e==="start"?t=r[0]:e==="end"?t=r[1]:Ot(e)&&!isNaN(e)?t=e:r[0]>0?t=r[0]:r[1]<0&&(t=r[1]),t}function to(a,e,t,r){var i=NaN;a.stacked&&(i=t.get(t.getCalculationInfo("stackedOverDimension"),r)),isNaN(i)&&(i=a.valueStart);var n=a.baseDataOffset,o=[];return o[n]=t.get(a.baseDim,r),o[1-n]=i,e.dataToPoint(o)}function $u(a,e){var t=[];return e.diff(a).add(function(r){t.push({cmd:"+",idx:r})}).update(function(r,i){t.push({cmd:"=",idx:i,idx1:r})}).remove(function(r){t.push({cmd:"-",idx:r})}).execute(),t}function Ku(a,e,t,r,i,n,o,s){for(var l=$u(a,e),u=[],h=[],c=[],v=[],f=[],p=[],d=[],m=Qn(i,e,o),g=a.getLayout("points")||[],y=e.getLayout("points")||[],_=0;_<l.length;_++){var x=l[_],b=!0,w=void 0,S=void 0;switch(x.cmd){case"=":w=x.idx*2,S=x.idx1*2;var D=g[w],I=g[w+1],C=y[S],A=y[S+1];(isNaN(D)||isNaN(I))&&(D=C,I=A),u.push(D,I),h.push(C,A),c.push(t[w],t[w+1]),v.push(r[S],r[S+1]),d.push(e.getRawIndex(x.idx1));break;case"+":var M=x.idx,L=m.dataDimsForPoint,P=i.dataToPoint([e.get(L[0],M),e.get(L[1],M)]);S=M*2,u.push(P[0],P[1]),h.push(y[S],y[S+1]);var k=to(m,i,e,M);c.push(k[0],k[1]),v.push(r[S],r[S+1]),d.push(e.getRawIndex(M));break;case"-":b=!1}b&&(f.push(x),p.push(p.length))}p.sort(function(tt,qe){return d[tt]-d[qe]});for(var B=u.length,V=dt(B),O=dt(B),E=dt(B),N=dt(B),W=[],_=0;_<p.length;_++){var ot=p[_],$=_*2,st=ot*2;V[$]=u[st],V[$+1]=u[st+1],O[$]=h[st],O[$+1]=h[st+1],E[$]=c[st],E[$+1]=c[st+1],N[$]=v[st],N[$+1]=v[st+1],W[_]=f[ot]}return{current:V,next:O,stackedOnCurrent:E,stackedOnNext:N,status:W}}var St=Math.min,wt=Math.max;function Bt(a,e){return isNaN(a)||isNaN(e)}function Pr(a,e,t,r,i,n,o,s,l){for(var u,h,c,v,f,p,d=t,m=0;m<r;m++){var g=e[d*2],y=e[d*2+1];if(d>=i||d<0)break;if(Bt(g,y)){if(l){d+=n;continue}break}if(d===t)a[n>0?"moveTo":"lineTo"](g,y),c=g,v=y;else{var _=g-u,x=y-h;if(_*_+x*x<.5){d+=n;continue}if(o>0){for(var b=d+n,w=e[b*2],S=e[b*2+1];w===g&&S===y&&m<r;)m++,b+=n,d+=n,w=e[b*2],S=e[b*2+1],g=e[d*2],y=e[d*2+1],_=g-u,x=y-h;var D=m+1;if(l)for(;Bt(w,S)&&D<r;)D++,b+=n,w=e[b*2],S=e[b*2+1];var I=.5,C=0,A=0,M=void 0,L=void 0;if(D>=r||Bt(w,S))f=g,p=y;else{C=w-u,A=S-h;var P=g-u,k=w-g,B=y-h,V=S-y,O=void 0,E=void 0;if(s==="x"){O=Math.abs(P),E=Math.abs(k);var N=C>0?1:-1;f=g-N*O*o,p=y,M=g+N*E*o,L=y}else if(s==="y"){O=Math.abs(B),E=Math.abs(V);var W=A>0?1:-1;f=g,p=y-W*O*o,M=g,L=y+W*E*o}else O=Math.sqrt(P*P+B*B),E=Math.sqrt(k*k+V*V),I=E/(E+O),f=g-C*o*(1-I),p=y-A*o*(1-I),M=g+C*o*I,L=y+A*o*I,M=St(M,wt(w,g)),L=St(L,wt(S,y)),M=wt(M,St(w,g)),L=wt(L,St(S,y)),C=M-g,A=L-y,f=g-C*O/E,p=y-A*O/E,f=St(f,wt(u,g)),p=St(p,wt(h,y)),f=wt(f,St(u,g)),p=wt(p,St(h,y)),C=g-f,A=y-p,M=g+C*E/O,L=y+A*E/O}a.bezierCurveTo(c,v,f,p,g,y),c=M,v=L}else a.lineTo(g,y)}u=g,h=y,d+=n}return m}var eo=function(){function a(){this.smooth=0,this.smoothConstraint=!0}return a}(),qu=function(a){R(e,a);function e(t){var r=a.call(this,t)||this;return r.type="ec-polyline",r}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new eo},e.prototype.buildPath=function(t,r){var i=r.points,n=0,o=i.length/2;if(r.connectNulls){for(;o>0&&Bt(i[o*2-2],i[o*2-1]);o--);for(;n<o&&Bt(i[n*2],i[n*2+1]);n++);}for(;n<o;)n+=Pr(t,i,n,o,o,1,r.smooth,r.smoothMonotone,r.connectNulls)+1},e.prototype.getPointOn=function(t,r){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var i=this.path,n=i.data,o=ks.CMD,s,l,u=r==="x",h=[],c=0;c<n.length;){var v=n[c++],f=void 0,p=void 0,d=void 0,m=void 0,g=void 0,y=void 0,_=void 0;switch(v){case o.M:s=n[c++],l=n[c++];break;case o.L:if(f=n[c++],p=n[c++],_=u?(t-s)/(f-s):(t-l)/(p-l),_<=1&&_>=0){var x=u?(p-l)*_+l:(f-s)*_+s;return u?[t,x]:[x,t]}s=f,l=p;break;case o.C:f=n[c++],p=n[c++],d=n[c++],m=n[c++],g=n[c++],y=n[c++];var b=u?ma(s,f,d,g,t,h):ma(l,p,m,y,t,h);if(b>0)for(var w=0;w<b;w++){var S=h[w];if(S<=1&&S>=0){var x=u?ya(l,p,m,y,S):ya(s,f,d,g,S);return u?[t,x]:[x,t]}}s=g,l=y;break}}},e}(me),ju=function(a){R(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e}(eo),Ju=function(a){R(e,a);function e(t){var r=a.call(this,t)||this;return r.type="ec-polygon",r}return e.prototype.getDefaultShape=function(){return new ju},e.prototype.buildPath=function(t,r){var i=r.points,n=r.stackedOnPoints,o=0,s=i.length/2,l=r.smoothMonotone;if(r.connectNulls){for(;s>0&&Bt(i[s*2-2],i[s*2-1]);s--);for(;o<s&&Bt(i[o*2],i[o*2+1]);o++);}for(;o<s;){var u=Pr(t,i,o,s,s,1,r.smooth,l,r.connectNulls);Pr(t,n,o+u-1,u,s,-1,r.stackedOnSmooth,l,r.connectNulls),o+=u+1,t.closePath()}},e}(me);function ro(a,e,t,r,i){var n=a.getArea(),o=n.x,s=n.y,l=n.width,u=n.height,h=t.get(["lineStyle","width"])||0;o-=h/2,s-=h/2,l+=h,u+=h,l=Math.ceil(l),o!==Math.floor(o)&&(o=Math.floor(o),l++);var c=new ft({shape:{x:o,y:s,width:l,height:u}});if(e){var v=a.getBaseAxis(),f=v.isHorizontal(),p=v.inverse;f?(p&&(c.shape.x+=l),c.shape.width=0):(p||(c.shape.y+=u),c.shape.height=0);var d=X(i)?function(m){i(m,c)}:null;_t(c,{shape:{width:l,height:u,x:o,y:s}},t,null,r,d)}return c}function ao(a,e,t){var r=a.getArea(),i=Z(r.r0,1),n=Z(r.r,1),o=new $r({shape:{cx:Z(a.cx,1),cy:Z(a.cy,1),r0:i,r:n,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}});if(e){var s=a.getBaseAxis().dim==="angle";s?o.shape.endAngle=r.startAngle:o.shape.r=i,_t(o,{shape:{endAngle:r.endAngle,r:n}},t)}return o}function Qu(a,e,t,r,i){if(a){if(a.type==="polar")return ao(a,e,t);if(a.type==="cartesian2d")return ro(a,e,t,r,i)}else return null;return null}function Ke(a,e){return a.type===e}function Za(a,e){if(a.length===e.length){for(var t=0;t<a.length;t++)if(a[t]!==e[t])return;return!0}}function $a(a){for(var e=1/0,t=1/0,r=-1/0,i=-1/0,n=0;n<a.length;){var o=a[n++],s=a[n++];isNaN(o)||(e=Math.min(o,e),r=Math.max(o,r)),isNaN(s)||(t=Math.min(s,t),i=Math.max(s,i))}return[[e,t],[r,i]]}function Ka(a,e){var t=$a(a),r=t[0],i=t[1],n=$a(e),o=n[0],s=n[1];return Math.max(Math.abs(r[0]-o[0]),Math.abs(r[1]-o[1]),Math.abs(i[0]-s[0]),Math.abs(i[1]-s[1]))}function qa(a){return Ot(a)?a:a?.5:0}function th(a,e,t){if(!t.valueDim)return[];for(var r=e.count(),i=dt(r*2),n=0;n<r;n++){var o=to(t,a,e,n);i[n*2]=o[0],i[n*2+1]=o[1]}return i}function At(a,e,t,r,i){var n=t.getBaseAxis(),o=n.dim==="x"||n.dim==="radius"?0:1,s=[],l=0,u=[],h=[],c=[],v=[];if(i){for(l=0;l<a.length;l+=2){var f=e||a;!isNaN(f[l])&&!isNaN(f[l+1])&&v.push(a[l],a[l+1])}a=v}for(l=0;l<a.length-2;l+=2)switch(c[0]=a[l+2],c[1]=a[l+3],h[0]=a[l],h[1]=a[l+1],s.push(h[0],h[1]),r){case"end":u[o]=c[o],u[1-o]=h[1-o],s.push(u[0],u[1]);break;case"middle":var p=(h[o]+c[o])/2,d=[];u[o]=d[o]=p,u[1-o]=h[1-o],d[1-o]=c[1-o],s.push(u[0],u[1]),s.push(d[0],d[1]);break;default:u[o]=h[o],u[1-o]=c[1-o],s.push(u[0],u[1])}return s.push(a[l++],a[l++]),s}function eh(a,e){var t=[],r=a.length,i,n;function o(h,c,v){var f=h.coord,p=(v-f)/(c.coord-f),d=Es(p,[h.color,c.color]);return{coord:v,color:d}}for(var s=0;s<r;s++){var l=a[s],u=l.coord;if(u<0)i=l;else if(u>e){n?t.push(o(n,l,e)):i&&t.push(o(i,l,0),o(i,l,e));break}else i&&(t.push(o(i,l,0)),i=null),t.push(l),n=l}return t}function rh(a,e,t){var r=a.getVisual("visualMeta");if(!(!r||!r.length||!a.count())&&e.type==="cartesian2d"){for(var i,n,o=r.length-1;o>=0;o--){var s=a.getDimensionInfo(r[o].dimension);if(i=s&&s.coordDim,i==="x"||i==="y"){n=r[o];break}}if(n){var l=e.getAxis(i),u=z(n.stops,function(_){return{coord:l.toGlobalCoord(l.dataToCoord(_.value)),color:_.color}}),h=u.length,c=n.outerColors.slice();h&&u[0].coord>u[h-1].coord&&(u.reverse(),c.reverse());var v=eh(u,i==="x"?t.getWidth():t.getHeight()),f=v.length;if(!f&&h)return u[0].coord<0?c[1]?c[1]:u[h-1].color:c[0]?c[0]:u[0].color;var p=10,d=v[0].coord-p,m=v[f-1].coord+p,g=m-d;if(g<.001)return"transparent";T(v,function(_){_.offset=(_.coord-d)/g}),v.push({offset:f?v[f-1].offset:.5,color:c[1]||"transparent"}),v.unshift({offset:f?v[0].offset:.5,color:c[0]||"transparent"});var y=new Os(0,0,0,0,v,!0);return y[i]=d,y[i+"2"]=m,y}}}function ah(a,e,t){var r=a.get("showAllSymbol"),i=r==="auto";if(!(r&&!i)){var n=t.getAxesByScale("ordinal")[0];if(n&&!(i&&ih(n,e))){var o=e.mapDimension(n.dim),s={};return T(n.getViewLabels(),function(l){var u=n.scale.getRawOrdinalNumber(l.tickValue);s[u]=1}),function(l){return!s.hasOwnProperty(e.get(o,l))}}}}function ih(a,e){var t=a.getExtent(),r=Math.abs(t[1]-t[0])/a.scale.count();isNaN(r)&&(r=0);for(var i=e.count(),n=Math.max(1,Math.round(i/5)),o=0;o<i;o+=n)if(ia.getSymbolSize(e,o)[a.isHorizontal()?1:0]*1.5>r)return!1;return!0}function nh(a,e){return isNaN(a)||isNaN(e)}function oh(a){for(var e=a.length/2;e>0&&nh(a[e*2-2],a[e*2-1]);e--);return e-1}function ja(a,e){return[a[e*2],a[e*2+1]]}function sh(a,e,t){for(var r=a.length/2,i=t==="x"?0:1,n,o,s=0,l=-1,u=0;u<r;u++)if(o=a[u*2+i],!(isNaN(o)||isNaN(a[u*2+1-i]))){if(u===0){n=o;continue}if(n<=e&&o>=e||n>=e&&o<=e){l=u;break}s=u,n=o}return{range:[s,l],t:(e-n)/(o-n)}}function io(a){if(a.get(["endLabel","show"]))return!0;for(var e=0;e<Ge.length;e++)if(a.get([Ge[e],"endLabel","show"]))return!0;return!1}function nr(a,e,t,r){if(Ke(e,"cartesian2d")){var i=r.getModel("endLabel"),n=i.get("valueAnimation"),o=r.getData(),s={lastFrameIndex:0},l=io(r)?function(f,p){a._endLabelOnDuring(f,p,o,s,n,i,e)}:null,u=e.getBaseAxis().isHorizontal(),h=ro(e,t,r,function(){var f=a._endLabel;f&&t&&s.originalX!=null&&f.attr({x:s.originalX,y:s.originalY})},l);if(!r.get("clip",!0)){var c=h.shape,v=Math.max(c.width,c.height);u?(c.y-=v,c.height+=v*2):(c.x-=v,c.width+=v*2)}return l&&l(1,h),h}else return ao(e,t,r)}function lh(a,e){var t=e.getBaseAxis(),r=t.isHorizontal(),i=t.inverse,n=r?i?"right":"left":"center",o=r?"middle":i?"top":"bottom";return{normal:{align:a.get("align")||n,verticalAlign:a.get("verticalAlign")||o}}}var uh=function(a){R(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.init=function(){var t=new rt,r=new Uu;this.group.add(r.group),this._symbolDraw=r,this._lineGroup=t,this._changePolyState=j(this._changePolyState,this)},e.prototype.render=function(t,r,i){var n=t.coordinateSystem,o=this.group,s=t.getData(),l=t.getModel("lineStyle"),u=t.getModel("areaStyle"),h=s.getLayout("points")||[],c=n.type==="polar",v=this._coordSys,f=this._symbolDraw,p=this._polyline,d=this._polygon,m=this._lineGroup,g=!r.ssr&&t.get("animation"),y=!u.isEmpty(),_=u.get("origin"),x=Qn(n,s,_),b=y&&th(n,s,x),w=t.get("showSymbol"),S=t.get("connectNulls"),D=w&&!c&&ah(t,s,n),I=this._data;I&&I.eachItemGraphicEl(function(tt,qe){tt.__temp&&(o.remove(tt),I.setItemGraphicEl(qe,null))}),w||f.remove(),o.add(m);var C=c?!1:t.get("step"),A;n&&n.getArea&&t.get("clip",!0)&&(A=n.getArea(),A.width!=null?(A.x-=.1,A.y-=.1,A.width+=.2,A.height+=.2):A.r0&&(A.r0-=.5,A.r+=.5)),this._clipShapeForSymbol=A;var M=rh(s,n,i)||s.getVisual("style")[s.getVisual("drawType")];if(!(p&&v.type===n.type&&C===this._step))w&&f.updateData(s,{isIgnore:D,clipShape:A,disableAnimation:!0,getSymbolPoint:function(tt){return[h[tt*2],h[tt*2+1]]}}),g&&this._initSymbolLabelAnimation(s,n,A),C&&(b&&(b=At(b,h,n,C,S)),h=At(h,null,n,C,S)),p=this._newPolyline(h),y?d=this._newPolygon(h,b):d&&(m.remove(d),d=this._polygon=null),c||this._initOrUpdateEndLabel(t,n,Xt(M)),m.setClipPath(nr(this,n,!0,t));else{y&&!d?d=this._newPolygon(h,b):d&&!y&&(m.remove(d),d=this._polygon=null),c||this._initOrUpdateEndLabel(t,n,Xt(M));var L=m.getClipPath();if(L){var P=nr(this,n,!1,t);_t(L,{shape:P.shape},t)}else m.setClipPath(nr(this,n,!0,t));w&&f.updateData(s,{isIgnore:D,clipShape:A,disableAnimation:!0,getSymbolPoint:function(tt){return[h[tt*2],h[tt*2+1]]}}),(!Za(this._stackedOnPoints,b)||!Za(this._points,h))&&(g?this._doUpdateAnimation(s,b,n,i,C,_,S):(C&&(b&&(b=At(b,h,n,C,S)),h=At(h,null,n,C,S)),p.setShape({points:h}),d&&d.setShape({points:h,stackedOnPoints:b})))}var k=t.getModel("emphasis"),B=k.get("focus"),V=k.get("blurScope"),O=k.get("disabled");if(p.useStyle(Q(l.getLineStyle(),{fill:"none",stroke:M,lineJoin:"bevel"})),Lr(p,t,"lineStyle"),p.style.lineWidth>0&&t.get(["emphasis","lineStyle","width"])==="bolder"){var E=p.getState("emphasis").style;E.lineWidth=+p.style.lineWidth+1}Y(p).seriesIndex=t.seriesIndex,he(p,B,V,O);var N=qa(t.get("smooth")),W=t.get("smoothMonotone");if(p.setShape({smooth:N,smoothMonotone:W,connectNulls:S}),d){var ot=s.getCalculationInfo("stackedOnSeries"),$=0;d.useStyle(Q(u.getAreaStyle(),{fill:M,opacity:.7,lineJoin:"bevel",decal:s.getVisual("style").decal})),ot&&($=qa(ot.get("smooth"))),d.setShape({smooth:N,stackedOnSmooth:$,smoothMonotone:W,connectNulls:S}),Lr(d,t,"areaStyle"),Y(d).seriesIndex=t.seriesIndex,he(d,B,V,O)}var st=this._changePolyState;s.eachItemGraphicEl(function(tt){tt&&(tt.onHoverStateChange=st)}),this._polyline.onHoverStateChange=st,this._data=s,this._coordSys=n,this._stackedOnPoints=b,this._points=h,this._step=C,this._valueOrigin=_,t.get("triggerLineEvent")&&(this.packEventData(t,p),d&&this.packEventData(t,d))},e.prototype.packEventData=function(t,r){Y(r).eventData={componentType:"series",componentSubType:"line",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"line"}},e.prototype.highlight=function(t,r,i,n){var o=t.getData(),s=Ir(o,n);if(this._changePolyState("emphasis"),!(s instanceof Array)&&s!=null&&s>=0){var l=o.getLayout("points"),u=o.getItemGraphicEl(s);if(!u){var h=l[s*2],c=l[s*2+1];if(isNaN(h)||isNaN(c)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(h,c))return;var v=t.get("zlevel")||0,f=t.get("z")||0;u=new ia(o,s),u.x=h,u.y=c,u.setZ(v,f);var p=u.getSymbolPath().getTextContent();p&&(p.zlevel=v,p.z=f,p.z2=this._polyline.z2+1),u.__temp=!0,o.setItemGraphicEl(s,u),u.stopSymbolAnimation(!0),this.group.add(u)}u.highlight()}else Ht.prototype.highlight.call(this,t,r,i,n)},e.prototype.downplay=function(t,r,i,n){var o=t.getData(),s=Ir(o,n);if(this._changePolyState("normal"),s!=null&&s>=0){var l=o.getItemGraphicEl(s);l&&(l.__temp?(o.setItemGraphicEl(s,null),this.group.remove(l)):l.downplay())}else Ht.prototype.downplay.call(this,t,r,i,n)},e.prototype._changePolyState=function(t){var r=this._polygon;_a(this._polyline,t),r&&_a(r,t)},e.prototype._newPolyline=function(t){var r=this._polyline;return r&&this._lineGroup.remove(r),r=new qu({shape:{points:t},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(r),this._polyline=r,r},e.prototype._newPolygon=function(t,r){var i=this._polygon;return i&&this._lineGroup.remove(i),i=new Ju({shape:{points:t,stackedOnPoints:r},segmentIgnoreThreshold:2}),this._lineGroup.add(i),this._polygon=i,i},e.prototype._initSymbolLabelAnimation=function(t,r,i){var n,o,s=r.getBaseAxis(),l=s.inverse;r.type==="cartesian2d"?(n=s.isHorizontal(),o=!1):r.type==="polar"&&(n=s.dim==="angle",o=!0);var u=t.hostModel,h=u.get("animationDuration");X(h)&&(h=h(null));var c=u.get("animationDelay")||0,v=X(c)?c(null):c;t.eachItemGraphicEl(function(f,p){var d=f;if(d){var m=[f.x,f.y],g=void 0,y=void 0,_=void 0;if(i)if(o){var x=i,b=r.pointToCoord(m);n?(g=x.startAngle,y=x.endAngle,_=-b[1]/180*Math.PI):(g=x.r0,y=x.r,_=b[0])}else{var w=i;n?(g=w.x,y=w.x+w.width,_=f.x):(g=w.y+w.height,y=w.y,_=f.y)}var S=y===g?0:(_-g)/(y-g);l&&(S=1-S);var D=X(c)?c(p):h*S+v,I=d.getSymbolPath(),C=I.getTextContent();d.attr({scaleX:0,scaleY:0}),d.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:D}),C&&C.animateFrom({style:{opacity:0}},{duration:300,delay:D}),I.disableLabelAnimation=!0}})},e.prototype._initOrUpdateEndLabel=function(t,r,i){var n=t.getModel("endLabel");if(io(t)){var o=t.getData(),s=this._polyline,l=o.getLayout("points");if(!l){s.removeTextContent(),this._endLabel=null;return}var u=this._endLabel;u||(u=this._endLabel=new vt({z2:200}),u.ignoreClip=!0,s.setTextContent(this._endLabel),s.disableLabelAnimation=!0);var h=oh(l);h>=0&&(ge(s,$t(t,"endLabel"),{inheritColor:i,labelFetcher:t,labelDataIndex:h,defaultText:function(c,v,f){return f!=null?Jn(o,f):aa(o,c)},enableTextSetter:!0},lh(n,r)),s.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},e.prototype._endLabelOnDuring=function(t,r,i,n,o,s,l){var u=this._endLabel,h=this._polyline;if(u){t<1&&n.originalX==null&&(n.originalX=u.x,n.originalY=u.y);var c=i.getLayout("points"),v=i.hostModel,f=v.get("connectNulls"),p=s.get("precision"),d=s.get("distance")||0,m=l.getBaseAxis(),g=m.isHorizontal(),y=m.inverse,_=r.shape,x=y?g?_.x:_.y+_.height:g?_.x+_.width:_.y,b=(g?d:0)*(y?-1:1),w=(g?0:-d)*(y?-1:1),S=g?"x":"y",D=sh(c,x,S),I=D.range,C=I[1]-I[0],A=void 0;if(C>=1){if(C>1&&!f){var M=ja(c,I[0]);u.attr({x:M[0]+b,y:M[1]+w}),o&&(A=v.getRawValue(I[0]))}else{var M=h.getPointOn(x,S);M&&u.attr({x:M[0]+b,y:M[1]+w});var L=v.getRawValue(I[0]),P=v.getRawValue(I[1]);o&&(A=Ps(i,p,L,P,D.t))}n.lastFrameIndex=I[0]}else{var k=t===1||n.lastFrameIndex>0?I[0]:0,M=ja(c,k);o&&(A=v.getRawValue(k)),u.attr({x:M[0]+b,y:M[1]+w})}if(o){var B=dn(u);typeof B.setLabelText=="function"&&B.setLabelText(A)}}},e.prototype._doUpdateAnimation=function(t,r,i,n,o,s,l){var u=this._polyline,h=this._polygon,c=t.hostModel,v=Ku(this._data,t,this._stackedOnPoints,r,this._coordSys,i,this._valueOrigin),f=v.current,p=v.stackedOnCurrent,d=v.next,m=v.stackedOnNext;if(o&&(p=At(v.stackedOnCurrent,v.current,i,o,l),f=At(v.current,null,i,o,l),m=At(v.stackedOnNext,v.next,i,o,l),d=At(v.next,null,i,o,l)),Ka(f,d)>3e3||h&&Ka(p,m)>3e3){u.stopAnimation(),u.setShape({points:d}),h&&(h.stopAnimation(),h.setShape({points:d,stackedOnPoints:m}));return}u.shape.__points=v.current,u.shape.points=f;var g={shape:{points:d}};v.current!==f&&(g.shape.__points=v.next),u.stopAnimation(),nt(u,g,c),h&&(h.setShape({points:f,stackedOnPoints:p}),h.stopAnimation(),nt(h,{shape:{stackedOnPoints:m}},c),u.shape.points!==h.shape.points&&(h.shape.points=u.shape.points));for(var y=[],_=v.status,x=0;x<_.length;x++){var b=_[x].cmd;if(b==="="){var w=t.getItemGraphicEl(_[x].idx1);w&&y.push({el:w,ptIdx:x})}}u.animators&&u.animators.length&&u.animators[0].during(function(){h&&h.dirtyShape();for(var S=u.shape.__points,D=0;D<y.length;D++){var I=y[D].el,C=y[D].ptIdx*2;I.x=S[C],I.y=S[C+1],I.markRedraw()}})},e.prototype.remove=function(t){var r=this.group,i=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),i&&i.eachItemGraphicEl(function(n,o){n.__temp&&(r.remove(n),i.setItemGraphicEl(o,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},e.type="line",e}(Ht);function hh(a,e){return{seriesType:a,plan:Ji(),reset:function(t){var r=t.getData(),i=t.coordinateSystem;if(t.pipelineContext,!!i){var n=z(i.dimensions,function(c){return r.mapDimension(c)}).slice(0,2),o=n.length,s=r.getCalculationInfo("stackResultDimension");zt(r,n[0])&&(n[0]=s),zt(r,n[1])&&(n[1]=s);var l=r.getStore(),u=r.getDimensionIndex(n[0]),h=r.getDimensionIndex(n[1]);return o&&{progress:function(c,v){for(var f=c.end-c.start,p=dt(f*o),d=[],m=[],g=c.start,y=0;g<c.end;g++){var _=void 0;if(o===1){var x=l.get(u,g);_=i.dataToPoint(x,null,m)}else d[0]=l.get(u,g),d[1]=l.get(h,g),_=i.dataToPoint(d,null,m);p[y++]=_[0],p[y++]=_[1]}v.setLayout("points",p)}}}}}}var ch={average:function(a){for(var e=0,t=0,r=0;r<a.length;r++)isNaN(a[r])||(e+=a[r],t++);return t===0?NaN:e/t},sum:function(a){for(var e=0,t=0;t<a.length;t++)e+=a[t]||0;return e},max:function(a){for(var e=-1/0,t=0;t<a.length;t++)a[t]>e&&(e=a[t]);return isFinite(e)?e:NaN},min:function(a){for(var e=1/0,t=0;t<a.length;t++)a[t]<e&&(e=a[t]);return isFinite(e)?e:NaN},nearest:function(a){return a[0]}},vh=function(a){return Math.round(a.length/2)};function no(a){return{seriesType:a,reset:function(e,t,r){var i=e.getData(),n=e.get("sampling"),o=e.coordinateSystem,s=i.count();if(s>10&&o.type==="cartesian2d"&&n){var l=o.getBaseAxis(),u=o.getOtherAxis(l),h=l.getExtent(),c=r.getDevicePixelRatio(),v=Math.abs(h[1]-h[0])*(c||1),f=Math.round(s/v);if(isFinite(f)&&f>1){n==="lttb"?e.setData(i.lttbDownSample(i.mapDimension(u.dim),1/f)):n==="minmax"&&e.setData(i.minmaxDownSample(i.mapDimension(u.dim),1/f));var p=void 0;H(n)?p=ch[n]:X(n)&&(p=n),p&&e.setData(i.downSample(i.mapDimension(u.dim),1/f,p,vh))}}}}}function fh(a){a.registerChartView(uh),a.registerSeriesModel(Xu),a.registerLayout(hh("line")),a.registerVisual({seriesType:"line",reset:function(e){var t=e.getData(),r=e.getModel("lineStyle").getLineStyle();r&&!r.stroke&&(r.stroke=t.getVisual("style").fill),t.setVisual("legendLineStyle",r)}}),a.registerProcessor(a.PRIORITY.PROCESSOR.STATISTIC,no("line"))}var Or=function(a){R(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(t,r){return jr(null,this,{useEncodeDefaulter:!0})},e.prototype.getMarkerPosition=function(t,r,i){var n=this.coordinateSystem;if(n&&n.clampData){var o=n.clampData(t),s=n.dataToPoint(o);if(i)T(n.getAxes(),function(v,f){if(v.type==="category"&&r!=null){var p=v.getTicksCoords(),d=v.getTickModel().get("alignWithLabel"),m=o[f],g=r[f]==="x1"||r[f]==="y1";if(g&&!d&&(m+=1),p.length<2)return;if(p.length===2){s[f]=v.toGlobalCoord(v.getExtent()[g?1:0]);return}for(var y=void 0,_=void 0,x=1,b=0;b<p.length;b++){var w=p[b].coord,S=b===p.length-1?p[b-1].tickValue+x:p[b].tickValue;if(S===m){_=w;break}else if(S<m)y=w;else if(y!=null&&S>m){_=(w+y)/2;break}b===1&&(x=S-p[0].tickValue)}_==null&&(y?y&&(_=p[p.length-1].coord):_=p[0].coord),s[f]=v.toGlobalCoord(_)}});else{var l=this.getData(),u=l.getLayout("offset"),h=l.getLayout("size"),c=n.getBaseAxis().isHorizontal()?0:1;s[c]+=u+h/2}return s}return[NaN,NaN]},e.type="series.__base_bar__",e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},e}(ue);ue.registerClass(Or);var ph=function(a){R(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(){return jr(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},e.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},e.prototype.getProgressiveThreshold=function(){var t=this.get("progressiveThreshold"),r=this.get("largeThreshold");return r>t&&(t=r),t},e.prototype.brushSelector=function(t,r,i){return i.rect(r.getItemLayout(t))},e.type="series.bar",e.dependencies=["grid","polar"],e.defaultOption=gn(Or.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),e}(Or),dh=function(){function a(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return a}(),Ja=function(a){R(e,a);function e(t){var r=a.call(this,t)||this;return r.type="sausage",r}return e.prototype.getDefaultShape=function(){return new dh},e.prototype.buildPath=function(t,r){var i=r.cx,n=r.cy,o=Math.max(r.r0||0,0),s=Math.max(r.r,0),l=(s-o)*.5,u=o+l,h=r.startAngle,c=r.endAngle,v=r.clockwise,f=Math.PI*2,p=v?c-h<f:h-c<f;p||(h=c-(v?f:-f));var d=Math.cos(h),m=Math.sin(h),g=Math.cos(c),y=Math.sin(c);p?(t.moveTo(d*o+i,m*o+n),t.arc(d*u+i,m*u+n,l,-Math.PI+h,h,!v)):t.moveTo(d*s+i,m*s+n),t.arc(i,n,s,h,c,!v),t.arc(g*u+i,y*u+n,l,c-Math.PI*2,c-Math.PI,!v),o!==0&&t.arc(i,n,o,c,h,v)},e}(me);function gh(a,e){e=e||{};var t=e.isRoundCap;return function(r,i,n){var o=i.position;if(!o||o instanceof Array)return xa(r,i,n);var s=a(o),l=i.distance!=null?i.distance:5,u=this.shape,h=u.cx,c=u.cy,v=u.r,f=u.r0,p=(v+f)/2,d=u.startAngle,m=u.endAngle,g=(d+m)/2,y=t?Math.abs(v-f)/2:0,_=Math.cos,x=Math.sin,b=h+v*_(d),w=c+v*x(d),S="left",D="top";switch(s){case"startArc":b=h+(f-l)*_(g),w=c+(f-l)*x(g),S="center",D="top";break;case"insideStartArc":b=h+(f+l)*_(g),w=c+(f+l)*x(g),S="center",D="bottom";break;case"startAngle":b=h+p*_(d)+Ce(d,l+y,!1),w=c+p*x(d)+Le(d,l+y,!1),S="right",D="middle";break;case"insideStartAngle":b=h+p*_(d)+Ce(d,-l+y,!1),w=c+p*x(d)+Le(d,-l+y,!1),S="left",D="middle";break;case"middle":b=h+p*_(g),w=c+p*x(g),S="center",D="middle";break;case"endArc":b=h+(v+l)*_(g),w=c+(v+l)*x(g),S="center",D="bottom";break;case"insideEndArc":b=h+(v-l)*_(g),w=c+(v-l)*x(g),S="center",D="top";break;case"endAngle":b=h+p*_(m)+Ce(m,l+y,!0),w=c+p*x(m)+Le(m,l+y,!0),S="left",D="middle";break;case"insideEndAngle":b=h+p*_(m)+Ce(m,-l+y,!0),w=c+p*x(m)+Le(m,-l+y,!0),S="right",D="middle";break;default:return xa(r,i,n)}return r=r||{},r.x=b,r.y=w,r.align=S,r.verticalAlign=D,r}}function mh(a,e,t,r){if(Ot(r)){a.setTextConfig({rotation:r});return}else if(G(e)){a.setTextConfig({rotation:0});return}var i=a.shape,n=i.clockwise?i.startAngle:i.endAngle,o=i.clockwise?i.endAngle:i.startAngle,s=(n+o)/2,l,u=t(e);switch(u){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":l=s;break;case"startAngle":case"insideStartAngle":l=n;break;case"endAngle":case"insideEndAngle":l=o;break;default:a.setTextConfig({rotation:0});return}var h=Math.PI*1.5-l;u==="middle"&&h>Math.PI/2&&h<Math.PI*1.5&&(h-=Math.PI),a.setTextConfig({rotation:h})}function Ce(a,e,t){return e*Math.sin(a)*(t?-1:1)}function Le(a,e,t){return e*Math.cos(a)*(t?1:-1)}function yh(a,e,t){var r=a.get("borderRadius");if(r==null)return{cornerRadius:0};G(r)||(r=[r,r,r,r]);var i=Math.abs(e.r||0-e.r0||0);return{cornerRadius:z(r,function(n){return wr(n,i)})}}var or=Math.max,sr=Math.min;function _h(a,e){var t=a.getArea&&a.getArea();if(Ke(a,"cartesian2d")){var r=a.getBaseAxis();if(r.type!=="category"||!r.onBand){var i=e.getLayout("bandWidth");r.isHorizontal()?(t.x-=i,t.width+=i*2):(t.y-=i,t.height+=i*2)}}return t}var xh=function(a){R(e,a);function e(){var t=a.call(this)||this;return t.type=e.type,t._isFirstFrame=!0,t}return e.prototype.render=function(t,r,i,n){this._model=t,this._removeOnRenderedListener(i),this._updateDrawMode(t);var o=t.get("coordinateSystem");(o==="cartesian2d"||o==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(t,r,i):this._renderNormal(t,r,i,n))},e.prototype.incrementalPrepareRender=function(t){this._clear(),this._updateDrawMode(t),this._updateLargeClip(t)},e.prototype.incrementalRender=function(t,r){this._progressiveEls=[],this._incrementalRenderLarge(t,r)},e.prototype.eachRendered=function(t){Zr(this._progressiveEls||this.group,t)},e.prototype._updateDrawMode=function(t){var r=t.pipelineContext.large;(this._isLargeDraw==null||r!==this._isLargeDraw)&&(this._isLargeDraw=r,this._clear())},e.prototype._renderNormal=function(t,r,i,n){var o=this.group,s=t.getData(),l=this._data,u=t.coordinateSystem,h=u.getBaseAxis(),c;u.type==="cartesian2d"?c=h.isHorizontal():u.type==="polar"&&(c=h.dim==="angle");var v=t.isAnimationEnabled()?t:null,f=bh(t,u);f&&this._enableRealtimeSort(f,s,i);var p=t.get("clip",!0)||f,d=_h(u,s);o.removeClipPath();var m=t.get("roundCap",!0),g=t.get("showBackground",!0),y=t.getModel("backgroundStyle"),_=y.get("borderRadius")||0,x=[],b=this._backgroundEls,w=n&&n.isInitSort,S=n&&n.type==="changeAxisOrder";function D(A){var M=Ie[u.type](s,A),L=Ih(u,c,M);return L.useStyle(y.getItemStyle()),u.type==="cartesian2d"?L.setShape("r",_):L.setShape("cornerRadius",_),x[A]=L,L}s.diff(l).add(function(A){var M=s.getItemModel(A),L=Ie[u.type](s,A,M);if(g&&D(A),!(!s.hasValue(A)||!ai[u.type](L))){var P=!1;p&&(P=Qa[u.type](d,L));var k=ti[u.type](t,s,A,L,c,v,h.model,!1,m);f&&(k.forceLabelAnimation=!0),ii(k,s,A,M,L,t,c,u.type==="polar"),w?k.attr({shape:L}):f?ei(f,v,k,L,A,c,!1,!1):_t(k,{shape:L},t,A),s.setItemGraphicEl(A,k),o.add(k),k.ignore=P}}).update(function(A,M){var L=s.getItemModel(A),P=Ie[u.type](s,A,L);if(g){var k=void 0;b.length===0?k=D(M):(k=b[M],k.useStyle(y.getItemStyle()),u.type==="cartesian2d"?k.setShape("r",_):k.setShape("cornerRadius",_),x[A]=k);var B=Ie[u.type](s,A),V=so(c,B,u);nt(k,{shape:V},v,A)}var O=l.getItemGraphicEl(M);if(!s.hasValue(A)||!ai[u.type](P)){o.remove(O);return}var E=!1;if(p&&(E=Qa[u.type](d,P),E&&o.remove(O)),O?pn(O):O=ti[u.type](t,s,A,P,c,v,h.model,!!O,m),f&&(O.forceLabelAnimation=!0),S){var N=O.getTextContent();if(N){var W=dn(N);W.prevValue!=null&&(W.prevValue=W.value)}}else ii(O,s,A,L,P,t,c,u.type==="polar");w?O.attr({shape:P}):f?ei(f,v,O,P,A,c,!0,S):nt(O,{shape:P},t,A,null),s.setItemGraphicEl(A,O),O.ignore=E,o.add(O)}).remove(function(A){var M=l.getItemGraphicEl(A);M&&ba(M,t,A)}).execute();var I=this._backgroundGroup||(this._backgroundGroup=new rt);I.removeAll();for(var C=0;C<x.length;++C)I.add(x[C]);o.add(I),this._backgroundEls=x,this._data=s},e.prototype._renderLarge=function(t,r,i){this._clear(),oi(t,this.group),this._updateLargeClip(t)},e.prototype._incrementalRenderLarge=function(t,r){this._removeBackground(),oi(r,this.group,this._progressiveEls,!0)},e.prototype._updateLargeClip=function(t){var r=t.get("clip",!0)&&Qu(t.coordinateSystem,!1,t),i=this.group;r?i.setClipPath(r):i.removeClipPath()},e.prototype._enableRealtimeSort=function(t,r,i){var n=this;if(r.count()){var o=t.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(r,t,i),this._isFirstFrame=!1;else{var s=function(l){var u=r.getItemGraphicEl(l),h=u&&u.shape;return h&&Math.abs(o.isHorizontal()?h.height:h.width)||0};this._onRendered=function(){n._updateSortWithinSameData(r,s,o,i)},i.getZr().on("rendered",this._onRendered)}}},e.prototype._dataSort=function(t,r,i){var n=[];return t.each(t.mapDimension(r.dim),function(o,s){var l=i(s);l=l??NaN,n.push({dataIndex:s,mappedValue:l,ordinalNumber:o})}),n.sort(function(o,s){return s.mappedValue-o.mappedValue}),{ordinalNumbers:z(n,function(o){return o.ordinalNumber})}},e.prototype._isOrderChangedWithinSameData=function(t,r,i){for(var n=i.scale,o=t.mapDimension(i.dim),s=Number.MAX_VALUE,l=0,u=n.getOrdinalMeta().categories.length;l<u;++l){var h=t.rawIndexOf(o,n.getRawOrdinalNumber(l)),c=h<0?Number.MIN_VALUE:r(t.indexOfRawIndex(h));if(c>s)return!0;s=c}return!1},e.prototype._isOrderDifferentInView=function(t,r){for(var i=r.scale,n=i.getExtent(),o=Math.max(0,n[0]),s=Math.min(n[1],i.getOrdinalMeta().categories.length-1);o<=s;++o)if(t.ordinalNumbers[o]!==i.getRawOrdinalNumber(o))return!0},e.prototype._updateSortWithinSameData=function(t,r,i,n){if(this._isOrderChangedWithinSameData(t,r,i)){var o=this._dataSort(t,i,r);this._isOrderDifferentInView(o,i)&&(this._removeOnRenderedListener(n),n.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",axisId:i.index,sortInfo:o}))}},e.prototype._dispatchInitSort=function(t,r,i){var n=r.baseAxis,o=this._dataSort(t,n,function(s){return t.get(t.mapDimension(r.otherAxis.dim),s)});i.dispatchAction({type:"changeAxisOrder",componentType:n.dim+"Axis",isInitSort:!0,axisId:n.index,sortInfo:o})},e.prototype.remove=function(t,r){this._clear(this._model),this._removeOnRenderedListener(r)},e.prototype.dispose=function(t,r){this._removeOnRenderedListener(r)},e.prototype._removeOnRenderedListener=function(t){this._onRendered&&(t.getZr().off("rendered",this._onRendered),this._onRendered=null)},e.prototype._clear=function(t){var r=this.group,i=this._data;t&&t.isAnimationEnabled()&&i&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],i.eachItemGraphicEl(function(n){ba(n,t,Y(n).dataIndex)})):r.removeAll(),this._data=null,this._isFirstFrame=!0},e.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},e.type="bar",e}(Ht),Qa={cartesian2d:function(a,e){var t=e.width<0?-1:1,r=e.height<0?-1:1;t<0&&(e.x+=e.width,e.width=-e.width),r<0&&(e.y+=e.height,e.height=-e.height);var i=a.x+a.width,n=a.y+a.height,o=or(e.x,a.x),s=sr(e.x+e.width,i),l=or(e.y,a.y),u=sr(e.y+e.height,n),h=s<o,c=u<l;return e.x=h&&o>i?s:o,e.y=c&&l>n?u:l,e.width=h?0:s-o,e.height=c?0:u-l,t<0&&(e.x+=e.width,e.width=-e.width),r<0&&(e.y+=e.height,e.height=-e.height),h||c},polar:function(a,e){var t=e.r0<=e.r?1:-1;if(t<0){var r=e.r;e.r=e.r0,e.r0=r}var i=sr(e.r,a.r),n=or(e.r0,a.r0);e.r=i,e.r0=n;var o=i-n<0;if(t<0){var r=e.r;e.r=e.r0,e.r0=r}return o}},ti={cartesian2d:function(a,e,t,r,i,n,o,s,l){var u=new ft({shape:F({},r),z2:1});if(u.__dataIndex=t,u.name="item",n){var h=u.shape,c=i?"height":"width";h[c]=0}return u},polar:function(a,e,t,r,i,n,o,s,l){var u=!i&&l?Ja:$r,h=new u({shape:r,z2:1});h.name="item";var c=oo(i);if(h.calculateTextPosition=gh(c,{isRoundCap:u===Ja}),n){var v=h.shape,f=i?"r":"endAngle",p={};v[f]=i?r.r0:r.startAngle,p[f]=r[f],(s?nt:_t)(h,{shape:p},n)}return h}};function bh(a,e){var t=a.get("realtimeSort",!0),r=e.getBaseAxis();if(t&&r.type==="category"&&e.type==="cartesian2d")return{baseAxis:r,otherAxis:e.getOtherAxis(r)}}function ei(a,e,t,r,i,n,o,s){var l,u;n?(u={x:r.x,width:r.width},l={y:r.y,height:r.height}):(u={y:r.y,height:r.height},l={x:r.x,width:r.width}),s||(o?nt:_t)(t,{shape:l},e,i,null);var h=e?a.baseAxis.model:null;(o?nt:_t)(t,{shape:u},h,i)}function ri(a,e){for(var t=0;t<e.length;t++)if(!isFinite(a[e[t]]))return!0;return!1}var Sh=["x","y","width","height"],wh=["cx","cy","r","startAngle","endAngle"],ai={cartesian2d:function(a){return!ri(a,Sh)},polar:function(a){return!ri(a,wh)}},Ie={cartesian2d:function(a,e,t){var r=a.getItemLayout(e),i=t?Dh(t,r):0,n=r.width>0?1:-1,o=r.height>0?1:-1;return{x:r.x+n*i/2,y:r.y+o*i/2,width:r.width-n*i,height:r.height-o*i}},polar:function(a,e,t){var r=a.getItemLayout(e);return{cx:r.cx,cy:r.cy,r0:r.r0,r:r.r,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}}};function Ah(a){return a.startAngle!=null&&a.endAngle!=null&&a.startAngle===a.endAngle}function oo(a){return function(e){var t=e?"Arc":"Angle";return function(r){switch(r){case"start":case"insideStart":case"end":case"insideEnd":return r+t;default:return r}}}(a)}function ii(a,e,t,r,i,n,o,s){var l=e.getItemVisual(t,"style");if(s){if(!n.get("roundCap")){var h=a.shape,c=yh(r.getModel("itemStyle"),h);F(h,c),a.setShape(h)}}else{var u=r.get(["itemStyle","borderRadius"])||0;a.setShape("r",u)}a.useStyle(l);var v=r.getShallow("cursor");v&&a.attr("cursor",v);var f=s?o?i.r>=i.r0?"endArc":"startArc":i.endAngle>=i.startAngle?"endAngle":"startAngle":o?i.height>=0?"bottom":"top":i.width>=0?"right":"left",p=$t(r);ge(a,p,{labelFetcher:n,labelDataIndex:t,defaultText:aa(n.getData(),t),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:f});var d=a.getTextContent();if(s&&d){var m=r.get(["label","position"]);a.textConfig.inside=m==="middle"?!0:null,mh(a,m==="outside"?f:m,oo(o),r.get(["label","rotate"]))}Rs(d,p,n.getRawValue(t),function(y){return Jn(e,y)});var g=r.getModel(["emphasis"]);he(a,g.get("focus"),g.get("blurScope"),g.get("disabled")),Lr(a,r),Ah(i)&&(a.style.fill="none",a.style.stroke="none",T(a.states,function(y){y.style&&(y.style.fill=y.style.stroke="none")}))}function Dh(a,e){var t=a.get(["itemStyle","borderColor"]);if(!t||t==="none")return 0;var r=a.get(["itemStyle","borderWidth"])||0,i=isNaN(e.width)?Number.MAX_VALUE:Math.abs(e.width),n=isNaN(e.height)?Number.MAX_VALUE:Math.abs(e.height);return Math.min(r,i,n)}var Ch=function(){function a(){}return a}(),ni=function(a){R(e,a);function e(t){var r=a.call(this,t)||this;return r.type="largeBar",r}return e.prototype.getDefaultShape=function(){return new Ch},e.prototype.buildPath=function(t,r){for(var i=r.points,n=this.baseDimIdx,o=1-this.baseDimIdx,s=[],l=[],u=this.barWidth,h=0;h<i.length;h+=3)l[n]=u,l[o]=i[h+2],s[n]=i[h+n],s[o]=i[h+o],t.rect(s[0],s[1],l[0],l[1])},e}(me);function oi(a,e,t,r){var i=a.getData(),n=i.getLayout("valueAxisHorizontal")?1:0,o=i.getLayout("largeDataIndices"),s=i.getLayout("size"),l=a.getModel("backgroundStyle"),u=i.getLayout("largeBackgroundPoints");if(u){var h=new ni({shape:{points:u},incremental:!!r,silent:!0,z2:0});h.baseDimIdx=n,h.largeDataIndices=o,h.barWidth=s,h.useStyle(l.getItemStyle()),e.add(h),t&&t.push(h)}var c=new ni({shape:{points:i.getLayout("largePoints")},incremental:!!r,ignoreCoarsePointer:!0,z2:1});c.baseDimIdx=n,c.largeDataIndices=o,c.barWidth=s,e.add(c),c.useStyle(i.getVisual("style")),c.style.stroke=null,Y(c).seriesIndex=a.seriesIndex,a.get("silent")||(c.on("mousedown",si),c.on("mousemove",si)),t&&t.push(c)}var si=Ns(function(a){var e=this,t=Lh(e,a.offsetX,a.offsetY);Y(e).dataIndex=t>=0?t:null},30,!1);function Lh(a,e,t){for(var r=a.baseDimIdx,i=1-r,n=a.shape.points,o=a.largeDataIndices,s=[],l=[],u=a.barWidth,h=0,c=n.length/3;h<c;h++){var v=h*3;if(l[r]=u,l[i]=n[v+2],s[r]=n[v+r],s[i]=n[v+i],l[i]<0&&(s[i]+=l[i],l[i]=-l[i]),e>=s[0]&&e<=s[0]+l[0]&&t>=s[1]&&t<=s[1]+l[1])return o[h]}return-1}function so(a,e,t){if(Ke(t,"cartesian2d")){var r=e,i=t.getArea();return{x:a?r.x:i.x,y:a?i.y:r.y,width:a?r.width:i.width,height:a?i.height:r.height}}else{var i=t.getArea(),n=e;return{cx:i.cx,cy:i.cy,r0:a?i.r0:n.r0,r:a?i.r:n.r,startAngle:a?n.startAngle:0,endAngle:a?n.endAngle:Math.PI*2}}}function Ih(a,e,t){var r=a.type==="polar"?$r:ft;return new r({shape:so(e,t,a),silent:!0,z2:0})}function Th(a){a.registerChartView(xh),a.registerSeriesModel(ph),a.registerLayout(a.PRIORITY.VISUAL.LAYOUT,U(eu,"bar")),a.registerLayout(a.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,ru("bar")),a.registerProcessor(a.PRIORITY.PROCESSOR.STATISTIC,no("bar")),a.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(e,t){var r=e.componentType||"series";t.eachComponent({mainType:r,query:e},function(i){e.sortInfo&&i.axis.setCategorySortInfo(e.sortInfo)})})}var Mh=function(a){R(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.type="grid",e.dependencies=["xAxis","yAxis"],e.layoutMode="box",e.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},e}(ct),Er=function(a){R(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",Lt).models[0]},e.type="cartesian2dAxis",e}(ct);mn(Er,Du);var lo={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,showMinLine:!0,showMaxLine:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},kh=J({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},lo),na=J({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},lo),Ph=J({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},na),Oh=Q({logBase:10},na);const Eh={category:kh,value:na,time:Ph,log:Oh};var Rh={value:1,category:1,time:1,log:1};function li(a,e,t,r){T(Rh,function(i,n){var o=J(J({},Eh[n],!0),r,!0),s=function(l){R(u,l);function u(){var h=l!==null&&l.apply(this,arguments)||this;return h.type=e+"Axis."+n,h}return u.prototype.mergeDefaultAndTheme=function(h,c){var v=Bs(this),f=v?yn(h):{},p=c.getTheme();J(h,p.get(n+"Axis")),J(h,this.getDefaultOption()),h.type=ui(h),v&&_n(h,f,v)},u.prototype.optionUpdated=function(){var h=this.option;h.type==="category"&&(this.__ordinalMeta=Mr.createByAxisModel(this))},u.prototype.getCategories=function(h){var c=this.option;if(c.type==="category")return h?c.data:this.__ordinalMeta.categories},u.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},u.type=e+"Axis."+n,u.defaultOption=o,u}(t);a.registerComponentModel(s)}),a.registerSubTypeDefaulter(e+"Axis",ui)}function ui(a){return a.type||(a.data?"category":"value")}var Nh=function(){function a(e){this.type="cartesian",this._dimList=[],this._axes={},this.name=e||""}return a.prototype.getAxis=function(e){return this._axes[e]},a.prototype.getAxes=function(){return z(this._dimList,function(e){return this._axes[e]},this)},a.prototype.getAxesByScale=function(e){return e=e.toLowerCase(),Gt(this.getAxes(),function(t){return t.scale.type===e})},a.prototype.addAxis=function(e){var t=e.dim;this._axes[t]=e,this._dimList.push(t)},a}(),Rr=["x","y"];function hi(a){return a.type==="interval"||a.type==="time"}var Bh=function(a){R(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="cartesian2d",t.dimensions=Rr,t}return e.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var t=this.getAxis("x").scale,r=this.getAxis("y").scale;if(!(!hi(t)||!hi(r))){var i=t.getExtent(),n=r.getExtent(),o=this.dataToPoint([i[0],n[0]]),s=this.dataToPoint([i[1],n[1]]),l=i[1]-i[0],u=n[1]-n[0];if(!(!l||!u)){var h=(s[0]-o[0])/l,c=(s[1]-o[1])/u,v=o[0]-i[0]*h,f=o[1]-n[0]*c,p=this._transform=[h,0,0,c,v,f];this._invTransform=Gs([],p)}}},e.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},e.prototype.containPoint=function(t){var r=this.getAxis("x"),i=this.getAxis("y");return r.contain(r.toLocalCoord(t[0]))&&i.contain(i.toLocalCoord(t[1]))},e.prototype.containData=function(t){return this.getAxis("x").containData(t[0])&&this.getAxis("y").containData(t[1])},e.prototype.containZone=function(t,r){var i=this.dataToPoint(t),n=this.dataToPoint(r),o=this.getArea(),s=new It(i[0],i[1],n[0]-i[0],n[1]-i[1]);return o.intersect(s)},e.prototype.dataToPoint=function(t,r,i){i=i||[];var n=t[0],o=t[1];if(this._transform&&n!=null&&isFinite(n)&&o!=null&&isFinite(o))return Yt(i,t,this._transform);var s=this.getAxis("x"),l=this.getAxis("y");return i[0]=s.toGlobalCoord(s.dataToCoord(n,r)),i[1]=l.toGlobalCoord(l.dataToCoord(o,r)),i},e.prototype.clampData=function(t,r){var i=this.getAxis("x").scale,n=this.getAxis("y").scale,o=i.getExtent(),s=n.getExtent(),l=i.parse(t[0]),u=n.parse(t[1]);return r=r||[],r[0]=Math.min(Math.max(Math.min(o[0],o[1]),l),Math.max(o[0],o[1])),r[1]=Math.min(Math.max(Math.min(s[0],s[1]),u),Math.max(s[0],s[1])),r},e.prototype.pointToData=function(t,r){var i=[];if(this._invTransform)return Yt(i,t,this._invTransform);var n=this.getAxis("x"),o=this.getAxis("y");return i[0]=n.coordToData(n.toLocalCoord(t[0]),r),i[1]=o.coordToData(o.toLocalCoord(t[1]),r),i},e.prototype.getOtherAxis=function(t){return this.getAxis(t.dim==="x"?"y":"x")},e.prototype.getArea=function(t){t=t||0;var r=this.getAxis("x").getGlobalExtent(),i=this.getAxis("y").getGlobalExtent(),n=Math.min(r[0],r[1])-t,o=Math.min(i[0],i[1])-t,s=Math.max(r[0],r[1])-n+t,l=Math.max(i[0],i[1])-o+t;return new It(n,o,s,l)},e}(Nh),Gh=function(a){R(e,a);function e(t,r,i,n,o){var s=a.call(this,t,r,i)||this;return s.index=0,s.type=n||"value",s.position=o||"bottom",s}return e.prototype.isHorizontal=function(){var t=this.position;return t==="top"||t==="bottom"},e.prototype.getGlobalExtent=function(t){var r=this.getExtent();return r[0]=this.toGlobalCoord(r[0]),r[1]=this.toGlobalCoord(r[1]),t&&r[0]>r[1]&&r.reverse(),r},e.prototype.pointToData=function(t,r){return this.coordToData(this.toLocalCoord(t[this.dim==="x"?0:1]),r)},e.prototype.setCategorySortInfo=function(t){if(this.type!=="category")return!1;this.model.option.categorySortInfo=t,this.scale.setSortInfo(t)},e}(Ru);function Nr(a,e,t){t=t||{};var r=a.coordinateSystem,i=e.axis,n={},o=i.getAxesOnZeroOf()[0],s=i.position,l=o?"onZero":s,u=i.dim,h=r.getRect(),c=[h.x,h.x+h.width,h.y,h.y+h.height],v={left:0,right:1,top:0,bottom:1,onZero:2},f=e.get("offset")||0,p=u==="x"?[c[2]-f,c[3]+f]:[c[0]-f,c[1]+f];if(o){var d=o.toGlobalCoord(o.dataToCoord(0));p[v.onZero]=Math.max(Math.min(d,p[1]),p[0])}n.position=[u==="y"?p[v[l]]:c[0],u==="x"?p[v[l]]:c[3]],n.rotation=Math.PI/2*(u==="x"?0:1);var m={top:-1,bottom:1,left:-1,right:1};n.labelDirection=n.tickDirection=n.nameDirection=m[s],n.labelOffset=o?p[v[s]]-p[v.onZero]:0,e.get(["axisTick","inside"])&&(n.tickDirection=-n.tickDirection),Ut(t.labelInside,e.get(["axisLabel","inside"]))&&(n.labelDirection=-n.labelDirection);var g=e.get(["axisLabel","rotate"]);return n.labelRotate=l==="top"?-g:g,n.z2=1,n}function ci(a){return a.get("coordinateSystem")==="cartesian2d"}function vi(a){var e={xAxisModel:null,yAxisModel:null};return T(e,function(t,r){var i=r.replace(/Model$/,""),n=a.getReferringComponents(i,Lt).models[0];e[r]=n}),e}var lr=Math.log;function zh(a,e,t){var r=Kt.prototype,i=r.getTicks.call(t),n=r.getTicks.call(t,!0),o=i.length-1,s=r.getInterval.call(t),l=Wn(a,e),u=l.extent,h=l.fixMin,c=l.fixMax;if(a.type==="log"){var v=lr(a.base);u=[lr(u[0])/v,lr(u[1])/v]}a.setExtent(u[0],u[1]),a.calcNiceExtent({splitNumber:o,fixMin:h,fixMax:c});var f=r.getExtent.call(a);h&&(u[0]=f[0]),c&&(u[1]=f[1]);var p=r.getInterval.call(a),d=u[0],m=u[1];if(h&&c)p=(m-d)/o;else if(h)for(m=u[0]+p*o;m<u[1]&&isFinite(m)&&isFinite(u[1]);)p=rr(p),m=u[0]+p*o;else if(c)for(d=u[1]-p*o;d>u[0]&&isFinite(d)&&isFinite(u[0]);)p=rr(p),d=u[1]-p*o;else{var g=a.getTicks().length-1;g>o&&(p=rr(p));var y=p*o;m=Math.ceil(u[1]/p)*p,d=Z(m-y),d<0&&u[0]>=0?(d=0,m=Z(y)):m>0&&u[1]<=0&&(m=0,d=-Z(y))}var _=(i[0].value-n[0].value)/s,x=(i[o].value-n[o].value)/s;r.setExtent.call(a,d+p*_,m+p*x),r.setInterval.call(a,p),(_||x)&&r.setNiceExtent.call(a,d+p,m-p)}var Vh=function(){function a(e,t,r){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=Rr,this._initCartesian(e,t,r),this.model=e}return a.prototype.getRect=function(){return this._rect},a.prototype.update=function(e,t){var r=this._axesMap;this._updateScale(e,this.model);function i(o){var s,l=We(o),u=l.length;if(u){for(var h=[],c=u-1;c>=0;c--){var v=+l[c],f=o[v],p=f.model,d=f.scale;kr(d)&&p.get("alignTicks")&&p.get("interval")==null?h.push(f):(za(d,p),kr(d)&&(s=f))}h.length&&(s||(s=h.pop(),za(s.scale,s.model)),T(h,function(m){zh(m.scale,m.model,s.scale)}))}}i(r.x),i(r.y);var n={};T(r.x,function(o){fi(r,"y",o,n)}),T(r.y,function(o){fi(r,"x",o,n)}),this.resize(this.model,t)},a.prototype.resize=function(e,t,r){var i=e.getBoxLayoutParams(),n=!r&&e.get("containLabel"),o=ce(i,{width:t.getWidth(),height:t.getHeight()});this._rect=o;var s=this._axesList;l(),n&&(T(s,function(u){if(!u.model.get(["axisLabel","inside"])){var h=Su(u);if(h){var c=u.isHorizontal()?"height":"width",v=u.model.get(["axisLabel","margin"]);o[c]-=h[c]+v,u.position==="top"?o.y+=h.height+v:u.position==="left"&&(o.x+=h.width+v)}}}),l()),T(this._coordsList,function(u){u.calcAffineTransform()});function l(){T(s,function(u){var h=u.isHorizontal(),c=h?[0,o.width]:[0,o.height],v=u.inverse?1:0;u.setExtent(c[v],c[1-v]),Fh(u,h?o.x:o.y)})}},a.prototype.getAxis=function(e,t){var r=this._axesMap[e];if(r!=null)return r[t||0]},a.prototype.getAxes=function(){return this._axesList.slice()},a.prototype.getCartesian=function(e,t){if(e!=null&&t!=null){var r="x"+e+"y"+t;return this._coordsMap[r]}q(e)&&(t=e.yAxisIndex,e=e.xAxisIndex);for(var i=0,n=this._coordsList;i<n.length;i++)if(n[i].getAxis("x").index===e||n[i].getAxis("y").index===t)return n[i]},a.prototype.getCartesians=function(){return this._coordsList.slice()},a.prototype.convertToPixel=function(e,t,r){var i=this._findConvertTarget(t);return i.cartesian?i.cartesian.dataToPoint(r):i.axis?i.axis.toGlobalCoord(i.axis.dataToCoord(r)):null},a.prototype.convertFromPixel=function(e,t,r){var i=this._findConvertTarget(t);return i.cartesian?i.cartesian.pointToData(r):i.axis?i.axis.coordToData(i.axis.toLocalCoord(r)):null},a.prototype._findConvertTarget=function(e){var t=e.seriesModel,r=e.xAxisModel||t&&t.getReferringComponents("xAxis",Lt).models[0],i=e.yAxisModel||t&&t.getReferringComponents("yAxis",Lt).models[0],n=e.gridModel,o=this._coordsList,s,l;if(t)s=t.coordinateSystem,ht(o,s)<0&&(s=null);else if(r&&i)s=this.getCartesian(r.componentIndex,i.componentIndex);else if(r)l=this.getAxis("x",r.componentIndex);else if(i)l=this.getAxis("y",i.componentIndex);else if(n){var u=n.coordinateSystem;u===this&&(s=this._coordsList[0])}return{cartesian:s,axis:l}},a.prototype.containPoint=function(e){var t=this._coordsList[0];if(t)return t.containPoint(e)},a.prototype._initCartesian=function(e,t,r){var i=this,n=this,o={left:!1,right:!1,top:!1,bottom:!1},s={x:{},y:{}},l={x:0,y:0};if(t.eachComponent("xAxis",u("x"),this),t.eachComponent("yAxis",u("y"),this),!l.x||!l.y){this._axesMap={},this._axesList=[];return}this._axesMap=s,T(s.x,function(h,c){T(s.y,function(v,f){var p="x"+c+"y"+f,d=new Bh(p);d.master=i,d.model=e,i._coordsMap[p]=d,i._coordsList.push(d),d.addAxis(h),d.addAxis(v)})});function u(h){return function(c,v){if(ur(c,e)){var f=c.get("position");h==="x"?f!=="top"&&f!=="bottom"&&(f=o.bottom?"top":"bottom"):f!=="left"&&f!=="right"&&(f=o.left?"right":"left"),o[f]=!0;var p=new Gh(h,xu(c),[0,0],c.get("type"),f),d=p.type==="category";p.onBand=d&&c.get("boundaryGap"),p.inverse=c.get("inverse"),c.axis=p,p.model=c,p.grid=n,p.index=v,n._axesList.push(p),s[h][v]=p,l[h]++}}}},a.prototype._updateScale=function(e,t){T(this._axesList,function(i){if(i.scale.setExtent(1/0,-1/0),i.type==="category"){var n=i.model.get("categorySortInfo");i.scale.setSortInfo(n)}}),e.eachSeries(function(i){if(ci(i)){var n=vi(i),o=n.xAxisModel,s=n.yAxisModel;if(!ur(o,t)||!ur(s,t))return;var l=this.getCartesian(o.componentIndex,s.componentIndex),u=i.getData(),h=l.getAxis("x"),c=l.getAxis("y");r(u,h),r(u,c)}},this);function r(i,n){T(Au(i,n.dim),function(o){n.scale.unionExtentFromData(i,o)})}},a.prototype.getTooltipAxes=function(e){var t=[],r=[];return T(this.getCartesians(),function(i){var n=e!=null&&e!=="auto"?i.getAxis(e):i.getBaseAxis(),o=i.getOtherAxis(n);ht(t,n)<0&&t.push(n),ht(r,o)<0&&r.push(o)}),{baseAxes:t,otherAxes:r}},a.create=function(e,t){var r=[];return e.eachComponent("grid",function(i,n){var o=new a(i,e,t);o.name="grid_"+n,o.resize(i,t,!0),i.coordinateSystem=o,r.push(o)}),e.eachSeries(function(i){if(ci(i)){var n=vi(i),o=n.xAxisModel,s=n.yAxisModel,l=o.getCoordSysModel(),u=l.coordinateSystem;i.coordinateSystem=u.getCartesian(o.componentIndex,s.componentIndex)}}),r},a.dimensions=Rr,a}();function ur(a,e){return a.getCoordSysModel()===e}function fi(a,e,t,r){t.getAxesOnZeroOf=function(){return n?[n]:[]};var i=a[e],n,o=t.model,s=o.get(["axisLine","onZero"]),l=o.get(["axisLine","onZeroAxisIndex"]);if(!s)return;if(l!=null)pi(i[l])&&(n=i[l]);else for(var u in i)if(i.hasOwnProperty(u)&&pi(i[u])&&!r[h(i[u])]){n=i[u];break}n&&(r[h(n)]=!0);function h(c){return c.dim+"_"+c.index}}function pi(a){return a&&a.type!=="category"&&a.type!=="time"&&bu(a)}function Fh(a,e){var t=a.getExtent(),r=t[0]+t[1];a.toGlobalCoord=a.dim==="x"?function(i){return i+e}:function(i){return r-i+e},a.toLocalCoord=a.dim==="x"?function(i){return i-e}:function(i){return r-i+e}}var Tt=Math.PI,Mt=function(){function a(e,t){this.group=new rt,this.opt=t,this.axisModel=e,Q(t,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var r=new rt({x:t.position[0],y:t.position[1],rotation:t.rotation});r.updateTransform(),this._transformGroup=r}return a.prototype.hasBuilder=function(e){return!!di[e]},a.prototype.add=function(e){di[e](this.opt,this.axisModel,this.group,this._transformGroup)},a.prototype.getGroup=function(){return this.group},a.innerTextLayout=function(e,t,r){var i=bn(t-e),n,o;return Ve(i)?(o=r>0?"top":"bottom",n="center"):Ve(i-Tt)?(o=r>0?"bottom":"top",n="center"):(o="middle",i>0&&i<Tt?n=r>0?"right":"left":n=r>0?"left":"right"),{rotation:i,textAlign:n,textVerticalAlign:o}},a.makeAxisEventDataBase=function(e){var t={componentType:e.mainType,componentIndex:e.componentIndex};return t[e.mainType+"Index"]=e.componentIndex,t},a.isLabelSilent=function(e){var t=e.get("tooltip");return e.get("silent")||!(e.get("triggerEvent")||t&&t.show)},a}(),di={axisLine:function(a,e,t,r){var i=e.get(["axisLine","show"]);if(i==="auto"&&a.handleAutoShown&&(i=a.handleAutoShown("axisLine")),!!i){var n=e.axis.getExtent(),o=r.transform,s=[n[0],0],l=[n[1],0],u=s[0]>l[0];o&&(Yt(s,s,o),Yt(l,l,o));var h=F({lineCap:"round"},e.getModel(["axisLine","lineStyle"]).getLineStyle()),c=new ve({shape:{x1:s[0],y1:s[1],x2:l[0],y2:l[1]},style:h,strokeContainThreshold:a.strokeContainThreshold||5,silent:!0,z2:1});ze(c.shape,c.style.lineWidth),c.anid="line",t.add(c);var v=e.get(["axisLine","symbol"]);if(v!=null){var f=e.get(["axisLine","symbolSize"]);H(v)&&(v=[v,v]),(H(f)||Ot(f))&&(f=[f,f]);var p=Ye(e.get(["axisLine","symbolOffset"])||0,f),d=f[0],m=f[1];T([{rotate:a.rotation+Math.PI/2,offset:p[0],r:0},{rotate:a.rotation-Math.PI/2,offset:p[1],r:Math.sqrt((s[0]-l[0])*(s[0]-l[0])+(s[1]-l[1])*(s[1]-l[1]))}],function(g,y){if(v[y]!=="none"&&v[y]!=null){var _=Wt(v[y],-d/2,-m/2,d,m,h.stroke,!0),x=g.r+g.offset,b=u?l:s;_.attr({rotation:g.rotate,x:b[0]+x*Math.cos(a.rotation),y:b[1]-x*Math.sin(a.rotation),silent:!0,z2:11}),t.add(_)}})}}},axisTickLabel:function(a,e,t,r){var i=Xh(t,r,e,a),n=Uh(t,r,e,a);if(Wh(e,n,i),Yh(t,r,e,a.tickDirection),e.get(["axisLabel","hideOverlap"])){var o=Bu(z(n,function(s){return{label:s,priority:s.z2,defaultAttr:{ignore:s.ignore}}}));Gu(o)}},axisName:function(a,e,t,r){var i=Ut(a.axisName,e.get("name"));if(i){var n=e.get("nameLocation"),o=a.nameDirection,s=e.getModel("nameTextStyle"),l=e.get("nameGap")||0,u=e.axis.getExtent(),h=u[0]>u[1]?-1:1,c=[n==="start"?u[0]-h*l:n==="end"?u[1]+h*l:(u[0]+u[1])/2,mi(n)?a.labelOffset+o*l:0],v,f=e.get("nameRotate");f!=null&&(f=f*Tt/180);var p;mi(n)?v=Mt.innerTextLayout(a.rotation,f??a.rotation,o):(v=Hh(a.rotation,n,f||0,u),p=a.axisNameAvailableWidth,p!=null&&(p=Math.abs(p/Math.sin(v.rotation)),!isFinite(p)&&(p=null)));var d=s.getFont(),m=e.get("nameTruncate",!0)||{},g=m.ellipsis,y=Ut(a.nameTruncateMaxWidth,m.maxWidth,p),_=new vt({x:c[0],y:c[1],rotation:v.rotation,silent:Mt.isLabelSilent(e),style:Zt(s,{text:i,font:d,overflow:"truncate",width:y,ellipsis:g,fill:s.getTextColor()||e.get(["axisLine","lineStyle","color"]),align:s.get("align")||v.textAlign,verticalAlign:s.get("verticalAlign")||v.textVerticalAlign}),z2:1});if(Kr({el:_,componentModel:e,itemName:i}),_.__fullText=i,_.anid="name",e.get("triggerEvent")){var x=Mt.makeAxisEventDataBase(e);x.targetType="axisName",x.name=i,Y(_).eventData=x}r.add(_),_.updateTransform(),t.add(_),_.decomposeTransform()}}};function Hh(a,e,t,r){var i=bn(t-a),n,o,s=r[0]>r[1],l=e==="start"&&!s||e!=="start"&&s;return Ve(i-Tt/2)?(o=l?"bottom":"top",n="center"):Ve(i-Tt*1.5)?(o=l?"top":"bottom",n="center"):(o="middle",i<Tt*1.5&&i>Tt/2?n=l?"left":"right":n=l?"right":"left"),{rotation:i,textAlign:n,textVerticalAlign:o}}function Wh(a,e,t){if(!Xn(a.axis)){var r=a.get(["axisLabel","showMinLabel"]),i=a.get(["axisLabel","showMaxLabel"]);e=e||[],t=t||[];var n=e[0],o=e[1],s=e[e.length-1],l=e[e.length-2],u=t[0],h=t[1],c=t[t.length-1],v=t[t.length-2];r===!1?(at(n),at(u)):gi(n,o)&&(r?(at(o),at(h)):(at(n),at(u))),i===!1?(at(s),at(c)):gi(l,s)&&(i?(at(l),at(v)):(at(s),at(c)))}}function at(a){a&&(a.ignore=!0)}function gi(a,e){var t=a&&a.getBoundingRect().clone(),r=e&&e.getBoundingRect().clone();if(!(!t||!r)){var i=zs([]);return xn(i,i,-a.rotation),t.applyTransform(Sa([],i,a.getLocalTransform())),r.applyTransform(Sa([],i,e.getLocalTransform())),t.intersect(r)}}function mi(a){return a==="middle"||a==="center"}function uo(a,e,t,r,i){for(var n=[],o=[],s=[],l=0;l<a.length;l++){var u=a[l].coord;o[0]=u,o[1]=0,s[0]=u,s[1]=t,e&&(Yt(o,o,e),Yt(s,s,e));var h=new ve({shape:{x1:o[0],y1:o[1],x2:s[0],y2:s[1]},style:r,z2:2,autoBatch:!0,silent:!0});ze(h.shape,h.style.lineWidth),h.anid=i+"_"+a[l].tickValue,n.push(h)}return n}function Xh(a,e,t,r){var i=t.axis,n=t.getModel("axisTick"),o=n.get("show");if(o==="auto"&&r.handleAutoShown&&(o=r.handleAutoShown("axisTick")),!(!o||i.scale.isBlank())){for(var s=n.getModel("lineStyle"),l=r.tickDirection*n.get("length"),u=i.getTicksCoords(),h=uo(u,e.transform,l,Q(s.getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])}),"ticks"),c=0;c<h.length;c++)a.add(h[c]);return h}}function Yh(a,e,t,r){var i=t.axis,n=t.getModel("minorTick");if(!(!n.get("show")||i.scale.isBlank())){var o=i.getMinorTicksCoords();if(o.length)for(var s=n.getModel("lineStyle"),l=r*n.get("length"),u=Q(s.getLineStyle(),Q(t.getModel("axisTick").getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])})),h=0;h<o.length;h++)for(var c=uo(o[h],e.transform,l,u,"minorticks_"+h),v=0;v<c.length;v++)a.add(c[v])}}function Uh(a,e,t,r){var i=t.axis,n=Ut(r.axisLabelShow,t.get(["axisLabel","show"]));if(!(!n||i.scale.isBlank())){var o=t.getModel("axisLabel"),s=o.get("margin"),l=i.getViewLabels(),u=(Ut(r.labelRotate,o.get("rotate"))||0)*Tt/180,h=Mt.innerTextLayout(r.rotation,u,r.labelDirection),c=t.getCategories&&t.getCategories(!0),v=[],f=Mt.isLabelSilent(t),p=t.get("triggerEvent");return T(l,function(d,m){var g=i.scale.type==="ordinal"?i.scale.getRawOrdinalNumber(d.tickValue):d.tickValue,y=d.formattedLabel,_=d.rawLabel,x=o;if(c&&c[g]){var b=c[g];q(b)&&b.textStyle&&(x=new Ct(b.textStyle,o,t.ecModel))}var w=x.getTextColor()||t.get(["axisLine","lineStyle","color"]),S=i.dataToCoord(g),D=x.getShallow("align",!0)||h.textAlign,I=it(x.getShallow("alignMinLabel",!0),D),C=it(x.getShallow("alignMaxLabel",!0),D),A=x.getShallow("verticalAlign",!0)||x.getShallow("baseline",!0)||h.textVerticalAlign,M=it(x.getShallow("verticalAlignMinLabel",!0),A),L=it(x.getShallow("verticalAlignMaxLabel",!0),A),P=new vt({x:S,y:r.labelOffset+r.labelDirection*s,rotation:h.rotation,silent:f,z2:10+(d.level||0),style:Zt(x,{text:y,align:m===0?I:m===l.length-1?C:D,verticalAlign:m===0?M:m===l.length-1?L:A,fill:X(w)?w(i.type==="category"?_:i.type==="value"?g+"":g,m):w})});if(P.anid="label_"+g,Kr({el:P,componentModel:t,itemName:y,formatterParamsExtra:{isTruncated:function(){return P.isTruncated},value:_,tickIndex:m}}),p){var k=Mt.makeAxisEventDataBase(t);k.targetType="axisLabel",k.value=_,k.tickIndex=m,i.type==="category"&&(k.dataIndex=g),Y(P).eventData=k}e.add(P),P.updateTransform(),v.push(P),a.add(P),P.decomposeTransform()}),v}}function Zh(a,e){var t={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return $h(t,a,e),t.seriesInvolved&&qh(t,a),t}function $h(a,e,t){var r=e.getComponent("tooltip"),i=e.getComponent("axisPointer"),n=i.get("link",!0)||[],o=[];T(t.getCoordinateSystems(),function(s){if(!s.axisPointerEnabled)return;var l=pe(s.model),u=a.coordSysAxesInfo[l]={};a.coordSysMap[l]=s;var h=s.model,c=h.getModel("tooltip",r);if(T(s.getAxes(),U(d,!1,null)),s.getTooltipAxes&&r&&c.get("show")){var v=c.get("trigger")==="axis",f=c.get(["axisPointer","type"])==="cross",p=s.getTooltipAxes(c.get(["axisPointer","axis"]));(v||f)&&T(p.baseAxes,U(d,f?"cross":!0,v)),f&&T(p.otherAxes,U(d,"cross",!1))}function d(m,g,y){var _=y.model.getModel("axisPointer",i),x=_.get("show");if(!(!x||x==="auto"&&!m&&!Br(_))){g==null&&(g=_.get("triggerTooltip")),_=m?Kh(y,c,i,e,m,g):_;var b=_.get("snap"),w=_.get("triggerEmphasis"),S=pe(y.model),D=g||b||y.type==="category",I=a.axesInfo[S]={key:S,axis:y,coordSys:s,axisPointerModel:_,triggerTooltip:g,triggerEmphasis:w,involveSeries:D,snap:b,useHandle:Br(_),seriesModels:[],linkGroup:null};u[S]=I,a.seriesInvolved=a.seriesInvolved||D;var C=jh(n,y);if(C!=null){var A=o[C]||(o[C]={axesInfo:{}});A.axesInfo[S]=I,A.mapper=n[C].mapper,I.linkGroup=A}}}})}function Kh(a,e,t,r,i,n){var o=e.getModel("axisPointer"),s=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],l={};T(s,function(v){l[v]=kt(o.get(v))}),l.snap=a.type!=="category"&&!!n,o.get("type")==="cross"&&(l.type="line");var u=l.label||(l.label={});if(u.show==null&&(u.show=!1),i==="cross"){var h=o.get(["label","show"]);if(u.show=h??!0,!n){var c=l.lineStyle=o.get("crossStyle");c&&Q(u,c.textStyle)}}return a.model.getModel("axisPointer",new Ct(l,t,r))}function qh(a,e){e.eachSeries(function(t){var r=t.coordinateSystem,i=t.get(["tooltip","trigger"],!0),n=t.get(["tooltip","show"],!0);!r||i==="none"||i===!1||i==="item"||n===!1||t.get(["axisPointer","show"],!0)===!1||T(a.coordSysAxesInfo[pe(r.model)],function(o){var s=o.axis;r.getAxis(s.dim)===s&&(o.seriesModels.push(t),o.seriesDataCount==null&&(o.seriesDataCount=0),o.seriesDataCount+=t.getData().count())})})}function jh(a,e){for(var t=e.model,r=e.dim,i=0;i<a.length;i++){var n=a[i]||{};if(hr(n[r+"AxisId"],t.id)||hr(n[r+"AxisIndex"],t.componentIndex)||hr(n[r+"AxisName"],t.name))return i}}function hr(a,e){return a==="all"||G(a)&&ht(a,e)>=0||a===e}function Jh(a){var e=oa(a);if(e){var t=e.axisPointerModel,r=e.axis.scale,i=t.option,n=t.get("status"),o=t.get("value");o!=null&&(o=r.parse(o));var s=Br(t);n==null&&(i.status=s?"show":"hide");var l=r.getExtent().slice();l[0]>l[1]&&l.reverse(),(o==null||o>l[1])&&(o=l[1]),o<l[0]&&(o=l[0]),i.value=o,s&&(i.status=e.axis.scale.isBlank()?"hide":"show")}}function oa(a){var e=(a.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return e&&e.axesInfo[pe(a)]}function Qh(a){var e=oa(a);return e&&e.axisPointerModel}function Br(a){return!!a.get(["handle","show"])}function pe(a){return a.type+"||"+a.id}var yi={},ho=function(a){R(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i,n){this.axisPointerClass&&Jh(t),a.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(t,i,!0)},e.prototype.updateAxisPointer=function(t,r,i,n){this._doUpdateAxisPointerClass(t,i,!1)},e.prototype.remove=function(t,r){var i=this._axisPointer;i&&i.remove(r)},e.prototype.dispose=function(t,r){this._disposeAxisPointer(r),a.prototype.dispose.apply(this,arguments)},e.prototype._doUpdateAxisPointerClass=function(t,r,i){var n=e.getAxisPointerClass(this.axisPointerClass);if(n){var o=Qh(t);o?(this._axisPointer||(this._axisPointer=new n)).render(t,o,r,i):this._disposeAxisPointer(r)}},e.prototype._disposeAxisPointer=function(t){this._axisPointer&&this._axisPointer.dispose(t),this._axisPointer=null},e.registerAxisPointerClass=function(t,r){yi[t]=r},e.getAxisPointerClass=function(t){return t&&yi[t]},e.type="axis",e}(yt),Gr=xt();function tc(a,e,t,r){var i=t.axis;if(!i.scale.isBlank()){var n=t.getModel("splitArea"),o=n.getModel("areaStyle"),s=o.get("color"),l=r.coordinateSystem.getRect(),u=i.getTicksCoords({tickModel:n,clamp:!0});if(u.length){var h=s.length,c=Gr(a).splitAreaColors,v=et(),f=0;if(c)for(var p=0;p<u.length;p++){var d=c.get(u[p].tickValue);if(d!=null){f=(d+(h-1)*p)%h;break}}var m=i.toGlobalCoord(u[0].coord),g=o.getAreaStyle();s=G(s)?s:[s];for(var p=1;p<u.length;p++){var y=i.toGlobalCoord(u[p].coord),_=void 0,x=void 0,b=void 0,w=void 0;i.isHorizontal()?(_=m,x=l.y,b=y-_,w=l.height,m=_+b):(_=l.x,x=m,b=l.width,w=y-x,m=x+w);var S=u[p-1].tickValue;S!=null&&v.set(S,f),e.add(new ft({anid:S!=null?"area_"+S:null,shape:{x:_,y:x,width:b,height:w},style:Q({fill:s[f]},g),autoBatch:!0,silent:!0})),f=(f+1)%h}Gr(a).splitAreaColors=v}}}function ec(a){Gr(a).splitAreaColors=null}var rc=["axisLine","axisTickLabel","axisName"],ac=["splitArea","splitLine","minorSplitLine"],co=function(a){R(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="CartesianAxisPointer",t}return e.prototype.render=function(t,r,i,n){this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new rt,this.group.add(this._axisGroup),!!t.get("show")){var s=t.getCoordSysModel(),l=Nr(s,t),u=new Mt(t,F({handleAutoShown:function(c){for(var v=s.coordinateSystem.getCartesians(),f=0;f<v.length;f++)if(kr(v[f].getOtherAxis(t.axis).scale))return!0;return!1}},l));T(rc,u.add,u),this._axisGroup.add(u.getGroup()),T(ac,function(c){t.get([c,"show"])&&ic[c](this,this._axisGroup,t,s)},this);var h=n&&n.type==="changeAxisOrder"&&n.isInitSort;h||Vs(o,this._axisGroup,t),a.prototype.render.call(this,t,r,i,n)}},e.prototype.remove=function(){ec(this)},e.type="cartesianAxis",e}(ho),ic={splitLine:function(a,e,t,r){var i=t.axis;if(!i.scale.isBlank()){var n=t.getModel("splitLine"),o=n.getModel("lineStyle"),s=o.get("color"),l=n.get("showMinLine")!==!1,u=n.get("showMaxLine")!==!1;s=G(s)?s:[s];for(var h=r.coordinateSystem.getRect(),c=i.isHorizontal(),v=0,f=i.getTicksCoords({tickModel:n}),p=[],d=[],m=o.getLineStyle(),g=0;g<f.length;g++){var y=i.toGlobalCoord(f[g].coord);if(!(g===0&&!l||g===f.length-1&&!u)){var _=f[g].tickValue;c?(p[0]=y,p[1]=h.y,d[0]=y,d[1]=h.y+h.height):(p[0]=h.x,p[1]=y,d[0]=h.x+h.width,d[1]=y);var x=v++%s.length,b=new ve({anid:_!=null?"line_"+_:null,autoBatch:!0,shape:{x1:p[0],y1:p[1],x2:d[0],y2:d[1]},style:Q({stroke:s[x]},m),silent:!0});ze(b.shape,m.lineWidth),e.add(b)}}}},minorSplitLine:function(a,e,t,r){var i=t.axis,n=t.getModel("minorSplitLine"),o=n.getModel("lineStyle"),s=r.coordinateSystem.getRect(),l=i.isHorizontal(),u=i.getMinorTicksCoords();if(u.length)for(var h=[],c=[],v=o.getLineStyle(),f=0;f<u.length;f++)for(var p=0;p<u[f].length;p++){var d=i.toGlobalCoord(u[f][p].coord);l?(h[0]=d,h[1]=s.y,c[0]=d,c[1]=s.y+s.height):(h[0]=s.x,h[1]=d,c[0]=s.x+s.width,c[1]=d);var m=new ve({anid:"minor_line_"+u[f][p].tickValue,autoBatch:!0,shape:{x1:h[0],y1:h[1],x2:c[0],y2:c[1]},style:v,silent:!0});ze(m.shape,v.lineWidth),e.add(m)}},splitArea:function(a,e,t,r){tc(a,e,t,r)}},vo=function(a){R(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.type="xAxis",e}(co),nc=function(a){R(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=vo.type,t}return e.type="yAxis",e}(co),oc=function(a){R(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="grid",t}return e.prototype.render=function(t,r){this.group.removeAll(),t.get("show")&&this.group.add(new ft({shape:t.coordinateSystem.getRect(),style:Q({fill:t.get("backgroundColor")},t.getItemStyle()),silent:!0,z2:-1}))},e.type="grid",e}(yt),_i={offset:0};function sc(a){a.registerComponentView(oc),a.registerComponentModel(Mh),a.registerCoordinateSystem("cartesian2d",Vh),li(a,"x",Er,_i),li(a,"y",Er,_i),a.registerComponentView(vo),a.registerComponentView(nc),a.registerPreprocessor(function(e){e.xAxis&&e.yAxis&&!e.grid&&(e.grid={})})}var xi=ve.prototype,cr=Fs.prototype,fo=function(){function a(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return a}();(function(a){R(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e})(fo);function vr(a){return isNaN(+a.cpx1)||isNaN(+a.cpy1)}var lc=function(a){R(e,a);function e(t){var r=a.call(this,t)||this;return r.type="ec-line",r}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new fo},e.prototype.buildPath=function(t,r){vr(r)?xi.buildPath.call(this,t,r):cr.buildPath.call(this,t,r)},e.prototype.pointAt=function(t){return vr(this.shape)?xi.pointAt.call(this,t):cr.pointAt.call(this,t)},e.prototype.tangentAt=function(t){var r=this.shape,i=vr(r)?[r.x2-r.x1,r.y2-r.y1]:cr.tangentAt.call(this,t);return Sn(i,i)},e}(me),fr=["fromSymbol","toSymbol"];function bi(a){return"_"+a+"Type"}function Si(a,e,t){var r=e.getItemVisual(t,a);if(!r||r==="none")return r;var i=e.getItemVisual(t,a+"Size"),n=e.getItemVisual(t,a+"Rotate"),o=e.getItemVisual(t,a+"Offset"),s=e.getItemVisual(t,a+"KeepAspect"),l=Ur(i),u=Ye(o||0,l);return r+l+u+(n||"")+(s||"")}function wi(a,e,t){var r=e.getItemVisual(t,a);if(!(!r||r==="none")){var i=e.getItemVisual(t,a+"Size"),n=e.getItemVisual(t,a+"Rotate"),o=e.getItemVisual(t,a+"Offset"),s=e.getItemVisual(t,a+"KeepAspect"),l=Ur(i),u=Ye(o||0,l),h=Wt(r,-l[0]/2+u[0],-l[1]/2+u[1],l[0],l[1],null,s);return h.__specifiedRotation=n==null||isNaN(n)?void 0:+n*Math.PI/180||0,h.name=a,h}}function uc(a){var e=new lc({name:"line",subPixelOptimize:!0});return zr(e.shape,a),e}function zr(a,e){a.x1=e[0][0],a.y1=e[0][1],a.x2=e[1][0],a.y2=e[1][1],a.percent=1;var t=e[2];t?(a.cpx1=t[0],a.cpy1=t[1]):(a.cpx1=NaN,a.cpy1=NaN)}var hc=function(a){R(e,a);function e(t,r,i){var n=a.call(this)||this;return n._createLine(t,r,i),n}return e.prototype._createLine=function(t,r,i){var n=t.hostModel,o=t.getItemLayout(r),s=uc(o);s.shape.percent=0,_t(s,{shape:{percent:1}},n,r),this.add(s),T(fr,function(l){var u=wi(l,t,r);this.add(u),this[bi(l)]=Si(l,t,r)},this),this._updateCommonStl(t,r,i)},e.prototype.updateData=function(t,r,i){var n=t.hostModel,o=this.childOfName("line"),s=t.getItemLayout(r),l={shape:{}};zr(l.shape,s),nt(o,l,n,r),T(fr,function(u){var h=Si(u,t,r),c=bi(u);if(this[c]!==h){this.remove(this.childOfName(u));var v=wi(u,t,r);this.add(v)}this[c]=h},this),this._updateCommonStl(t,r,i)},e.prototype.getLinePath=function(){return this.childAt(0)},e.prototype._updateCommonStl=function(t,r,i){var n=t.hostModel,o=this.childOfName("line"),s=i&&i.emphasisLineStyle,l=i&&i.blurLineStyle,u=i&&i.selectLineStyle,h=i&&i.labelStatesModels,c=i&&i.emphasisDisabled,v=i&&i.focus,f=i&&i.blurScope;if(!i||t.hasItemOption){var p=t.getItemModel(r),d=p.getModel("emphasis");s=d.getModel("lineStyle").getLineStyle(),l=p.getModel(["blur","lineStyle"]).getLineStyle(),u=p.getModel(["select","lineStyle"]).getLineStyle(),c=d.get("disabled"),v=d.get("focus"),f=d.get("blurScope"),h=$t(p)}var m=t.getItemVisual(r,"style"),g=m.stroke;o.useStyle(m),o.style.fill=null,o.style.strokeNoScale=!0,o.ensureState("emphasis").style=s,o.ensureState("blur").style=l,o.ensureState("select").style=u,T(fr,function(w){var S=this.childOfName(w);if(S){S.setColor(g),S.style.opacity=m.opacity;for(var D=0;D<Ge.length;D++){var I=Ge[D],C=o.getState(I);if(C){var A=C.style||{},M=S.ensureState(I),L=M.style||(M.style={});A.stroke!=null&&(L[S.__isEmptyBrush?"stroke":"fill"]=A.stroke),A.opacity!=null&&(L.opacity=A.opacity)}}S.markRedraw()}},this);var y=n.getRawValue(r);ge(this,h,{labelDataIndex:r,labelFetcher:{getFormattedLabel:function(w,S){return n.getFormattedLabel(w,S,t.dataType)}},inheritColor:g||"#000",defaultOpacity:m.opacity,defaultText:(y==null?t.getName(r):isFinite(y)?Z(y):y)+""});var _=this.getTextContent();if(_){var x=h.normal;_.__align=_.style.align,_.__verticalAlign=_.style.verticalAlign,_.__position=x.get("position")||"middle";var b=x.get("distance");G(b)||(b=[b,b]),_.__labelDistance=b}this.setTextConfig({position:null,local:!0,inside:!1}),he(this,v,f,c)},e.prototype.highlight=function(){vn(this)},e.prototype.downplay=function(){fn(this)},e.prototype.updateLayout=function(t,r){this.setLinePoints(t.getItemLayout(r))},e.prototype.setLinePoints=function(t){var r=this.childOfName("line");zr(r.shape,t),r.dirty()},e.prototype.beforeUpdate=function(){var t=this,r=t.childOfName("fromSymbol"),i=t.childOfName("toSymbol"),n=t.getTextContent();if(!r&&!i&&(!n||n.ignore))return;for(var o=1,s=this.parent;s;)s.scaleX&&(o/=s.scaleX),s=s.parent;var l=t.childOfName("line");if(!this.__dirty&&!l.__dirty)return;var u=l.shape.percent,h=l.pointAt(0),c=l.pointAt(u),v=Hs([],c,h);Sn(v,v);function f(C,A){var M=C.__specifiedRotation;if(M==null){var L=l.tangentAt(A);C.attr("rotation",(A===1?-1:1)*Math.PI/2-Math.atan2(L[1],L[0]))}else C.attr("rotation",M)}if(r&&(r.setPosition(h),f(r,0),r.scaleX=r.scaleY=o*u,r.markRedraw()),i&&(i.setPosition(c),f(i,1),i.scaleX=i.scaleY=o*u,i.markRedraw()),n&&!n.ignore){n.x=n.y=0,n.originX=n.originY=0;var p=void 0,d=void 0,m=n.__labelDistance,g=m[0]*o,y=m[1]*o,_=u/2,x=l.tangentAt(_),b=[x[1],-x[0]],w=l.pointAt(_);b[1]>0&&(b[0]=-b[0],b[1]=-b[1]);var S=x[0]<0?-1:1;if(n.__position!=="start"&&n.__position!=="end"){var D=-Math.atan2(x[1],x[0]);c[0]<h[0]&&(D=Math.PI+D),n.rotation=D}var I=void 0;switch(n.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":I=-y,d="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":I=y,d="top";break;default:I=0,d="middle"}switch(n.__position){case"end":n.x=v[0]*g+c[0],n.y=v[1]*y+c[1],p=v[0]>.8?"left":v[0]<-.8?"right":"center",d=v[1]>.8?"top":v[1]<-.8?"bottom":"middle";break;case"start":n.x=-v[0]*g+h[0],n.y=-v[1]*y+h[1],p=v[0]>.8?"right":v[0]<-.8?"left":"center",d=v[1]>.8?"bottom":v[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":n.x=g*S+h[0],n.y=h[1]+I,p=x[0]<0?"right":"left",n.originX=-g*S,n.originY=-I;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":n.x=w[0],n.y=w[1]+I,p="center",n.originY=-I;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":n.x=-g*S+c[0],n.y=c[1]+I,p=x[0]>=0?"right":"left",n.originX=g*S,n.originY=-I;break}n.scaleX=n.scaleY=o,n.setStyle({verticalAlign:n.__verticalAlign||d,align:n.__align||p})}},e}(rt),cc=function(){function a(e){this.group=new rt,this._LineCtor=e||hc}return a.prototype.updateData=function(e){var t=this;this._progressiveEls=null;var r=this,i=r.group,n=r._lineData;r._lineData=e,n||i.removeAll();var o=Ai(e);e.diff(n).add(function(s){t._doAdd(e,s,o)}).update(function(s,l){t._doUpdate(n,e,l,s,o)}).remove(function(s){i.remove(n.getItemGraphicEl(s))}).execute()},a.prototype.updateLayout=function(){var e=this._lineData;e&&e.eachItemGraphicEl(function(t,r){t.updateLayout(e,r)},this)},a.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=Ai(e),this._lineData=null,this.group.removeAll()},a.prototype.incrementalUpdate=function(e,t){this._progressiveEls=[];function r(s){!s.isGroup&&!vc(s)&&(s.incremental=!0,s.ensureState("emphasis").hoverLayer=!0)}for(var i=e.start;i<e.end;i++){var n=t.getItemLayout(i);if(pr(n)){var o=new this._LineCtor(t,i,this._seriesScope);o.traverse(r),this.group.add(o),t.setItemGraphicEl(i,o),this._progressiveEls.push(o)}}},a.prototype.remove=function(){this.group.removeAll()},a.prototype.eachRendered=function(e){Zr(this._progressiveEls||this.group,e)},a.prototype._doAdd=function(e,t,r){var i=e.getItemLayout(t);if(pr(i)){var n=new this._LineCtor(e,t,r);e.setItemGraphicEl(t,n),this.group.add(n)}},a.prototype._doUpdate=function(e,t,r,i,n){var o=e.getItemGraphicEl(r);if(!pr(t.getItemLayout(i))){this.group.remove(o);return}o?o.updateData(t,i,n):o=new this._LineCtor(t,i,n),t.setItemGraphicEl(i,o),this.group.add(o)},a}();function vc(a){return a.animators&&a.animators.length>0}function Ai(a){var e=a.hostModel,t=e.getModel("emphasis");return{lineStyle:e.getModel("lineStyle").getLineStyle(),emphasisLineStyle:t.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:e.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:e.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:t.get("disabled"),blurScope:t.get("blurScope"),focus:t.get("focus"),labelStatesModels:$t(e)}}function Di(a){return isNaN(a[0])||isNaN(a[1])}function pr(a){return a&&!Di(a[0])&&!Di(a[1])}var Nt=xt(),Ci=kt,dr=j,fc=function(){function a(){this._dragging=!1,this.animationThreshold=15}return a.prototype.render=function(e,t,r,i){var n=t.get("value"),o=t.get("status");if(this._axisModel=e,this._axisPointerModel=t,this._api=r,!(!i&&this._lastValue===n&&this._lastStatus===o)){this._lastValue=n,this._lastStatus=o;var s=this._group,l=this._handle;if(!o||o==="hide"){s&&s.hide(),l&&l.hide();return}s&&s.show(),l&&l.show();var u={};this.makeElOption(u,n,e,t,r);var h=u.graphicKey;h!==this._lastGraphicKey&&this.clear(r),this._lastGraphicKey=h;var c=this._moveAnimation=this.determineAnimation(e,t);if(!s)s=this._group=new rt,this.createPointerEl(s,u,e,t),this.createLabelEl(s,u,e,t),r.getZr().add(s);else{var v=U(Li,t,c);this.updatePointerEl(s,u,v),this.updateLabelEl(s,u,v,t)}Ti(s,t,!0),this._renderHandle(n)}},a.prototype.remove=function(e){this.clear(e)},a.prototype.dispose=function(e){this.clear(e)},a.prototype.determineAnimation=function(e,t){var r=t.get("animation"),i=e.axis,n=i.type==="category",o=t.get("snap");if(!o&&!n)return!1;if(r==="auto"||r==null){var s=this.animationThreshold;if(n&&i.getBandWidth()>s)return!0;if(o){var l=oa(e).seriesDataCount,u=i.getExtent();return Math.abs(u[0]-u[1])/l>s}return!1}return r===!0},a.prototype.makeElOption=function(e,t,r,i,n){},a.prototype.createPointerEl=function(e,t,r,i){var n=t.pointer;if(n){var o=Nt(e).pointerEl=new Ws[n.type](Ci(t.pointer));e.add(o)}},a.prototype.createLabelEl=function(e,t,r,i){if(t.label){var n=Nt(e).labelEl=new vt(Ci(t.label));e.add(n),Ii(n,i)}},a.prototype.updatePointerEl=function(e,t,r){var i=Nt(e).pointerEl;i&&t.pointer&&(i.setStyle(t.pointer.style),r(i,{shape:t.pointer.shape}))},a.prototype.updateLabelEl=function(e,t,r,i){var n=Nt(e).labelEl;n&&(n.setStyle(t.label.style),r(n,{x:t.label.x,y:t.label.y}),Ii(n,i))},a.prototype._renderHandle=function(e){if(!(this._dragging||!this.updateHandleTransform)){var t=this._axisPointerModel,r=this._api.getZr(),i=this._handle,n=t.getModel("handle"),o=t.get("status");if(!n.get("show")||!o||o==="hide"){i&&r.remove(i),this._handle=null;return}var s;this._handle||(s=!0,i=this._handle=wn(n.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(u){Xs(u.event)},onmousedown:dr(this._onHandleDragMove,this,0,0),drift:dr(this._onHandleDragMove,this),ondragend:dr(this._onHandleDragEnd,this)}),r.add(i)),Ti(i,t,!1),i.setStyle(n.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var l=n.get("size");G(l)||(l=[l,l]),i.scaleX=l[0]/2,i.scaleY=l[1]/2,An(this,"_doDispatchAxisPointer",n.get("throttle")||0,"fixRate"),this._moveHandleToValue(e,s)}},a.prototype._moveHandleToValue=function(e,t){Li(this._axisPointerModel,!t&&this._moveAnimation,this._handle,gr(this.getHandleTransform(e,this._axisModel,this._axisPointerModel)))},a.prototype._onHandleDragMove=function(e,t){var r=this._handle;if(r){this._dragging=!0;var i=this.updateHandleTransform(gr(r),[e,t],this._axisModel,this._axisPointerModel);this._payloadInfo=i,r.stopAnimation(),r.attr(gr(i)),Nt(r).lastProp=null,this._doDispatchAxisPointer()}},a.prototype._doDispatchAxisPointer=function(){var e=this._handle;if(e){var t=this._payloadInfo,r=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:t.cursorPoint[0],y:t.cursorPoint[1],tooltipOption:t.tooltipOption,axesInfo:[{axisDim:r.axis.dim,axisIndex:r.componentIndex}]})}},a.prototype._onHandleDragEnd=function(){this._dragging=!1;var e=this._handle;if(e){var t=this._axisPointerModel.get("value");this._moveHandleToValue(t),this._api.dispatchAction({type:"hideTip"})}},a.prototype.clear=function(e){this._lastValue=null,this._lastStatus=null;var t=e.getZr(),r=this._group,i=this._handle;t&&r&&(this._lastGraphicKey=null,r&&t.remove(r),i&&t.remove(i),this._group=null,this._handle=null,this._payloadInfo=null),Tr(this,"_doDispatchAxisPointer")},a.prototype.doClear=function(){},a.prototype.buildLabel=function(e,t,r){return r=r||0,{x:e[r],y:e[1-r],width:t[r],height:t[1-r]}},a}();function Li(a,e,t,r){po(Nt(t).lastProp,r)||(Nt(t).lastProp=r,e?nt(t,r,a):(t.stopAnimation(),t.attr(r)))}function po(a,e){if(q(a)&&q(e)){var t=!0;return T(e,function(r,i){t=t&&po(a[i],r)}),!!t}else return a===e}function Ii(a,e){a[e.get(["label","show"])?"show":"hide"]()}function gr(a){return{x:a.x||0,y:a.y||0,rotation:a.rotation||0}}function Ti(a,e,t){var r=e.get("z"),i=e.get("zlevel");a&&a.traverse(function(n){n.type!=="group"&&(r!=null&&(n.z=r),i!=null&&(n.zlevel=i),n.silent=t)})}function pc(a){var e=a.get("type"),t=a.getModel(e+"Style"),r;return e==="line"?(r=t.getLineStyle(),r.fill=null):e==="shadow"&&(r=t.getAreaStyle(),r.stroke=null),r}function dc(a,e,t,r,i){var n=t.get("value"),o=go(n,e.axis,e.ecModel,t.get("seriesDataIndices"),{precision:t.get(["label","precision"]),formatter:t.get(["label","formatter"])}),s=t.getModel("label"),l=qr(s.get("padding")||0),u=s.getFont(),h=un(o,u),c=i.position,v=h.width+l[1]+l[3],f=h.height+l[0]+l[2],p=i.align;p==="right"&&(c[0]-=v),p==="center"&&(c[0]-=v/2);var d=i.verticalAlign;d==="bottom"&&(c[1]-=f),d==="middle"&&(c[1]-=f/2),gc(c,v,f,r);var m=s.get("backgroundColor");(!m||m==="auto")&&(m=e.get(["axisLine","lineStyle","color"])),a.label={x:c[0],y:c[1],style:Zt(s,{text:o,font:u,fill:s.getTextColor(),padding:l,backgroundColor:m}),z2:10}}function gc(a,e,t,r){var i=r.getWidth(),n=r.getHeight();a[0]=Math.min(a[0]+e,i)-e,a[1]=Math.min(a[1]+t,n)-t,a[0]=Math.max(a[0],0),a[1]=Math.max(a[1],0)}function go(a,e,t,r,i){a=e.scale.parse(a);var n=e.scale.getLabel({value:a},{precision:i.precision}),o=i.formatter;if(o){var s={value:ea(e,{value:a}),axisDimension:e.dim,axisIndex:e.index,seriesData:[]};T(r,function(l){var u=t.getSeriesByIndex(l.seriesIndex),h=l.dataIndexInside,c=u&&u.getDataParams(h);c&&s.seriesData.push(c)}),H(o)?n=o.replace("{value}",n):X(o)&&(n=o(s))}return n}function mo(a,e,t){var r=Zs();return xn(r,r,t.rotation),Ys(r,r,t.position),Us([a.dataToCoord(e),(t.labelOffset||0)+(t.labelDirection||1)*(t.labelMargin||0)],r)}function mc(a,e,t,r,i,n){var o=Mt.innerTextLayout(t.rotation,0,t.labelDirection);t.labelMargin=i.get(["label","margin"]),dc(e,r,i,n,{position:mo(r.axis,a,t),align:o.textAlign,verticalAlign:o.textVerticalAlign})}function yc(a,e,t){return t=t||0,{x1:a[t],y1:a[1-t],x2:e[t],y2:e[1-t]}}function _c(a,e,t){return t=t||0,{x:a[t],y:a[1-t],width:e[t],height:e[1-t]}}var xc=function(a){R(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.makeElOption=function(t,r,i,n,o){var s=i.axis,l=s.grid,u=n.get("type"),h=Mi(l,s).getOtherAxis(s).getGlobalExtent(),c=s.toGlobalCoord(s.dataToCoord(r,!0));if(u&&u!=="none"){var v=pc(n),f=bc[u](s,c,h);f.style=v,t.graphicKey=f.type,t.pointer=f}var p=Nr(l.model,i);mc(r,t,p,i,n,o)},e.prototype.getHandleTransform=function(t,r,i){var n=Nr(r.axis.grid.model,r,{labelInside:!1});n.labelMargin=i.get(["handle","margin"]);var o=mo(r.axis,t,n);return{x:o[0],y:o[1],rotation:n.rotation+(n.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(t,r,i,n){var o=i.axis,s=o.grid,l=o.getGlobalExtent(!0),u=Mi(s,o).getOtherAxis(o).getGlobalExtent(),h=o.dim==="x"?0:1,c=[t.x,t.y];c[h]+=r[h],c[h]=Math.min(l[1],c[h]),c[h]=Math.max(l[0],c[h]);var v=(u[1]+u[0])/2,f=[v,v];f[h]=c[h];var p=[{verticalAlign:"middle"},{align:"center"}];return{x:c[0],y:c[1],rotation:t.rotation,cursorPoint:f,tooltipOption:p[h]}},e}(fc);function Mi(a,e){var t={};return t[e.dim+"AxisIndex"]=e.index,a.getCartesian(t)}var bc={line:function(a,e,t){var r=yc([e,t[0]],[e,t[1]],ki(a));return{type:"Line",subPixelOptimize:!0,shape:r}},shadow:function(a,e,t){var r=Math.max(1,a.getBandWidth()),i=t[1]-t[0];return{type:"Rect",shape:_c([e-r/2,t[0]],[r,i],ki(a))}}};function ki(a){return a.dim==="x"?0:1}var Sc=function(a){R(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.type="axisPointer",e.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},e}(ct),gt=xt(),wc=T;function yo(a,e,t){if(!K.node){var r=e.getZr();gt(r).records||(gt(r).records={}),Ac(r,e);var i=gt(r).records[a]||(gt(r).records[a]={});i.handler=t}}function Ac(a,e){if(gt(a).initialized)return;gt(a).initialized=!0,t("click",U(Pi,"click")),t("mousemove",U(Pi,"mousemove")),t("globalout",Cc);function t(r,i){a.on(r,function(n){var o=Lc(e);wc(gt(a).records,function(s){s&&i(s,n,o.dispatchAction)}),Dc(o.pendings,e)})}}function Dc(a,e){var t=a.showTip.length,r=a.hideTip.length,i;t?i=a.showTip[t-1]:r&&(i=a.hideTip[r-1]),i&&(i.dispatchAction=null,e.dispatchAction(i))}function Cc(a,e,t){a.handler("leave",null,t)}function Pi(a,e,t,r){e.handler(a,t,r)}function Lc(a){var e={showTip:[],hideTip:[]},t=function(r){var i=e[r.type];i?i.push(r):(r.dispatchAction=t,a.dispatchAction(r))};return{dispatchAction:t,pendings:e}}function Vr(a,e){if(!K.node){var t=e.getZr(),r=(gt(t).records||{})[a];r&&(gt(t).records[a]=null)}}var Ic=function(a){R(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){var n=r.getComponent("tooltip"),o=t.get("triggerOn")||n&&n.get("triggerOn")||"mousemove|click";yo("axisPointer",i,function(s,l,u){o!=="none"&&(s==="leave"||o.indexOf(s)>=0)&&u({type:"updateAxisPointer",currTrigger:s,x:l&&l.offsetX,y:l&&l.offsetY})})},e.prototype.remove=function(t,r){Vr("axisPointer",r)},e.prototype.dispose=function(t,r){Vr("axisPointer",r)},e.type="axisPointer",e}(yt);function _o(a,e){var t=[],r=a.seriesIndex,i;if(r==null||!(i=e.getSeriesByIndex(r)))return{point:[]};var n=i.getData(),o=Ir(n,a);if(o==null||o<0||G(o))return{point:[]};var s=n.getItemGraphicEl(o),l=i.coordinateSystem;if(i.getTooltipPosition)t=i.getTooltipPosition(o)||[];else if(l&&l.dataToPoint)if(a.isStacked){var u=l.getBaseAxis(),h=l.getOtherAxis(u),c=h.dim,v=u.dim,f=c==="x"||c==="radius"?1:0,p=n.mapDimension(v),d=[];d[f]=n.get(p,o),d[1-f]=n.get(n.getCalculationInfo("stackResultDimension"),o),t=l.dataToPoint(d)||[]}else t=l.dataToPoint(n.getValues(z(l.dimensions,function(g){return n.mapDimension(g)}),o))||[];else if(s){var m=s.getBoundingRect().clone();m.applyTransform(s.transform),t=[m.x+m.width/2,m.y+m.height/2]}return{point:t,el:s}}var Oi=xt();function Tc(a,e,t){var r=a.currTrigger,i=[a.x,a.y],n=a,o=a.dispatchAction||j(t.dispatchAction,t),s=e.getComponent("axisPointer").coordSysAxesInfo;if(s){Be(i)&&(i=_o({seriesIndex:n.seriesIndex,dataIndex:n.dataIndex},e).point);var l=Be(i),u=n.axesInfo,h=s.axesInfo,c=r==="leave"||Be(i),v={},f={},p={list:[],map:{}},d={showPointer:U(kc,f),showTooltip:U(Pc,p)};T(s.coordSysMap,function(g,y){var _=l||g.containPoint(i);T(s.coordSysAxesInfo[y],function(x,b){var w=x.axis,S=Nc(u,x);if(!c&&_&&(!u||S)){var D=S&&S.value;D==null&&!l&&(D=w.pointToData(i)),D!=null&&Ei(x,D,d,!1,v)}})});var m={};return T(h,function(g,y){var _=g.linkGroup;_&&!f[y]&&T(_.axesInfo,function(x,b){var w=f[b];if(x!==g&&w){var S=w.value;_.mapper&&(S=g.axis.scale.parse(_.mapper(S,Ri(x),Ri(g)))),m[g.key]=S}})}),T(m,function(g,y){Ei(h[y],g,d,!0,v)}),Oc(f,h,v),Ec(p,i,a,o),Rc(h,o,t),v}}function Ei(a,e,t,r,i){var n=a.axis;if(!(n.scale.isBlank()||!n.containData(e))){if(!a.involveSeries){t.showPointer(a,e);return}var o=Mc(e,a),s=o.payloadBatch,l=o.snapToValue;s[0]&&i.seriesIndex==null&&F(i,s[0]),!r&&a.snap&&n.containData(l)&&l!=null&&(e=l),t.showPointer(a,e,s),t.showTooltip(a,o,l)}}function Mc(a,e){var t=e.axis,r=t.dim,i=a,n=[],o=Number.MAX_VALUE,s=-1;return T(e.seriesModels,function(l,u){var h=l.getData().mapDimensionsAll(r),c,v;if(l.getAxisTooltipData){var f=l.getAxisTooltipData(h,a,t);v=f.dataIndices,c=f.nestestValue}else{if(v=l.getData().indicesOfNearest(h[0],a,t.type==="category"?.5:null),!v.length)return;c=l.getData().get(h[0],v[0])}if(!(c==null||!isFinite(c))){var p=a-c,d=Math.abs(p);d<=o&&((d<o||p>=0&&s<0)&&(o=d,s=p,i=c,n.length=0),T(v,function(m){n.push({seriesIndex:l.seriesIndex,dataIndexInside:m,dataIndex:l.getData().getRawIndex(m)})}))}}),{payloadBatch:n,snapToValue:i}}function kc(a,e,t,r){a[e.key]={value:t,payloadBatch:r}}function Pc(a,e,t,r){var i=t.payloadBatch,n=e.axis,o=n.model,s=e.axisPointerModel;if(!(!e.triggerTooltip||!i.length)){var l=e.coordSys.model,u=pe(l),h=a.map[u];h||(h=a.map[u]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},a.list.push(h)),h.dataByAxis.push({axisDim:n.dim,axisIndex:o.componentIndex,axisType:o.type,axisId:o.id,value:r,valueLabelOpt:{precision:s.get(["label","precision"]),formatter:s.get(["label","formatter"])},seriesDataIndices:i.slice()})}}function Oc(a,e,t){var r=t.axesInfo=[];T(e,function(i,n){var o=i.axisPointerModel.option,s=a[n];s?(!i.useHandle&&(o.status="show"),o.value=s.value,o.seriesDataIndices=(s.payloadBatch||[]).slice()):!i.useHandle&&(o.status="hide"),o.status==="show"&&r.push({axisDim:i.axis.dim,axisIndex:i.axis.model.componentIndex,value:o.value})})}function Ec(a,e,t,r){if(Be(e)||!a.list.length){r({type:"hideTip"});return}var i=((a.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};r({type:"showTip",escapeConnect:!0,x:e[0],y:e[1],tooltipOption:t.tooltipOption,position:t.position,dataIndexInside:i.dataIndexInside,dataIndex:i.dataIndex,seriesIndex:i.seriesIndex,dataByCoordSys:a.list})}function Rc(a,e,t){var r=t.getZr(),i="axisPointerLastHighlights",n=Oi(r)[i]||{},o=Oi(r)[i]={};T(a,function(u,h){var c=u.axisPointerModel.option;c.status==="show"&&u.triggerEmphasis&&T(c.seriesDataIndices,function(v){var f=v.seriesIndex+" | "+v.dataIndex;o[f]=v})});var s=[],l=[];T(n,function(u,h){!o[h]&&l.push(u)}),T(o,function(u,h){!n[h]&&s.push(u)}),l.length&&t.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),s.length&&t.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:s})}function Nc(a,e){for(var t=0;t<(a||[]).length;t++){var r=a[t];if(e.axis.dim===r.axisDim&&e.axis.model.componentIndex===r.axisIndex)return r}}function Ri(a){var e=a.axis.model,t={},r=t.axisDim=a.axis.dim;return t.axisIndex=t[r+"AxisIndex"]=e.componentIndex,t.axisName=t[r+"AxisName"]=e.name,t.axisId=t[r+"AxisId"]=e.id,t}function Be(a){return!a||a[0]==null||isNaN(a[0])||a[1]==null||isNaN(a[1])}function xo(a){ho.registerAxisPointerClass("CartesianAxisPointer",xc),a.registerComponentModel(Sc),a.registerComponentView(Ic),a.registerPreprocessor(function(e){if(e){(!e.axisPointer||e.axisPointer.length===0)&&(e.axisPointer={});var t=e.axisPointer.link;t&&!G(t)&&(e.axisPointer.link=[t])}}),a.registerProcessor(a.PRIORITY.PROCESSOR.STATISTIC,function(e,t){e.getComponent("axisPointer").coordSysAxesInfo=Zh(e,t)}),a.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},Tc)}function Bc(a){Pt(sc),Pt(xo)}function Gc(a,e){var t=qr(e.get("padding")),r=e.getItemStyle(["color","opacity"]);return r.fill=e.get("backgroundColor"),a=new ft({shape:{x:a.x-t[3],y:a.y-t[0],width:a.width+t[1]+t[3],height:a.height+t[0]+t[2],r:e.get("borderRadius")},style:r,silent:!0,z2:-1}),a}var zc=function(a){R(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.type="tooltip",e.dependencies=["axisPointer"],e.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},e}(ct);function bo(a){var e=a.get("confine");return e!=null?!!e:a.get("renderMode")==="richText"}function So(a){if(K.domSupported){for(var e=document.documentElement.style,t=0,r=a.length;t<r;t++)if(a[t]in e)return a[t]}}var wo=So(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Vc=So(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function Ao(a,e){if(!a)return e;e=Dn(e,!0);var t=a.indexOf(e);return a=t===-1?e:"-"+a.slice(0,t)+"-"+e,a.toLowerCase()}function Fc(a,e){var t=a.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(a);return t?t[e]:null}var Hc=Ao(Vc,"transition"),sa=Ao(wo,"transform"),Wc="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(K.transform3dSupported?"will-change:transform;":"");function Xc(a){return a=a==="left"?"right":a==="right"?"left":a==="top"?"bottom":"top",a}function Yc(a,e,t){if(!H(t)||t==="inside")return"";var r=a.get("backgroundColor"),i=a.get("borderWidth");e=Xt(e);var n=Xc(t),o=Math.max(Math.round(i)*1.5,6),s="",l=sa+":",u;ht(["left","right"],n)>-1?(s+="top:50%",l+="translateY(-50%) rotate("+(u=n==="left"?-225:-45)+"deg)"):(s+="left:50%",l+="translateX(-50%) rotate("+(u=n==="top"?225:45)+"deg)");var h=u*Math.PI/180,c=o+i,v=c*Math.abs(Math.cos(h))+c*Math.abs(Math.sin(h)),f=Math.round(((v-Math.SQRT2*i)/2+Math.SQRT2*i-(v-c)/2)*100)/100;s+=";"+n+":-"+f+"px";var p=e+" solid "+i+"px;",d=["position:absolute;width:"+o+"px;height:"+o+"px;z-index:-1;",s+";"+l+";","border-bottom:"+p,"border-right:"+p,"background-color:"+r+";"];return'<div style="'+d.join("")+'"></div>'}function Uc(a,e){var t="cubic-bezier(0.23,1,0.32,1)",r=" "+a/2+"s "+t,i="opacity"+r+",visibility"+r;return e||(r=" "+a+"s "+t,i+=K.transformSupported?","+sa+r:",left"+r+",top"+r),Hc+":"+i}function Ni(a,e,t){var r=a.toFixed(0)+"px",i=e.toFixed(0)+"px";if(!K.transformSupported)return t?"top:"+i+";left:"+r+";":[["top",i],["left",r]];var n=K.transform3dSupported,o="translate"+(n?"3d":"")+"("+r+","+i+(n?",0":"")+")";return t?"top:0;left:0;"+sa+":"+o+";":[["top",0],["left",0],[wo,o]]}function Zc(a){var e=[],t=a.get("fontSize"),r=a.getTextColor();r&&e.push("color:"+r),e.push("font:"+a.getFont());var i=it(a.get("lineHeight"),Math.round(t*3/2));t&&e.push("line-height:"+i+"px");var n=a.get("textShadowColor"),o=a.get("textShadowBlur")||0,s=a.get("textShadowOffsetX")||0,l=a.get("textShadowOffsetY")||0;return n&&o&&e.push("text-shadow:"+s+"px "+l+"px "+o+"px "+n),T(["decoration","align"],function(u){var h=a.get(u);h&&e.push("text-"+u+":"+h)}),e.join(";")}function $c(a,e,t){var r=[],i=a.get("transitionDuration"),n=a.get("backgroundColor"),o=a.get("shadowBlur"),s=a.get("shadowColor"),l=a.get("shadowOffsetX"),u=a.get("shadowOffsetY"),h=a.getModel("textStyle"),c=Cn(a,"html"),v=l+"px "+u+"px "+o+"px "+s;return r.push("box-shadow:"+v),e&&i&&r.push(Uc(i,t)),n&&r.push("background-color:"+n),T(["width","color","radius"],function(f){var p="border-"+f,d=Dn(p),m=a.get(d);m!=null&&r.push(p+":"+m+(f==="color"?"":"px"))}),r.push(Zc(h)),c!=null&&r.push("padding:"+qr(c).join("px ")+"px"),r.join(";")+";"}function Bi(a,e,t,r,i){var n=e&&e.painter;if(t){var o=n&&n.getViewportRoot();o&&Ks(a,o,t,r,i)}else{a[0]=r,a[1]=i;var s=n&&n.getViewportRootOffset();s&&(a[0]+=s.offsetLeft,a[1]+=s.offsetTop)}a[2]=a[0]/e.getWidth(),a[3]=a[1]/e.getHeight()}var Kc=function(){function a(e,t){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,K.wxa)return null;var r=document.createElement("div");r.domBelongToZr=!0,this.el=r;var i=this._zr=e.getZr(),n=t.appendTo,o=n&&(H(n)?document.querySelector(n):wa(n)?n:X(n)&&n(e.getDom()));Bi(this._styleCoord,i,o,e.getWidth()/2,e.getHeight()/2),(o||e.getDom()).appendChild(r),this._api=e,this._container=o;var s=this;r.onmouseenter=function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0},r.onmousemove=function(l){if(l=l||window.event,!s._enterable){var u=i.handler,h=i.painter.getViewportRoot();$s(h,l,!0),u.dispatch("mousemove",l)}},r.onmouseleave=function(){s._inContent=!1,s._enterable&&s._show&&s.hideLater(s._hideDelay)}}return a.prototype.update=function(e){if(!this._container){var t=this._api.getDom(),r=Fc(t,"position"),i=t.style;i.position!=="absolute"&&r!=="absolute"&&(i.position="relative")}var n=e.get("alwaysShowContent");n&&this._moveIfResized(),this._alwaysShowContent=n,this.el.className=e.get("className")||""},a.prototype.show=function(e,t){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var r=this.el,i=r.style,n=this._styleCoord;r.innerHTML?i.cssText=Wc+$c(e,!this._firstShow,this._longHide)+Ni(n[0],n[1],!0)+("border-color:"+Xt(t)+";")+(e.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):i.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},a.prototype.setContent=function(e,t,r,i,n){var o=this.el;if(e==null){o.innerHTML="";return}var s="";if(H(n)&&r.get("trigger")==="item"&&!bo(r)&&(s=Yc(r,i,n)),H(e))o.innerHTML=e+s;else if(e){o.innerHTML="",G(e)||(e=[e]);for(var l=0;l<e.length;l++)wa(e[l])&&e[l].parentNode!==o&&o.appendChild(e[l]);if(s&&o.childNodes.length){var u=document.createElement("div");u.innerHTML=s,o.appendChild(u)}}},a.prototype.setEnterable=function(e){this._enterable=e},a.prototype.getSize=function(){var e=this.el;return e?[e.offsetWidth,e.offsetHeight]:[0,0]},a.prototype.moveTo=function(e,t){if(this.el){var r=this._styleCoord;if(Bi(r,this._zr,this._container,e,t),r[0]!=null&&r[1]!=null){var i=this.el.style,n=Ni(r[0],r[1]);T(n,function(o){i[o[0]]=o[1]})}}},a.prototype._moveIfResized=function(){var e=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),t*this._zr.getHeight())},a.prototype.hide=function(){var e=this,t=this.el.style;t.visibility="hidden",t.opacity="0",K.transform3dSupported&&(t.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return e._longHide=!0},500)},a.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(j(this.hide,this),e)):this.hide())},a.prototype.isShow=function(){return this._show},a.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var e=this.el.parentNode;e&&e.removeChild(this.el),this.el=this._container=null},a}(),qc=function(){function a(e){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=e.getZr(),zi(this._styleCoord,this._zr,e.getWidth()/2,e.getHeight()/2)}return a.prototype.update=function(e){var t=e.get("alwaysShowContent");t&&this._moveIfResized(),this._alwaysShowContent=t},a.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},a.prototype.setContent=function(e,t,r,i,n){var o=this;q(e)&&qs(""),this.el&&this._zr.remove(this.el);var s=r.getModel("textStyle");this.el=new vt({style:{rich:t.richTextStyles,text:e,lineHeight:22,borderWidth:1,borderColor:i,textShadowColor:s.get("textShadowColor"),fill:r.get(["textStyle","color"]),padding:Cn(r,"richText"),verticalAlign:"top",align:"left"},z:r.get("z")}),T(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(u){o.el.style[u]=r.get(u)}),T(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(u){o.el.style[u]=s.get(u)||0}),this._zr.add(this.el);var l=this;this.el.on("mouseover",function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0}),this.el.on("mouseout",function(){l._enterable&&l._show&&l.hideLater(l._hideDelay),l._inContent=!1})},a.prototype.setEnterable=function(e){this._enterable=e},a.prototype.getSize=function(){var e=this.el,t=this.el.getBoundingRect(),r=Gi(e.style);return[t.width+r.left+r.right,t.height+r.top+r.bottom]},a.prototype.moveTo=function(e,t){var r=this.el;if(r){var i=this._styleCoord;zi(i,this._zr,e,t),e=i[0],t=i[1];var n=r.style,o=Dt(n.borderWidth||0),s=Gi(n);r.x=e+o+s.left,r.y=t+o+s.top,r.markRedraw()}},a.prototype._moveIfResized=function(){var e=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),t*this._zr.getHeight())},a.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},a.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(j(this.hide,this),e)):this.hide())},a.prototype.isShow=function(){return this._show},a.prototype.dispose=function(){this._zr.remove(this.el)},a}();function Dt(a){return Math.max(0,a)}function Gi(a){var e=Dt(a.shadowBlur||0),t=Dt(a.shadowOffsetX||0),r=Dt(a.shadowOffsetY||0);return{left:Dt(e-t),right:Dt(e+t),top:Dt(e-r),bottom:Dt(e+r)}}function zi(a,e,t,r){a[0]=t,a[1]=r,a[2]=a[0]/e.getWidth(),a[3]=a[1]/e.getHeight()}var jc=new ft({shape:{x:-1,y:-1,width:2,height:2}}),Jc=function(a){R(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r){if(!(K.node||!r.getDom())){var i=t.getComponent("tooltip"),n=this._renderMode=js(i.get("renderMode"));this._tooltipContent=n==="richText"?new qc(r):new Kc(r,{appendTo:i.get("appendToBody",!0)?"body":i.get("appendTo",!0)})}},e.prototype.render=function(t,r,i){if(!(K.node||!i.getDom())){this.group.removeAll(),this._tooltipModel=t,this._ecModel=r,this._api=i;var n=this._tooltipContent;n.update(t),n.setEnterable(t.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&t.get("transitionDuration")?An(this,"_updatePosition",50,"fixRate"):Tr(this,"_updatePosition")}},e.prototype._initGlobalListener=function(){var t=this._tooltipModel,r=t.get("triggerOn");yo("itemTooltip",this._api,j(function(i,n,o){r!=="none"&&(r.indexOf(i)>=0?this._tryShow(n,o):i==="leave"&&this._hide(o))},this))},e.prototype._keepShow=function(){var t=this._tooltipModel,r=this._ecModel,i=this._api,n=t.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&n!=="none"&&n!=="click"){var o=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!i.isDisposed()&&o.manuallyShowTip(t,r,i,{x:o._lastX,y:o._lastY,dataByCoordSys:o._lastDataByCoordSys})})}},e.prototype.manuallyShowTip=function(t,r,i,n){if(!(n.from===this.uid||K.node||!i.getDom())){var o=Vi(n,i);this._ticket="";var s=n.dataByCoordSys,l=rv(n,r,i);if(l){var u=l.el.getBoundingRect().clone();u.applyTransform(l.el.transform),this._tryShow({offsetX:u.x+u.width/2,offsetY:u.y+u.height/2,target:l.el,position:n.position,positionDefault:"bottom"},o)}else if(n.tooltip&&n.x!=null&&n.y!=null){var h=jc;h.x=n.x,h.y=n.y,h.update(),Y(h).tooltipConfig={name:null,option:n.tooltip},this._tryShow({offsetX:n.x,offsetY:n.y,target:h},o)}else if(s)this._tryShow({offsetX:n.x,offsetY:n.y,position:n.position,dataByCoordSys:s,tooltipOption:n.tooltipOption},o);else if(n.seriesIndex!=null){if(this._manuallyAxisShowTip(t,r,i,n))return;var c=_o(n,r),v=c.point[0],f=c.point[1];v!=null&&f!=null&&this._tryShow({offsetX:v,offsetY:f,target:c.el,position:n.position,positionDefault:"bottom"},o)}else n.x!=null&&n.y!=null&&(i.dispatchAction({type:"updateAxisPointer",x:n.x,y:n.y}),this._tryShow({offsetX:n.x,offsetY:n.y,position:n.position,target:i.getZr().findHover(n.x,n.y).target},o))}},e.prototype.manuallyHideTip=function(t,r,i,n){var o=this._tooltipContent;this._tooltipModel&&o.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,n.from!==this.uid&&this._hide(Vi(n,i))},e.prototype._manuallyAxisShowTip=function(t,r,i,n){var o=n.seriesIndex,s=n.dataIndex,l=r.getComponent("axisPointer").coordSysAxesInfo;if(!(o==null||s==null||l==null)){var u=r.getSeriesByIndex(o);if(u){var h=u.getData(),c=ie([h.getItemModel(s),u,(u.coordinateSystem||{}).model],this._tooltipModel);if(c.get("trigger")==="axis")return i.dispatchAction({type:"updateAxisPointer",seriesIndex:o,dataIndex:s,position:n.position}),!0}}},e.prototype._tryShow=function(t,r){var i=t.target,n=this._tooltipModel;if(n){this._lastX=t.offsetX,this._lastY=t.offsetY;var o=t.dataByCoordSys;if(o&&o.length)this._showAxisTooltip(o,t);else if(i){var s=Y(i);if(s.ssrType==="legend")return;this._lastDataByCoordSys=null;var l,u;Js(i,function(h){if(Y(h).dataIndex!=null)return l=h,!0;if(Y(h).tooltipConfig!=null)return u=h,!0},!0),l?this._showSeriesItemTooltip(t,l,r):u?this._showComponentItemTooltip(t,u,r):this._hide(r)}else this._lastDataByCoordSys=null,this._hide(r)}},e.prototype._showOrMove=function(t,r){var i=t.get("showDelay");r=j(r,this),clearTimeout(this._showTimout),i>0?this._showTimout=setTimeout(r,i):r()},e.prototype._showAxisTooltip=function(t,r){var i=this._ecModel,n=this._tooltipModel,o=[r.offsetX,r.offsetY],s=ie([r.tooltipOption],n),l=this._renderMode,u=[],h=Fe("section",{blocks:[],noHeader:!0}),c=[],v=new Je;T(t,function(y){T(y.dataByAxis,function(_){var x=i.getComponent(_.axisDim+"Axis",_.axisIndex),b=_.value;if(!(!x||b==null)){var w=go(b,x.axis,i,_.seriesDataIndices,_.valueLabelOpt),S=Fe("section",{header:w,noHeader:!Qs(w),sortBlocks:!0,blocks:[]});h.blocks.push(S),T(_.seriesDataIndices,function(D){var I=i.getSeriesByIndex(D.seriesIndex),C=D.dataIndexInside,A=I.getDataParams(C);if(!(A.dataIndex<0)){A.axisDim=_.axisDim,A.axisIndex=_.axisIndex,A.axisType=_.axisType,A.axisId=_.axisId,A.axisValue=ea(x.axis,{value:b}),A.axisValueLabel=w,A.marker=v.makeTooltipMarker("item",Xt(A.color),l);var M=Aa(I.formatTooltip(C,!0,null)),L=M.frag;if(L){var P=ie([I],n).get("valueFormatter");S.blocks.push(P?F({valueFormatter:P},L):L)}M.text&&c.push(M.text),u.push(A)}})}})}),h.blocks.reverse(),c.reverse();var f=r.position,p=s.get("order"),d=Da(h,v,l,p,i.get("useUTC"),s.get("textStyle"));d&&c.unshift(d);var m=l==="richText"?`

`:"<br/>",g=c.join(m);this._showOrMove(s,function(){this._updateContentNotChangedOnAxis(t,u)?this._updatePosition(s,f,o[0],o[1],this._tooltipContent,u):this._showTooltipContent(s,g,u,Math.random()+"",o[0],o[1],f,null,v)})},e.prototype._showSeriesItemTooltip=function(t,r,i){var n=this._ecModel,o=Y(r),s=o.seriesIndex,l=n.getSeriesByIndex(s),u=o.dataModel||l,h=o.dataIndex,c=o.dataType,v=u.getData(c),f=this._renderMode,p=t.positionDefault,d=ie([v.getItemModel(h),u,l&&(l.coordinateSystem||{}).model],this._tooltipModel,p?{position:p}:null),m=d.get("trigger");if(!(m!=null&&m!=="item")){var g=u.getDataParams(h,c),y=new Je;g.marker=y.makeTooltipMarker("item",Xt(g.color),f);var _=Aa(u.formatTooltip(h,!1,c)),x=d.get("order"),b=d.get("valueFormatter"),w=_.frag,S=w?Da(b?F({valueFormatter:b},w):w,y,f,x,n.get("useUTC"),d.get("textStyle")):_.text,D="item_"+u.name+"_"+h;this._showOrMove(d,function(){this._showTooltipContent(d,S,g,D,t.offsetX,t.offsetY,t.position,t.target,y)}),i({type:"showTip",dataIndexInside:h,dataIndex:v.getRawIndex(h),seriesIndex:s,from:this.uid})}},e.prototype._showComponentItemTooltip=function(t,r,i){var n=this._renderMode==="html",o=Y(r),s=o.tooltipConfig,l=s.option||{},u=l.encodeHTMLContent;if(H(l)){var h=l;l={content:h,formatter:h},u=!0}u&&n&&l.content&&(l=kt(l),l.content=tl(l.content));var c=[l],v=this._ecModel.getComponent(o.componentMainType,o.componentIndex);v&&c.push(v),c.push({formatter:l.content});var f=t.positionDefault,p=ie(c,this._tooltipModel,f?{position:f}:null),d=p.get("content"),m=Math.random()+"",g=new Je;this._showOrMove(p,function(){var y=kt(p.get("formatterParams")||{});this._showTooltipContent(p,d,y,m,t.offsetX,t.offsetY,t.position,r,g)}),i({type:"showTip",from:this.uid})},e.prototype._showTooltipContent=function(t,r,i,n,o,s,l,u,h){if(this._ticket="",!(!t.get("showContent")||!t.get("show"))){var c=this._tooltipContent;c.setEnterable(t.get("enterable"));var v=t.get("formatter");l=l||t.get("position");var f=r,p=this._getNearestPoint([o,s],i,t.get("trigger"),t.get("borderColor")),d=p.color;if(v)if(H(v)){var m=t.ecModel.get("useUTC"),g=G(i)?i[0]:i,y=g&&g.axisType&&g.axisType.indexOf("time")>=0;f=v,y&&(f=Qi(g.axisValue,f,m)),f=el(f,i,!0)}else if(X(v)){var _=j(function(x,b){x===this._ticket&&(c.setContent(b,h,t,d,l),this._updatePosition(t,l,o,s,c,i,u))},this);this._ticket=n,f=v(i,n,_)}else f=v;c.setContent(f,h,t,d,l),c.show(t,d),this._updatePosition(t,l,o,s,c,i,u)}},e.prototype._getNearestPoint=function(t,r,i,n){if(i==="axis"||G(r))return{color:n||(this._renderMode==="html"?"#fff":"none")};if(!G(r))return{color:n||r.color||r.borderColor}},e.prototype._updatePosition=function(t,r,i,n,o,s,l){var u=this._api.getWidth(),h=this._api.getHeight();r=r||t.get("position");var c=o.getSize(),v=t.get("align"),f=t.get("verticalAlign"),p=l&&l.getBoundingRect().clone();if(l&&p.applyTransform(l.transform),X(r)&&(r=r([i,n],s,o.el,p,{viewSize:[u,h],contentSize:c.slice()})),G(r))i=mt(r[0],u),n=mt(r[1],h);else if(q(r)){var d=r;d.width=c[0],d.height=c[1];var m=ce(d,{width:u,height:h});i=m.x,n=m.y,v=null,f=null}else if(H(r)&&l){var g=ev(r,p,c,t.get("borderWidth"));i=g[0],n=g[1]}else{var g=Qc(i,n,o,u,h,v?null:20,f?null:20);i=g[0],n=g[1]}if(v&&(i-=Fi(v)?c[0]/2:v==="right"?c[0]:0),f&&(n-=Fi(f)?c[1]/2:f==="bottom"?c[1]:0),bo(t)){var g=tv(i,n,o,u,h);i=g[0],n=g[1]}o.moveTo(i,n)},e.prototype._updateContentNotChangedOnAxis=function(t,r){var i=this._lastDataByCoordSys,n=this._cbParamsList,o=!!i&&i.length===t.length;return o&&T(i,function(s,l){var u=s.dataByAxis||[],h=t[l]||{},c=h.dataByAxis||[];o=o&&u.length===c.length,o&&T(u,function(v,f){var p=c[f]||{},d=v.seriesDataIndices||[],m=p.seriesDataIndices||[];o=o&&v.value===p.value&&v.axisType===p.axisType&&v.axisId===p.axisId&&d.length===m.length,o&&T(d,function(g,y){var _=m[y];o=o&&g.seriesIndex===_.seriesIndex&&g.dataIndex===_.dataIndex}),n&&T(v.seriesDataIndices,function(g){var y=g.seriesIndex,_=r[y],x=n[y];_&&x&&x.data!==_.data&&(o=!1)})})}),this._lastDataByCoordSys=t,this._cbParamsList=r,!!o},e.prototype._hide=function(t){this._lastDataByCoordSys=null,t({type:"hideTip",from:this.uid})},e.prototype.dispose=function(t,r){K.node||!r.getDom()||(Tr(this,"_updatePosition"),this._tooltipContent.dispose(),Vr("itemTooltip",r))},e.type="tooltip",e}(yt);function ie(a,e,t){var r=e.ecModel,i;t?(i=new Ct(t,r,r),i=new Ct(e.option,i,r)):i=e;for(var n=a.length-1;n>=0;n--){var o=a[n];o&&(o instanceof Ct&&(o=o.get("tooltip",!0)),H(o)&&(o={formatter:o}),o&&(i=new Ct(o,i,r)))}return i}function Vi(a,e){return a.dispatchAction||j(e.dispatchAction,e)}function Qc(a,e,t,r,i,n,o){var s=t.getSize(),l=s[0],u=s[1];return n!=null&&(a+l+n+2>r?a-=l+n:a+=n),o!=null&&(e+u+o>i?e-=u+o:e+=o),[a,e]}function tv(a,e,t,r,i){var n=t.getSize(),o=n[0],s=n[1];return a=Math.min(a+o,r)-o,e=Math.min(e+s,i)-s,a=Math.max(a,0),e=Math.max(e,0),[a,e]}function ev(a,e,t,r){var i=t[0],n=t[1],o=Math.ceil(Math.SQRT2*r)+8,s=0,l=0,u=e.width,h=e.height;switch(a){case"inside":s=e.x+u/2-i/2,l=e.y+h/2-n/2;break;case"top":s=e.x+u/2-i/2,l=e.y-n-o;break;case"bottom":s=e.x+u/2-i/2,l=e.y+h+o;break;case"left":s=e.x-i-o,l=e.y+h/2-n/2;break;case"right":s=e.x+u+o,l=e.y+h/2-n/2}return[s,l]}function Fi(a){return a==="center"||a==="middle"}function rv(a,e,t){var r=rl(a).queryOptionMap,i=r.keys()[0];if(!(!i||i==="series")){var n=al(e,i,r.get(i),{useDefault:!1,enableAll:!1,enableNone:!1}),o=n.models[0];if(o){var s=t.getViewOfComponentModel(o),l;if(s.group.traverse(function(u){var h=Y(u).tooltipConfig;if(h&&h.name===a.name)return l=u,!0}),l)return{componentMainType:i,componentIndex:o.componentIndex,el:l}}}}function av(a){Pt(xo),a.registerComponentModel(zc),a.registerComponentView(Jc),a.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},Ca),a.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},Ca)}var iv=function(a){R(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.layoutMode={type:"box",ignoreSize:!0},t}return e.type="title",e.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},e}(ct),nv=function(a){R(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){if(this.group.removeAll(),!!t.get("show")){var n=this.group,o=t.getModel("textStyle"),s=t.getModel("subtextStyle"),l=t.get("textAlign"),u=it(t.get("textBaseline"),t.get("textVerticalAlign")),h=new vt({style:Zt(o,{text:t.get("text"),fill:o.getTextColor()},{disableBox:!0}),z2:10}),c=h.getBoundingRect(),v=t.get("subtext"),f=new vt({style:Zt(s,{text:v,fill:s.getTextColor(),y:c.height+t.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),p=t.get("link"),d=t.get("sublink"),m=t.get("triggerEvent",!0);h.silent=!p&&!m,f.silent=!d&&!m,p&&h.on("click",function(){La(p,"_"+t.get("target"))}),d&&f.on("click",function(){La(d,"_"+t.get("subtarget"))}),Y(h).eventData=Y(f).eventData=m?{componentType:"title",componentIndex:t.componentIndex}:null,n.add(h),v&&n.add(f);var g=n.getBoundingRect(),y=t.getBoxLayoutParams();y.width=g.width,y.height=g.height;var _=ce(y,{width:i.getWidth(),height:i.getHeight()},t.get("padding"));l||(l=t.get("left")||t.get("right"),l==="middle"&&(l="center"),l==="right"?_.x+=_.width:l==="center"&&(_.x+=_.width/2)),u||(u=t.get("top")||t.get("bottom"),u==="center"&&(u="middle"),u==="bottom"?_.y+=_.height:u==="middle"&&(_.y+=_.height/2),u=u||"top"),n.x=_.x,n.y=_.y,n.markRedraw();var x={align:l,verticalAlign:u};h.setStyle(x),f.setStyle(x),g=n.getBoundingRect();var b=_.margin,w=t.getItemStyle(["color","opacity"]);w.fill=t.get("backgroundColor");var S=new ft({shape:{x:g.x-b[3],y:g.y-b[0],width:g.width+b[1]+b[3],height:g.height+b[0]+b[2],r:t.get("borderRadius")},style:w,subPixelOptimize:!0,silent:!0});n.add(S)}},e.type="title",e}(yt);function ov(a){a.registerComponentModel(iv),a.registerComponentView(nv)}function sv(a,e){if(!a)return!1;for(var t=G(a)?a:[a],r=0;r<t.length;r++)if(t[r]&&t[r][e])return!0;return!1}function Te(a){il(a,"label",["show"])}var Me=xt(),de=function(a){R(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.createdBySelf=!1,t}return e.prototype.init=function(t,r,i){this.mergeDefaultAndTheme(t,i),this._mergeOption(t,i,!1,!0)},e.prototype.isAnimationEnabled=function(){if(K.node)return!1;var t=this.__hostSeries;return this.getShallow("animation")&&t&&t.isAnimationEnabled()},e.prototype.mergeOption=function(t,r){this._mergeOption(t,r,!1,!1)},e.prototype._mergeOption=function(t,r,i,n){var o=this.mainType;i||r.eachSeries(function(s){var l=s.get(this.mainType,!0),u=Me(s)[o];if(!l||!l.data){Me(s)[o]=null;return}u?u._mergeOption(l,r,!0):(n&&Te(l),T(l.data,function(h){h instanceof Array?(Te(h[0]),Te(h[1])):Te(h)}),u=this.createMarkerModelFromSeries(l,this,r),F(u,{mainType:this.mainType,seriesIndex:s.seriesIndex,name:s.name,createdBySelf:!0}),u.__hostSeries=s),Me(s)[o]=u},this)},e.prototype.formatTooltip=function(t,r,i){var n=this.getData(),o=this.getRawValue(t),s=n.getName(t);return Fe("section",{header:this.name,blocks:[Fe("nameValue",{name:s,value:o,noName:!s,noValue:o==null})]})},e.prototype.getData=function(){return this._data},e.prototype.setData=function(t){this._data=t},e.prototype.getDataParams=function(t,r){var i=Ln.prototype.getDataParams.call(this,t,r),n=this.__hostSeries;return n&&(i.seriesId=n.id,i.seriesName=n.name,i.seriesType=n.subType),i},e.getMarkerModelFromSeries=function(t,r){return Me(t)[r]},e.type="marker",e.dependencies=["series","grid","polar","geo"],e}(ct);mn(de,Ln.prototype);function lv(a){return!(isNaN(parseFloat(a.x))&&isNaN(parseFloat(a.y)))}function uv(a){return!isNaN(parseFloat(a.x))&&!isNaN(parseFloat(a.y))}function ke(a,e,t,r,i,n){var o=[],s=zt(e,r),l=s?e.getCalculationInfo("stackResultDimension"):r,u=la(e,l,a),h=e.indicesOfNearest(l,u)[0];o[i]=e.get(t,h),o[n]=e.get(l,h);var c=e.get(r,h),v=Xe(e.get(r,h));return v=Math.min(v,20),v>=0&&(o[n]=+o[n].toFixed(v)),[o,c]}var mr={min:U(ke,"min"),max:U(ke,"max"),average:U(ke,"average"),median:U(ke,"median")};function Hi(a,e){if(e){var t=a.getData(),r=a.coordinateSystem,i=r&&r.dimensions;if(!uv(e)&&!G(e.coord)&&G(i)){var n=Do(e,t,r,a);if(e=kt(e),e.type&&mr[e.type]&&n.baseAxis&&n.valueAxis){var o=ht(i,n.baseAxis.dim),s=ht(i,n.valueAxis.dim),l=mr[e.type](t,n.baseDataDim,n.valueDataDim,o,s);e.coord=l[0],e.value=l[1]}else e.coord=[e.xAxis!=null?e.xAxis:e.radiusAxis,e.yAxis!=null?e.yAxis:e.angleAxis]}if(e.coord==null||!G(i))e.coord=[];else for(var u=e.coord,h=0;h<2;h++)mr[u[h]]&&(u[h]=la(t,t.mapDimension(i[h]),u[h]));return e}}function Do(a,e,t,r){var i={};return a.valueIndex!=null||a.valueDim!=null?(i.valueDataDim=a.valueIndex!=null?e.getDimension(a.valueIndex):a.valueDim,i.valueAxis=t.getAxis(hv(r,i.valueDataDim)),i.baseAxis=t.getOtherAxis(i.valueAxis),i.baseDataDim=e.mapDimension(i.baseAxis.dim)):(i.baseAxis=r.getBaseAxis(),i.valueAxis=t.getOtherAxis(i.baseAxis),i.baseDataDim=e.mapDimension(i.baseAxis.dim),i.valueDataDim=e.mapDimension(i.valueAxis.dim)),i}function hv(a,e){var t=a.getData().getDimensionInfo(e);return t&&t.coordDim}function Wi(a,e){return a&&a.containData&&e.coord&&!lv(e)?a.containData(e.coord):!0}function cv(a,e){return a?function(t,r,i,n){var o=n<2?t.coord&&t.coord[n]:t.value;return Ia(o,e[n])}:function(t,r,i,n){return Ia(t.value,e[n])}}function la(a,e,t){if(t==="average"){var r=0,i=0;return a.each(e,function(n,o){isNaN(n)||(r+=n,i++)}),r/i}else return t==="median"?a.getMedian(e):a.getDataExtent(e)[t==="max"?1:0]}var yr=xt(),vv=function(a){R(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(){this.markerGroupMap=et()},e.prototype.render=function(t,r,i){var n=this,o=this.markerGroupMap;o.each(function(s){yr(s).keep=!1}),r.eachSeries(function(s){var l=de.getMarkerModelFromSeries(s,n.type);l&&n.renderSeries(s,l,r,i)}),o.each(function(s){!yr(s).keep&&n.group.remove(s.group)})},e.prototype.markKeep=function(t){yr(t).keep=!0},e.prototype.toggleBlurSeries=function(t,r){var i=this;T(t,function(n){var o=de.getMarkerModelFromSeries(n,i.type);if(o){var s=o.getData();s.eachItemGraphicEl(function(l){l&&(r?nl(l):ol(l))})}})},e.type="marker",e}(yt),fv=function(a){R(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.createMarkerModelFromSeries=function(t,r,i){return new e(t,r,i)},e.type="markLine",e.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},e}(de),Pe=xt(),pv=function(a,e,t,r){var i=a.getData(),n;if(G(r))n=r;else{var o=r.type;if(o==="min"||o==="max"||o==="average"||o==="median"||r.xAxis!=null||r.yAxis!=null){var s=void 0,l=void 0;if(r.yAxis!=null||r.xAxis!=null)s=e.getAxis(r.yAxis!=null?"y":"x"),l=Ut(r.yAxis,r.xAxis);else{var u=Do(r,i,e,a);s=u.valueAxis;var h=On(i,u.valueDataDim);l=la(i,h,o)}var c=s.dim==="x"?0:1,v=1-c,f=kt(r),p={coord:[]};f.type=null,f.coord=[],f.coord[v]=-1/0,p.coord[v]=1/0;var d=t.get("precision");d>=0&&Ot(l)&&(l=+l.toFixed(Math.min(d,20))),f.coord[c]=p.coord[c]=l,n=[f,p,{type:o,valueIndex:r.valueIndex,value:l}]}else n=[]}var m=[Hi(a,n[0]),Hi(a,n[1]),F({},n[2])];return m[2].type=m[2].type||null,J(m[2],m[0]),J(m[2],m[1]),m};function He(a){return!isNaN(a)&&!isFinite(a)}function Xi(a,e,t,r){var i=1-a,n=r.dimensions[a];return He(e[i])&&He(t[i])&&e[a]===t[a]&&r.getAxis(n).containData(e[a])}function dv(a,e){if(a.type==="cartesian2d"){var t=e[0].coord,r=e[1].coord;if(t&&r&&(Xi(1,t,r,a)||Xi(0,t,r,a)))return!0}return Wi(a,e[0])&&Wi(a,e[1])}function _r(a,e,t,r,i){var n=r.coordinateSystem,o=a.getItemModel(e),s,l=mt(o.get("x"),i.getWidth()),u=mt(o.get("y"),i.getHeight());if(!isNaN(l)&&!isNaN(u))s=[l,u];else{if(r.getMarkerPosition)s=r.getMarkerPosition(a.getValues(a.dimensions,e));else{var h=n.dimensions,c=a.get(h[0],e),v=a.get(h[1],e);s=n.dataToPoint([c,v])}if(Ke(n,"cartesian2d")){var f=n.getAxis("x"),p=n.getAxis("y"),h=n.dimensions;He(a.get(h[0],e))?s[0]=f.toGlobalCoord(f.getExtent()[t?0:1]):He(a.get(h[1],e))&&(s[1]=p.toGlobalCoord(p.getExtent()[t?0:1]))}isNaN(l)||(s[0]=l),isNaN(u)||(s[1]=u)}a.setItemLayout(e,s)}var gv=function(a){R(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.updateTransform=function(t,r,i){r.eachSeries(function(n){var o=de.getMarkerModelFromSeries(n,"markLine");if(o){var s=o.getData(),l=Pe(o).from,u=Pe(o).to;l.each(function(h){_r(l,h,!0,n,i),_r(u,h,!1,n,i)}),s.each(function(h){s.setItemLayout(h,[l.getItemLayout(h),u.getItemLayout(h)])}),this.markerGroupMap.get(n.id).updateLayout()}},this)},e.prototype.renderSeries=function(t,r,i,n){var o=t.coordinateSystem,s=t.id,l=t.getData(),u=this.markerGroupMap,h=u.get(s)||u.set(s,new cc);this.group.add(h.group);var c=mv(o,t,r),v=c.from,f=c.to,p=c.line;Pe(r).from=v,Pe(r).to=f,r.setData(p);var d=r.get("symbol"),m=r.get("symbolSize"),g=r.get("symbolRotate"),y=r.get("symbolOffset");G(d)||(d=[d,d]),G(m)||(m=[m,m]),G(g)||(g=[g,g]),G(y)||(y=[y,y]),c.from.each(function(x){_(v,x,!0),_(f,x,!1)}),p.each(function(x){var b=p.getItemModel(x).getModel("lineStyle").getLineStyle();p.setItemLayout(x,[v.getItemLayout(x),f.getItemLayout(x)]),b.stroke==null&&(b.stroke=v.getItemVisual(x,"style").fill),p.setItemVisual(x,{fromSymbolKeepAspect:v.getItemVisual(x,"symbolKeepAspect"),fromSymbolOffset:v.getItemVisual(x,"symbolOffset"),fromSymbolRotate:v.getItemVisual(x,"symbolRotate"),fromSymbolSize:v.getItemVisual(x,"symbolSize"),fromSymbol:v.getItemVisual(x,"symbol"),toSymbolKeepAspect:f.getItemVisual(x,"symbolKeepAspect"),toSymbolOffset:f.getItemVisual(x,"symbolOffset"),toSymbolRotate:f.getItemVisual(x,"symbolRotate"),toSymbolSize:f.getItemVisual(x,"symbolSize"),toSymbol:f.getItemVisual(x,"symbol"),style:b})}),h.updateData(p),c.line.eachItemGraphicEl(function(x){Y(x).dataModel=r,x.traverse(function(b){Y(b).dataModel=r})});function _(x,b,w){var S=x.getItemModel(b);_r(x,b,w,t,n);var D=S.getModel("itemStyle").getItemStyle();D.fill==null&&(D.fill=sl(l,"color")),x.setItemVisual(b,{symbolKeepAspect:S.get("symbolKeepAspect"),symbolOffset:it(S.get("symbolOffset",!0),y[w?0:1]),symbolRotate:it(S.get("symbolRotate",!0),g[w?0:1]),symbolSize:it(S.get("symbolSize"),m[w?0:1]),symbol:it(S.get("symbol",!0),d[w?0:1]),style:D})}this.markKeep(h),h.group.silent=r.get("silent")||t.get("silent")},e.type="markLine",e}(vv);function mv(a,e,t){var r;a?r=z(a&&a.dimensions,function(u){var h=e.getData().getDimensionInfo(e.getData().mapDimension(u))||{};return F(F({},h),{name:u,ordinalMeta:null})}):r=[{name:"value",type:"float"}];var i=new Ne(r,t),n=new Ne(r,t),o=new Ne([],t),s=z(t.get("data"),U(pv,e,a,t));a&&(s=Gt(s,U(dv,a)));var l=cv(!!a,r);return i.initData(z(s,function(u){return u[0]}),null,l),n.initData(z(s,function(u){return u[1]}),null,l),o.initData(z(s,function(u){return u[2]})),o.hasItemOption=!0,{from:i,to:n,line:o}}function yv(a){a.registerComponentModel(fv),a.registerComponentView(gv),a.registerPreprocessor(function(e){sv(e.series,"markLine")&&(e.markLine=e.markLine||{})})}var _v=function(a,e){if(e==="all")return{type:"all",title:a.getLocaleModel().get(["legend","selector","all"])};if(e==="inverse")return{type:"inverse",title:a.getLocaleModel().get(["legend","selector","inverse"])}},Fr=function(a){R(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.layoutMode={type:"box",ignoreSize:!0},t}return e.prototype.init=function(t,r,i){this.mergeDefaultAndTheme(t,i),t.selected=t.selected||{},this._updateSelector(t)},e.prototype.mergeOption=function(t,r){a.prototype.mergeOption.call(this,t,r),this._updateSelector(t)},e.prototype._updateSelector=function(t){var r=t.selector,i=this.ecModel;r===!0&&(r=t.selector=["all","inverse"]),G(r)&&T(r,function(n,o){H(n)&&(n={type:n}),r[o]=J(n,_v(i,n.type))})},e.prototype.optionUpdated=function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&this.get("selectedMode")==="single"){for(var r=!1,i=0;i<t.length;i++){var n=t[i].get("name");if(this.isSelected(n)){this.select(n),r=!0;break}}!r&&this.select(t[0].get("name"))}},e.prototype._updateData=function(t){var r=[],i=[];t.eachRawSeries(function(l){var u=l.name;i.push(u);var h;if(l.legendVisualProvider){var c=l.legendVisualProvider,v=c.getAllNames();t.isSeriesFiltered(l)||(i=i.concat(v)),v.length?r=r.concat(v):h=!0}else h=!0;h&&ll(l)&&r.push(l.name)}),this._availableNames=i;var n=this.get("data")||r,o=et(),s=z(n,function(l){return(H(l)||Ot(l))&&(l={name:l}),o.get(l.name)?null:(o.set(l.name,!0),new Ct(l,this,this.ecModel))},this);this._data=Gt(s,function(l){return!!l})},e.prototype.getData=function(){return this._data},e.prototype.select=function(t){var r=this.option.selected,i=this.get("selectedMode");if(i==="single"){var n=this._data;T(n,function(o){r[o.get("name")]=!1})}r[t]=!0},e.prototype.unSelect=function(t){this.get("selectedMode")!=="single"&&(this.option.selected[t]=!1)},e.prototype.toggleSelected=function(t){var r=this.option.selected;r.hasOwnProperty(t)||(r[t]=!0),this[r[t]?"unSelect":"select"](t)},e.prototype.allSelect=function(){var t=this._data,r=this.option.selected;T(t,function(i){r[i.get("name",!0)]=!0})},e.prototype.inverseSelect=function(){var t=this._data,r=this.option.selected;T(t,function(i){var n=i.get("name",!0);r.hasOwnProperty(n)||(r[n]=!0),r[n]=!r[n]})},e.prototype.isSelected=function(t){var r=this.option.selected;return!(r.hasOwnProperty(t)&&!r[t])&&ht(this._availableNames,t)>=0},e.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},e.type="legend.plain",e.dependencies=["series"],e.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},e}(ct),Ft=U,Hr=T,Oe=rt,Co=function(a){R(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.newlineDisabled=!1,t}return e.prototype.init=function(){this.group.add(this._contentGroup=new Oe),this.group.add(this._selectorGroup=new Oe),this._isFirstRender=!0},e.prototype.getContentGroup=function(){return this._contentGroup},e.prototype.getSelectorGroup=function(){return this._selectorGroup},e.prototype.render=function(t,r,i){var n=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!t.get("show",!0)){var o=t.get("align"),s=t.get("orient");(!o||o==="auto")&&(o=t.get("left")==="right"&&s==="vertical"?"right":"left");var l=t.get("selector",!0),u=t.get("selectorPosition",!0);l&&(!u||u==="auto")&&(u=s==="horizontal"?"end":"start"),this.renderInner(o,t,r,i,l,s,u);var h=t.getBoxLayoutParams(),c={width:i.getWidth(),height:i.getHeight()},v=t.get("padding"),f=ce(h,c,v),p=this.layoutInner(t,o,f,n,l,u),d=ce(Q({width:p.width,height:p.height},h),c,v);this.group.x=d.x-p.x,this.group.y=d.y-p.y,this.group.markRedraw(),this.group.add(this._backgroundEl=Gc(p,t))}},e.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},e.prototype.renderInner=function(t,r,i,n,o,s,l){var u=this.getContentGroup(),h=et(),c=r.get("selectedMode"),v=[];i.eachRawSeries(function(f){!f.get("legendHoverLink")&&v.push(f.id)}),Hr(r.getData(),function(f,p){var d=f.get("name");if(!this.newlineDisabled&&(d===""||d===`
`)){var m=new Oe;m.newline=!0,u.add(m);return}var g=i.getSeriesByName(d)[0];if(!h.get(d))if(g){var y=g.getData(),_=y.getVisual("legendLineStyle")||{},x=y.getVisual("legendIcon"),b=y.getVisual("style"),w=this._createItem(g,d,p,f,r,t,_,b,x,c,n);w.on("click",Ft(Yi,d,null,n,v)).on("mouseover",Ft(Wr,g.name,null,n,v)).on("mouseout",Ft(Xr,g.name,null,n,v)),i.ssr&&w.eachChild(function(S){var D=Y(S);D.seriesIndex=g.seriesIndex,D.dataIndex=p,D.ssrType="legend"}),h.set(d,!0)}else i.eachRawSeries(function(S){if(!h.get(d)&&S.legendVisualProvider){var D=S.legendVisualProvider;if(!D.containName(d))return;var I=D.indexOfName(d),C=D.getItemVisual(I,"style"),A=D.getItemVisual(I,"legendIcon"),M=ul(C.fill);M&&M[3]===0&&(M[3]=.2,C=F(F({},C),{fill:hl(M,"rgba")}));var L=this._createItem(S,d,p,f,r,t,{},C,A,c,n);L.on("click",Ft(Yi,null,d,n,v)).on("mouseover",Ft(Wr,null,d,n,v)).on("mouseout",Ft(Xr,null,d,n,v)),i.ssr&&L.eachChild(function(P){var k=Y(P);k.seriesIndex=S.seriesIndex,k.dataIndex=p,k.ssrType="legend"}),h.set(d,!0)}},this)},this),o&&this._createSelector(o,r,n,s,l)},e.prototype._createSelector=function(t,r,i,n,o){var s=this.getSelectorGroup();Hr(t,function(u){var h=u.type,c=new vt({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){i.dispatchAction({type:h==="all"?"legendAllSelect":"legendInverseSelect",legendId:r.id})}});s.add(c);var v=r.getModel("selectorLabel"),f=r.getModel(["emphasis","selectorLabel"]);ge(c,{normal:v,emphasis:f},{defaultText:u.title}),Ta(c)})},e.prototype._createItem=function(t,r,i,n,o,s,l,u,h,c,v){var f=t.visualDrawType,p=o.get("itemWidth"),d=o.get("itemHeight"),m=o.isSelected(r),g=n.get("symbolRotate"),y=n.get("symbolKeepAspect"),_=n.get("icon");h=_||h||"roundRect";var x=xv(h,n,l,u,f,m,v),b=new Oe,w=n.getModel("textStyle");if(X(t.getLegendIcon)&&(!_||_==="inherit"))b.add(t.getLegendIcon({itemWidth:p,itemHeight:d,icon:h,iconRotate:g,itemStyle:x.itemStyle,lineStyle:x.lineStyle,symbolKeepAspect:y}));else{var S=_==="inherit"&&t.getData().getVisual("symbol")?g==="inherit"?t.getData().getVisual("symbolRotate"):g:0;b.add(bv({itemWidth:p,itemHeight:d,icon:h,iconRotate:S,itemStyle:x.itemStyle,lineStyle:x.lineStyle,symbolKeepAspect:y}))}var D=s==="left"?p+5:-5,I=s,C=o.get("formatter"),A=r;H(C)&&C?A=C.replace("{name}",r??""):X(C)&&(A=C(r));var M=m?w.getTextColor():n.get("inactiveColor");b.add(new vt({style:Zt(w,{text:A,x:D,y:d/2,fill:M,align:I,verticalAlign:"middle"},{inheritColor:M})}));var L=new ft({shape:b.getBoundingRect(),style:{fill:"transparent"}}),P=n.getModel("tooltip");return P.get("show")&&Kr({el:L,componentModel:o,itemName:r,itemTooltipOption:P.option}),b.add(L),b.eachChild(function(k){k.silent=!0}),L.silent=!c,this.getContentGroup().add(b),Ta(b),b.__legendDataIndex=i,b},e.prototype.layoutInner=function(t,r,i,n,o,s){var l=this.getContentGroup(),u=this.getSelectorGroup();se(t.get("orient"),l,t.get("itemGap"),i.width,i.height);var h=l.getBoundingRect(),c=[-h.x,-h.y];if(u.markRedraw(),l.markRedraw(),o){se("horizontal",u,t.get("selectorItemGap",!0));var v=u.getBoundingRect(),f=[-v.x,-v.y],p=t.get("selectorButtonGap",!0),d=t.getOrient().index,m=d===0?"width":"height",g=d===0?"height":"width",y=d===0?"y":"x";s==="end"?f[d]+=h[m]+p:c[d]+=v[m]+p,f[1-d]+=h[g]/2-v[g]/2,u.x=f[0],u.y=f[1],l.x=c[0],l.y=c[1];var _={x:0,y:0};return _[m]=h[m]+p+v[m],_[g]=Math.max(h[g],v[g]),_[y]=Math.min(0,v[y]+f[1-d]),_}else return l.x=c[0],l.y=c[1],this.group.getBoundingRect()},e.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},e.type="legend.plain",e}(yt);function xv(a,e,t,r,i,n,o){function s(m,g){m.lineWidth==="auto"&&(m.lineWidth=g.lineWidth>0?2:0),Hr(m,function(y,_){m[_]==="inherit"&&(m[_]=g[_])})}var l=e.getModel("itemStyle"),u=l.getItemStyle(),h=a.lastIndexOf("empty",0)===0?"fill":"stroke",c=l.getShallow("decal");u.decal=!c||c==="inherit"?r.decal:cl(c,o),u.fill==="inherit"&&(u.fill=r[i]),u.stroke==="inherit"&&(u.stroke=r[h]),u.opacity==="inherit"&&(u.opacity=(i==="fill"?r:t).opacity),s(u,r);var v=e.getModel("lineStyle"),f=v.getLineStyle();if(s(f,t),u.fill==="auto"&&(u.fill=r.fill),u.stroke==="auto"&&(u.stroke=r.fill),f.stroke==="auto"&&(f.stroke=r.fill),!n){var p=e.get("inactiveBorderWidth"),d=u[h];u.lineWidth=p==="auto"?r.lineWidth>0&&d?2:0:u.lineWidth,u.fill=e.get("inactiveColor"),u.stroke=e.get("inactiveBorderColor"),f.stroke=v.get("inactiveColor"),f.lineWidth=v.get("inactiveWidth")}return{itemStyle:u,lineStyle:f}}function bv(a){var e=a.icon||"roundRect",t=Wt(e,0,0,a.itemWidth,a.itemHeight,a.itemStyle.fill,a.symbolKeepAspect);return t.setStyle(a.itemStyle),t.rotation=(a.iconRotate||0)*Math.PI/180,t.setOrigin([a.itemWidth/2,a.itemHeight/2]),e.indexOf("empty")>-1&&(t.style.stroke=t.style.fill,t.style.fill="#fff",t.style.lineWidth=2),t}function Yi(a,e,t,r){Xr(a,e,t,r),t.dispatchAction({type:"legendToggleSelect",name:a??e}),Wr(a,e,t,r)}function Lo(a){for(var e=a.getZr().storage.getDisplayList(),t,r=0,i=e.length;r<i&&!(t=e[r].states.emphasis);)r++;return t&&t.hoverLayer}function Wr(a,e,t,r){Lo(t)||t.dispatchAction({type:"highlight",seriesName:a,name:e,excludeSeriesId:r})}function Xr(a,e,t,r){Lo(t)||t.dispatchAction({type:"downplay",seriesName:a,name:e,excludeSeriesId:r})}function Sv(a){var e=a.findComponents({mainType:"legend"});e&&e.length&&a.filterSeries(function(t){for(var r=0;r<e.length;r++)if(!e[r].isSelected(t.name))return!1;return!0})}function ne(a,e,t){var r=a==="allSelect"||a==="inverseSelect",i={},n=[];t.eachComponent({mainType:"legend",query:e},function(s){r?s[a]():s[a](e.name),Ui(s,i),n.push(s.componentIndex)});var o={};return t.eachComponent("legend",function(s){T(i,function(l,u){s[l?"select":"unSelect"](u)}),Ui(s,o)}),r?{selected:o,legendIndex:n}:{name:e.name,selected:o}}function Ui(a,e){var t=e||{};return T(a.getData(),function(r){var i=r.get("name");if(!(i===`
`||i==="")){var n=a.isSelected(i);vl(t,i)?t[i]=t[i]&&n:t[i]=n}}),t}function wv(a){a.registerAction("legendToggleSelect","legendselectchanged",U(ne,"toggleSelected")),a.registerAction("legendAllSelect","legendselectall",U(ne,"allSelect")),a.registerAction("legendInverseSelect","legendinverseselect",U(ne,"inverseSelect")),a.registerAction("legendSelect","legendselected",U(ne,"select")),a.registerAction("legendUnSelect","legendunselected",U(ne,"unSelect"))}function Io(a){a.registerComponentModel(Fr),a.registerComponentView(Co),a.registerProcessor(a.PRIORITY.PROCESSOR.SERIES_FILTER,Sv),a.registerSubTypeDefaulter("legend",function(){return"plain"}),wv(a)}var Av=function(a){R(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.setScrollDataIndex=function(t){this.option.scrollDataIndex=t},e.prototype.init=function(t,r,i){var n=yn(t);a.prototype.init.call(this,t,r,i),Zi(this,t,n)},e.prototype.mergeOption=function(t,r){a.prototype.mergeOption.call(this,t,r),Zi(this,this.option,t)},e.type="legend.scroll",e.defaultOption=gn(Fr.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),e}(Fr);function Zi(a,e,t){var r=a.getOrient(),i=[1,1];i[r.index]=0,_n(e,t,{type:"box",ignoreSize:!!i})}var $i=rt,xr=["width","height"],br=["x","y"],Dv=function(a){R(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=e.type,t.newlineDisabled=!0,t._currentIndex=0,t}return e.prototype.init=function(){a.prototype.init.call(this),this.group.add(this._containerGroup=new $i),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new $i)},e.prototype.resetInner=function(){a.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},e.prototype.renderInner=function(t,r,i,n,o,s,l){var u=this;a.prototype.renderInner.call(this,t,r,i,n,o,s,l);var h=this._controllerGroup,c=r.get("pageIconSize",!0),v=G(c)?c:[c,c];p("pagePrev",0);var f=r.getModel("pageTextStyle");h.add(new vt({name:"pageText",style:{text:"xx/xx",fill:f.getTextColor(),font:f.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),p("pageNext",1);function p(d,m){var g=d+"DataIndex",y=wn(r.get("pageIcons",!0)[r.getOrient().name][m],{onclick:j(u._pageGo,u,g,r,n)},{x:-v[0]/2,y:-v[1]/2,width:v[0],height:v[1]});y.name=d,h.add(y)}},e.prototype.layoutInner=function(t,r,i,n,o,s){var l=this.getSelectorGroup(),u=t.getOrient().index,h=xr[u],c=br[u],v=xr[1-u],f=br[1-u];o&&se("horizontal",l,t.get("selectorItemGap",!0));var p=t.get("selectorButtonGap",!0),d=l.getBoundingRect(),m=[-d.x,-d.y],g=kt(i);o&&(g[h]=i[h]-d[h]-p);var y=this._layoutContentAndController(t,n,g,u,h,v,f,c);if(o){if(s==="end")m[u]+=y[h]+p;else{var _=d[h]+p;m[u]-=_,y[c]-=_}y[h]+=d[h]+p,m[1-u]+=y[f]+y[v]/2-d[v]/2,y[v]=Math.max(y[v],d[v]),y[f]=Math.min(y[f],d[f]+m[1-u]),l.x=m[0],l.y=m[1],l.markRedraw()}return y},e.prototype._layoutContentAndController=function(t,r,i,n,o,s,l,u){var h=this.getContentGroup(),c=this._containerGroup,v=this._controllerGroup;se(t.get("orient"),h,t.get("itemGap"),n?i.width:null,n?null:i.height),se("horizontal",v,t.get("pageButtonItemGap",!0));var f=h.getBoundingRect(),p=v.getBoundingRect(),d=this._showController=f[o]>i[o],m=[-f.x,-f.y];r||(m[n]=h[u]);var g=[0,0],y=[-p.x,-p.y],_=it(t.get("pageButtonGap",!0),t.get("itemGap",!0));if(d){var x=t.get("pageButtonPosition",!0);x==="end"?y[n]+=i[o]-p[o]:g[n]+=p[o]+_}y[1-n]+=f[s]/2-p[s]/2,h.setPosition(m),c.setPosition(g),v.setPosition(y);var b={x:0,y:0};if(b[o]=d?i[o]:f[o],b[s]=Math.max(f[s],p[s]),b[l]=Math.min(0,p[l]+y[1-n]),c.__rectSize=i[o],d){var w={x:0,y:0};w[o]=Math.max(i[o]-p[o]-_,0),w[s]=b[s],c.setClipPath(new ft({shape:w})),c.__rectSize=w[o]}else v.eachChild(function(D){D.attr({invisible:!0,silent:!0})});var S=this._getPageInfo(t);return S.pageIndex!=null&&nt(h,{x:S.contentPosition[0],y:S.contentPosition[1]},d?t:null),this._updatePageInfoView(t,S),b},e.prototype._pageGo=function(t,r,i){var n=this._getPageInfo(r)[t];n!=null&&i.dispatchAction({type:"legendScroll",scrollDataIndex:n,legendId:r.id})},e.prototype._updatePageInfoView=function(t,r){var i=this._controllerGroup;T(["pagePrev","pageNext"],function(h){var c=h+"DataIndex",v=r[c]!=null,f=i.childOfName(h);f&&(f.setStyle("fill",v?t.get("pageIconColor",!0):t.get("pageIconInactiveColor",!0)),f.cursor=v?"pointer":"default")});var n=i.childOfName("pageText"),o=t.get("pageFormatter"),s=r.pageIndex,l=s!=null?s+1:0,u=r.pageCount;n&&o&&n.setStyle("text",H(o)?o.replace("{current}",l==null?"":l+"").replace("{total}",u==null?"":u+""):o({current:l,total:u}))},e.prototype._getPageInfo=function(t){var r=t.get("scrollDataIndex",!0),i=this.getContentGroup(),n=this._containerGroup.__rectSize,o=t.getOrient().index,s=xr[o],l=br[o],u=this._findTargetItemIndex(r),h=i.children(),c=h[u],v=h.length,f=v?1:0,p={contentPosition:[i.x,i.y],pageCount:f,pageIndex:f-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!c)return p;var d=x(c);p.contentPosition[o]=-d.s;for(var m=u+1,g=d,y=d,_=null;m<=v;++m)_=x(h[m]),(!_&&y.e>g.s+n||_&&!b(_,g.s))&&(y.i>g.i?g=y:g=_,g&&(p.pageNextDataIndex==null&&(p.pageNextDataIndex=g.i),++p.pageCount)),y=_;for(var m=u-1,g=d,y=d,_=null;m>=-1;--m)_=x(h[m]),(!_||!b(y,_.s))&&g.i<y.i&&(y=g,p.pagePrevDataIndex==null&&(p.pagePrevDataIndex=g.i),++p.pageCount,++p.pageIndex),g=_;return p;function x(w){if(w){var S=w.getBoundingRect(),D=S[l]+w[l];return{s:D,e:D+S[s],i:w.__legendDataIndex}}}function b(w,S){return w.e>=S&&w.s<=S+n}},e.prototype._findTargetItemIndex=function(t){if(!this._showController)return 0;var r,i=this.getContentGroup(),n;return i.eachChild(function(o,s){var l=o.__legendDataIndex;n==null&&l!=null&&(n=s),l===t&&(r=s)}),r??n},e.type="legend.scroll",e}(Co);function Cv(a){a.registerAction("legendScroll","legendscroll",function(e,t){var r=e.scrollDataIndex;r!=null&&t.eachComponent({mainType:"legend",subType:"scroll",query:e},function(i){i.setScrollDataIndex(r)})})}function Lv(a){Pt(Io),a.registerComponentModel(Av),a.registerComponentView(Dv),Cv(a)}function Iv(a){Pt(Io),Pt(Lv)}const Tv={class:"output-display"},Mv={key:0,class:"text-output"},kv={class:"whitespace-pre-wrap p-4 bg-gray-100 rounded-lg"},Pv={key:1,class:"chart-output mt-4"},Ov={class:"chart-container space-y-4"},Ev={__name:"OutputDisplay",props:{output:{type:String,default:""}},setup(a){Pt([Wu,fh,Th,ov,av,Iv,Bc,yv]);const e=a,t=Ma(""),r=Ma(null);dl(()=>e.output,n=>{if(!n)return;const o=n.split("<ECHARTS_DATA>");if(t.value=o[0].trim(),o[1])try{r.value=JSON.parse(o[1])}catch(s){console.error("Failed to parse chart data:",s)}else r.value=null},{immediate:!0});const i=gl(()=>{if(!r.value)return[];const n=r.value.dates||r.value.x||[],o=r.value.crisis||[],{x:s,dates:l,crisis:u,...h}=r.value,c=[];for(const v of Object.keys(h)){const f=h[v];if(typeof f!="object"||f===null||!f.series)continue;const p=f.type||"line",d=f.yAxisName||"",m=f.series,g=Object.keys(m),y=g.map(x=>({name:x,type:p,data:m[x]})),_={title:{text:v.replace(/([A-Z])/g," $1").trim()},tooltip:{trigger:"axis"},legend:{data:g},xAxis:{type:"category",data:n},yAxis:{type:"value",name:d},series:y};if(o.length>0)for(const x of _.series)x.markLine={data:o.map(b=>({xAxis:b.date,label:{formatter:b.name,position:"insideEndTop",rotate:90,color:"#172E5C"},lineStyle:{color:"#BC1142",type:"dashed"}}))};c.push(_)}return c});return(n,o)=>(jt(),Jt("div",Tv,[t.value?(jt(),Jt("div",Mv,[ka("pre",kv,ml(t.value),1)])):Pa("",!0),r.value?(jt(),Jt("div",Pv,[ka("div",Ov,[(jt(!0),Jt(yl,null,_l(i.value,(s,l)=>(jt(),Jt("div",{key:l,class:"mb-8"},[xl(bl(fl),{class:"chart",option:s,autoresize:""},null,8,["option"])]))),128))])])):Pa("",!0)]))}},Bv=pl(Ev,[["__scopeId","data-v-1e049633"]]);export{Bv as default};
